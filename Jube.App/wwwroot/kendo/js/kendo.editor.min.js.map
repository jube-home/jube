{"version":3,"sources":["kendo.editor.js"],"names":["f","define","kendo","UndoRedoStack","Observable","extend","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","amd","a1","a2","a3","$","undefined","Tool","emptyElementContent","emptyTableCellContent","window","Class","Widget","ui","os","support","mobileOS","browser","proxy","keys","SELECT","SELECT_OVERLAY_SELECTOR","PLACEHOLDER_CLASS","PLACEHOLDER_TAG_ID","REFRESH_INTERVAL","DEFAULT_LANGUAGE","ToolTemplate","getHtml","template","useWithBlock","EditorUtils","editorWrapperTemplate","buttonTemplate","iconTextButtonTemplate","tableWizardButtonTemplate","colorPickerTemplate","comboBoxTemplate","dropDownListTemplate","separatorTemplate","overflowAnchorTemplate","formatByName","name","format","i","inArray","tags","getToolCssClass","toolCssClassNames","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","insertUpperRomanList","insertLowerRomanList","import","indent","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","mergeCellsHorizontally","mergeCellsVertically","splitCellHorizontally","splitCellVertically","tableWizard","tableWizardInsert","tableAlignLeft","tableAlignCenter","tableAlignRight","cleanFormatting","copyFormat","applyFormat","cssClass","registerTool","toolName","tool","toolOptions","toLowerCase","Editor","defaultTools","registerFormat","formatName","formats","cacheComments","content","comments","index","replace","retrieveComments","messages","bold","italic","underline","strikethrough","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","style","emptyFolder","editAreaTitle","uploadFile","overflowAnchor","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","fileText","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableTab","cellTab","accessibilityTab","caption","summary","width","height","units","cellSpacing","cellPadding","cellMargin","alignment","background","id","border","borderStyle","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","exportAs","print","headerRows","headerColumns","tableSummaryPlaceholder","associateNone","associateScope","associateIds","supportedBrowser","ios","flatVersion","document","documentElement","contentEditable","toolGroups","basic","lists","indenting","formatPainter","links","tables","element","value","toolbarContainer","toolbarOptions","type","domElement","deserializedRoot","that","editorNS","editor","dom","Dom","tools","_registerHandler","closest","update","_wrapTextarea","wrapper","find","attr","addClass","popup","insertBefore","toolbar","Toolbar","bindTo","setTimeout","heightStyle","expectedHeight","parseInt","actualHeight","indexOf","isNaN","_resizable","_initializeContentElement","keyboard","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","clipboard","Clipboard","undoRedoStack","textarea","encoded","defaultValue","trim","Serializer","htmlToDom","deserialization","getAllComments","innerHTML","mousedown","_endTyping","mouseup","e","_mouseup","_initializeImmutables","resize","notify","setOptions","_initializePlaceholder","_togglePlaceholder","show","body","$body","placeholder","toggleClass","isTypingInProgress","endTyping","saveSelection","_selectionChange","_selectionStarted","draggableElement","resizableWidget","resizable","isResizable","isPlainObject","insertAfter","kendoResizable","start","currentTarget","initialSize","append","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","remove","getKendoResizable","draggable","ignore","_initializeTableResizing","TableResizing","create","_showTableResizeHandlesProxy","_showTableResizeHandles","bind","_destroyTableResizing","tableResizing","destroy","unbind","showResizeHandles","_initializeColumnResizing","ColumnResizing","_destroyColumnResizing","columnResizing","_initializeRowResizing","RowResizing","_destroyRowResizing","rowResizing","w","h","editorWrap","editArea","appendTo","css","_createContentElement","stylesheets","iframe","wnd","doc","specifiedDomain","domain","domainScript","src","lang","hide","title","frameBorder","tabIndex","location","hostname","contentWindow","contentDocument","one","decorateFrom","getElementsByTagName","getAttribute","open","write","isRtl","map","href","join","close","_blur","old","val","_oldValue","encodedValue","_spellCorrect","beforeCorrection","falseTrigger","contextmenu","_spellCorrectTimeout","RestorePoint","getRange","input","mozilla","_finishUpdate","handler","eventNames","t","NS","_handlers","hasOwnProperty","applyEventMap","split","on","_deregisterHandlers","handlers","off","blurTrigger","mousedownTrigger","interval","createElement","setAttribute","appendChild","setInterval","clearInterval","_mousedown","execCommand","touch","keydown","_activeElement","focus","mouseover dragenter","htmlHeight","parentElement","target","nodeName","_cachedHeight","mouseout dragleave drop contextmenu","restoreHeight","range","left","container","offset","direction","next","nextChar","keyCode","BACKSPACE","DELETE","F10","preventPopupHide","preventDefault","LEFT","RIGHT","nodeType","nodeValue","setStart","collapse","selectRange","toolFromShortcut","keyPressCommand","test","exec","_runPostContentKeyCommands","clearTimeout","keypress","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","_refreshInterval","click","createRange","selectNode","cut copy paste drop dragover","focusin","hasAttribute","focusout","toolbarContainerElement","active","get","contains","focused","removeClass","$head","head","immutables","Immutables","parents","stopPropagation","gecko","which","is","tagName","o","cmd","toolsFromShortcut","changesContent","refresh","_destroyResizings","custom","serialization","entities","semantic","scripts","pasteCleanup","all","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","dialogOptions","modal","animation","imageBrowser","fileBrowser","text","concat","_focusOutside","_destroyUploadWidget","dispose","msie","tempInput","blur","_uploadWidget","state","textNodes","finder","RangeUtils","collapsed","startContainer","getFormat","isFormatted","html","currentHtml","domToXhtml","selectionRestorePoint","refreshTools","commonAncestorContainer","_focusBody","scrollTop","activeElement","scrollHeight","clientHeight","restoreSelection","toRange","encode","getSelection","SelectionUtils","selectionFromDocument","selection","removeAllRanges","addRange","rangeCount","getRangeAt","endContainer","startOffset","endOffset","_containsRange","isAncestorOrSelf","_deleteSavedRange","_range","selectedHtml","cloneContents","paste","InsertHtmlCommand","params","prevented","Error","toolById","async","change","managesUndoRedo","key","ctrl","plugin","initialize","unselectable","aria-label","commandArguments","noop","edge","PDFMixin","prototype","_drawPDF","drawing","drawDOM","pdf","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","proxyTarget","forceProxy","resolve","fail","err","reject","jQuery","makeMap","items","len","obj","whitespace","emptyspace","rgb","bom","whitespaceOrBom","persistedScrollTop","cssAttributes","htmlRe","entityRe","entityTable","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","empty","nonListBlockElements","blockElements","block","selfClosing","inlineElements","inline","fillAttrs","normalize","node","version","parent","firstChild","prev","nextSibling","34","38","39","60","62","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","402","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","931","932","933","934","935","936","937","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","977","978","982","8226","8230","8242","8243","8254","8260","8472","8465","8476","8482","8501","8592","8593","8594","8595","8596","8629","8656","8657","8658","8659","8660","8704","8706","8707","8709","8711","8712","8713","8715","8719","8721","8722","8727","8730","8733","8734","8736","8743","8744","8745","8746","8747","8756","8764","8773","8776","8800","8801","8804","8805","8834","8835","8836","8838","8839","8853","8855","8869","8901","8968","8969","8970","8971","9001","9002","9674","9824","9827","9829","9830","338","339","352","353","376","710","732","8194","8195","8201","8204","8205","8206","8207","8211","8212","8216","8217","8218","8220","8221","8222","8224","8225","8240","8249","8250","8364","findNodeIndex","skipText","previousSibling","isDataNode","data","isAncestorOf","parentNode","findClosestAncestor","rootElem","iterator","createNodeIterator","NodeFilter","SHOW_COMMENT","FILTER_ACCEPT","curNode","nextNode","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","deleteData","attrEquals","attributes","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","nodes","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","className","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","significantChildNodes","isWhitespace","lastTextNode","result","lastChild","isMarker","allWhitespaceContent","isEmptyspace","htmlIndentSpace","sibling","isPrevBlock","isNextBlock","el","isBlock","isSelfClosing","isEmpty","isInline","isBr","list","scrollContainer","compatMode","scrollingElement","scrollTo","toStart","elementTop","elementHeight","marker","windowHeight","innerHeight","top","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","insertAt","newElement","position","referenceElement","removeChildren","removeTextSiblings","closestBy","condition","rootCondition","ofType","changeTag","skipAttributes","attribute","specified","cssText","editableParent","wrap","unwrap","createEmptyNode","removeAttribute","mergeAttributes","origin","traverseCss","each","unstyle","inlineStyle","getEffectiveBackground","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","first","j","count","arguments","paths","minPathLength","output","reverse","closestSplittableParent","editableParents","editableAncestor","apply","closestEditable","types","editable","closestEditableOfType","filter","invert","filterFn","filterBy","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","reMapTableColumns","table","colAttr","_mapColIndices","clearTableMappings","removeAttr","rowIndex","cells","colIndex","cellIndex","cell","registeredColumns","rowSpan","_mapColspan","colSpan","ci","ri","associateWithIds","theadRows","numberOfTheadRows","tableRows","numberOfTableRows","theadMatrix","tbodyMatrix","tHead","_getNumberOfHeaderRows","_generateIdsForColumns","_generateIdsForRows","_assignIds","row","col","colspan","rowspan","k","l","timestamp","Date","getTime","headers","pushHeaderId","forEach","_onlyUnique","_getNumberOfColumns","currentIndex","numberOfCols","_getNumberOfHeaderColumns","numberOfHeaderRows","thead","number","self","supportsLeadingWhitespace","isFunction","TD","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","bomSpan","div","toEditableHtml","_toEditableImmutables","immutable","last","prependTo","_fillEmptyElements","p","children","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","_preventScriptExecution","attributesToRemove","deserialize","semanticFilter","mapStart","tag","cssProperties","property","properties","lastIndex","styleAttr","specifiedAttributes","$node","htmlEncode","skip","skipEncoding","childNode","isEmptyBomNode","mapper","previous","jqNode","serialize","hasClass","tagMap","end","textOnly","childrenCount","textChild","runCustom","k:script","font","size","semanticAttributes","textDecoration","fontFamily","strong","em","b","u","styleObj","item","splice","face","script","DropDownList","SelectBox","_initSelectOverlay","autoSize","listWidth","whiteSpace","_listWidth","scrollbar","select","selectBox","view","dataSource","decorate","compareBoundaries","startAncestor","endAncestor","fixIvalidRange","isInvalidRange","ex","updateRangeProperties","textRangeContainer","textRange","duplicate","right","adoptContainer","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","createTextRange","moveToElementText","setEndPoint","adoptEndPoint","comparison","appended","compareEndPoints","RangeIterator","W3CSelection","RangeEnumerator","ImmutablesRangeIterator","ImmutablesRangeEnumerator","Marker","boundary","selectionFromWindow","selectionFromRange","rangeDocument","documentFromRange","W3CRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","fromNode","_current","_next","_end","hasNext","current","traverse","callback","nodeIndex","inStartContainer","inEndContainer","getSubRange","subRange","movedStart","movedEnd","enumerate","visit","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","rangeBoundary","isExpandable","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","shouldNormalize","isBomSelected","collapsedToStart","startParent","endParent","startIndex","endIndex","charAt","editableTextNodes","immutableParent","image","stringify","partition","contents","partitionRange","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","isEnd","startEditable","endEditable","beforeCaret","afterCaret","search","substring","complexBlocks","toolsToBeUpdated","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","IMMUTABLE_SELECTOR","expandImmutablesIn","startImmutableParent","endImmutableParent","immutablesContext","editableNodes","randomId","chars","round","random","serialized","replaceWith","deletingKey","updateToolOptions","_initOptions","_toHtml","serializationType","isDeleting","shouldCancelEvent","_cancelDeleting","_cancelTyping","typingInProgress","isTypingKey","cancelDeleting","closestSelectionLi","closestImmutableLi","backspace","del","nextImmutable","_removeImmutable","forwards","commonContainer","_nextNode","startRestorePoint","finishUpdate","endRestorePoint","GenericCommand","Command","restorePoint","formatter","lockRange","releaseRange","point","createDialog","kendoWindow","toggle","outerWidth","_outerWidth","outerHeight","_outerHeight","OVERFLOWANCHOR","focusable","toolNamesByCssClass","k-i-sup-script","k-i-sub-script","k-i-align-left","k-i-align-center","k-i-align-right","k-i-align-justify","k-i-list-unordered","k-i-list-ordered","k-i-list-roman-upper","k-i-list-roman-lower","k-i-import","k-i-indent-increase","k-i-indent-decrease","k-i-link-horizontal","k-i-unlink-horizontal","k-i-image","k-i-file-add","k-i-html","k-i-foreground-color","k-i-paint","k-i-table-insert","k-i-table-column-insert-left","k-i-table-column-insert-right","k-i-table-row-insert-above","k-i-table-row-insert-below","k-i-table-row-delete","k-i-table-column-delete","k-i-table-properties","k-i-table-wizard","k-i-table-position-left","k-i-table-position-center","k-i-table-position-right","k-i-clear-css","k-i-cells-merge-horizontally","k-i-cells-merge-vertically","k-i-cell-split-horizontally","k-i-cell-split-vertically","k-i-copy-format","k-i-apply-format","OverflowAnchorTool","overflowPopup","_initPopup","_resizeHandler","onResize","groups","tablesInsert","tablesAddDelete","tablesMerge","tablesPosition","advanced","fonts","colors","overflowFlaseTools","prepend","dragHandle","effects","minHeight","visible","autoFocus","actions","dragend","_moved","_toggleOverflowStyles","_initOverflowPopup","popupTemplate","kendoPopup","anchor","copyAnchorStyles","activate","focusOverflowPopup","toolGroupFor","isCustomTool","_editor","expandTools","render","combobox","dropDown","isOpened","stopImmediatePropagation","_attachEvents","inheritText","_toolName","description","tooltip","_appendShortcutSequence","editorElement","editorOffset","editorOptions","_getWindowWidth","_overlaps","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","boxOffset","boxOffsetLeft","boxOffsetTop","TABINDEX","localizedText","res","shift","alt","_nativeTools","currentTool","nativeTools","endGroup","group","groupPosition","startGroup","toolElement","groupName","newGroupName","toolConfig","not","updateGroups","angular","unbindResize","popupElement","attachToolsEvents","buttons","enabledButtons","disabledButtons","dropdown","colorpicker","editorTools","move","constrain","focusableItems","focusElement","currentContainer","ESC","ENTER","SPACEBAR","_executeToolCommand","button","toolname","toCamelCase","lastIndexOf","_immutablesContext","_updateImmutablesState","display","uiData","widget","groupUi","uiElement","trackImmutables","_resize","containerWidth","toolbarWindow","_refreshWidths","_shrink","_stretch","idx","visibleGroups","_groupsWidth","_visibleGroups","eq","_hideGroup","hiddenGroups","_hiddenGroups","_showGroup","sort","a","detach","groupWidth","ViewHtmlCommand","dialog","center","FormatCommand","FormatTool","MOUSEDOWN_NS","KEYDOWN_NS","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","values","formatNode","formatNodes","consolidate","outerMostInline","pop","GreedyInlineFormatFinder","greedyProperty","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parentsUntil","addBack","toArray","GreedyInlineFormatter","action","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","initOptions","dataTextField","dataValueField","highlightFirst","newRange","ColorTool","palette","_widget","ColorPicker","toolIcon","storedRange","_inputFocused","picker","sender","_popup","_value","toCssRgba","fontWeight","fontStyle","lastIndexOfRegExp","str","indexOfRegExp","r","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","ref","UnlinkCommand","LinkCommand","url","_dialogTemplate","img","_initialText","_close","_apply","_keydown","linkUrl","_dialog","textInput","AutoLinkCommand","linkMarker","linkRange","detectedLink","detectLink","_ensureWebProtocol","traverser","detection","startNode","LeftDomTextTraverser","cancelAtNode","DomTextLinkDetection","hasProtocol","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","DomPos","puntuationOptions","puntuationTraverser","_detectEnd","blank","clone","_detectStart","_isLinkDetected","extendOptions","RightDomTextTraverser","_skipStartPuntuation","ii","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","listElements","BlockFormatFinder","candidate","suitable","_resolveListsItems","until","ImmutablesNS","BlockFormatter","ancestor","images","imageFormat","imageAttributes","nonImages","_handleImmutables","applyFormatting","immutableFormat","namedFormat","GreedyBlockFormatter","immutalbeParent","blockFormatter","formatTag","ListFormatter","BlockFormatTool","textAlign","float","marginLeft","marginRight","listStylePosition","ListFormatFinder","altAttr","matchesType","isList","unwrapTag","li","isImmutable","containsAny","_parentLists","merge","breakable","findSuitableNode","applyOnSection","section","pushAncestor","listStyleType","addLastSection","lastSection","sections","lastNodes","ul","fragment","ListCommand","ListTool","unwrapListItem","listFormatter","FormattingTool","toFormattingItem","dot","context","kendoSelectBox","dataItem","toJSON","dataBound","getFormattingValue","n","_ancestor","field","operator","CleanFormatCommand","tagsToClean","clean","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onload","onerror","showBrowser","applied","keyDown","dialogHeight","isIE","ImageBrowser","transport","read","_imageBrowser","ev","selected","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","upload","kendoUpload","success","_onUploadSuccess","_onUploadProgress","_onUploadSelect","error","_onUploadError","complete","_onUploadComplete","showFileList","multiple","saveUrl","autoUpload","saveField","validation","allowedExtensions","maxFileSize","getKendoUpload","_trigger","clearAllFiles","_removeLoadingOverlay","response","files","validationErrors","_initLoadingOverlay","eventType","uploadEvent","_iframeWrapper","_container","genericCommand","postProcess","InsertHtmlTool","_selectBox","selectbox","initialValue","defaultExportAsItems","ExportAsCommand","exportType","postToProxy","generateForm","submit","exportAsOptions","form","method","valueInput","exportTypeInput","fileNameInput","ExportAsTool","changeHandler","displayName","unshift","valueTemplate","_exec","indentDirection","IndentFormatter","targets","parentList","siblingList","nestedList","targetIndex","mapImmutables","getListTypeAttr","styleType","targetNode","listParent","siblings","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","suitableNodes","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","tableNode","rng","parentChildrenLength","emptyParagraphContent","_insertParagraphAfter","NewLineCommand","filler","oldIE","KEDITORFILEURL","KEDITORFILETEXT","KEDITORFILETITLE","FileCommand","file","FileBrowser","_fileBrowser","ACTIVESTATE","SELECTEDSTATE","SCOPE","ROW","COL","ROWGROUP","COLGROUP","COLSPAN","ROWSPAN","TABLE","THEAD","TBODY","TR","TH","getTouches","columnTemplate","tableFormatFinder","TableCommand","skipCleaners","_tableHtml","columnHtml","rowHeight","Array","insertedTable","PopupTool","twTool","_open","_activate","_toggle","TableWizardTool","TableWizardCommand","insertNewTable","InsertTableTool","cols","tableFromLocation","floor","clientY","cellHeight","clientX","scrollLeft","cellWidth","firstCell","lastCell","getOffset","offsetWidth","autoApplyNS","_setTableSize","_valid","status","selectedRows","selectedColumns","changed","tableSize","TableModificationCommand","_clearColIndexAttr","_findRowSpanCell","_resetTableResizing","_findNextTdInRow","td","lastTd","prop","_adjustColgroups","colgroup","colElements","colgroupElements","numberOfCells","_associateHeaderIds","InsertRowCommand","cellCount","newRow","rowSpanIndex","createdCell","_appendCell","newCell","InsertColumnCommand","columnIndex","_processForColSpan","_resizeCells","selectedCell","colSpanEffect","parsedWidth","unit","calculatedWidth","parseFloat","DeleteRowCommand","rowParent","_focusElement","_handleRowSpanCells","adjacentCell","nextRow","firstRow","before","_reduceRowSpan","rowSpanValue","DeleteColumnCommand","columnCount","_handleColSpanCells","after","_reduceColSpan","colSpanValue","MergeCellsHorizontallyCommand","nextTd","_getColspan","MergeCellsVerticallyCommand","tr","targetRow","bottomTd","_getRowspan","SplitCellCommand","emptyTd","_splitCellHorizontally","_splitCellVertically","_getRowspanValue","_getColspanValue","tdToAdd","colSpanResult","rowSpanResult","TableModificationTool","commandsMap","insert","delete","column","TableFormatCommand","_showResizeHandles","TableFormatTool","isTable","align","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","originalEvent","_insertImages","when","results","onpaste","clipboardRange","clipboardNode","_decoreateClipboardNode","webkit","_moveToCaretPosition","containers","ondragover","ondrop","dataTransfer","borderWidth","overflow","margin","padding","fontVariant","lineSpacing","lineHeight","nodeOffset","caretOffset","_caretOffset","translateX","translateY","translate","-webkit-transform","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","splittable","fragmentsHtml","rangeEnd","focusedTable","siblingNodes","lastSiblingIndex","lastSibling","applicable","elm","Cleaner","replacements","customReplacements","replacement","junkReplacements","convertFontMatch","$0","$1","closing","faceRe","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","_checkForBullet","_getHtmlNoBullet","bulletRgx","extractListLevels","msoListRegExp","level","_createList","rootMargin","rootIndex","lastRootLi","isLastRootLi","rootList","listIndex","levelType","blockChildren","lastMargin","levels","acceptedNameTags","isParentTable","removeAttributes","removeAttributeNode","createColGroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeDefaultColors","spans","removeTextNodes","trs","currentNode","longestRow","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","TextContainer","HtmlTextLines","separators","line","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","tbody","cleaner","tdCleaner","cellText","getSibling","PREVIOUS_SIBLING","tableCells","tableCellsWrappers","tableElements","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","getNext","removeTableContent","backspaceHandler","evt","Event","isDefaultPrevented","deleteSelection","startTyping","_addCaret","chrome","_restoreCaret","_handleDelete","_merge","_cleanBomBefore","_handleBackspace","startAtLi","liIndex","startAtNonFirstLi","rangeStartNode","previousNode","isEndOfLink","_handleSelection","parentElementOrNode","_surroundFullyContent","_surroundFullySelectedAnchor","toLocaleLowerCase","_join","startImmutable","endImmutable","_moveMarker","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","systemCommandIsInProgress","createUndoCommand","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","mac","toUpperCase","metaKey","matchesKey","found","matchKey","toolKey","isArray","onEndTyping","stopTyping","force","timeout","what","ExportPdfCommand","PrintCommand","CopyFormatCommand","inlineStyles","blockStyles","collectStyles","rangeNodes","populateStyles","destination","styleValue","styleKey","attributeKey","styles","nodeStyles","ApplyFormatCommand","removeEmptyElementsFromRange","cleanInlineParents","applyBlockStyles","applyInlineStyles","isEmptyInline","emptyElements","blockParent","outerWrapper","previousNodes","nextNodes","prevWrapper","nextWrapper","listItems","currentStyle","createdNode","topNode","CopyFormatTool","ApplyFormatTool","lowerBound","upperBound","getScrollBarWidth","calculatePercentageRatio","total","inPercentages","STRING","REGEX_NUMBER_IN_PERCENTAGES","inPixels","REGEX_NUMBER_IN_PIXELS","toPercentages","PERCENTAGE","toPixels","PIXEL","global","math","ResizingUtils","KEY_DOWN","MOUSE_DOWN","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_MOVE","MOUSE_UP","COMMA","DOT","LAST_CHILD","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","onResizeStart","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","COLATTR","WIDTH","handleWidth","borderOffset","mousePosition","tableInnerElement","tBodies","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnOffsetLeft","innerElementOffsetTop","tableHead","tableBody","fullHeight","handleOffset","columnWidth","columnLeftOffset","adjacentColumnWidth","resizeHandleOffsetLeft","newWidth","initialAdjacentColumnWidth","initialColumnWidth","nextColumn","rtlModifier","initialDeltaX","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","innerElementWidth","currentColumnsWidths","topAndBottomColumns","innerTableElement","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","RESIZE_HANDLE_MARKER_WRAPPER_CLASS","HEIGHT","handleHeight","rowOffsetLeft","rowOffsetTop","topInnerTableElement","$row","tableTopOffset","resizeHandleOffsetTop","currentRowHeight","initialTableHeight","tableHeadHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","HandlePositioningStrategy","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","HandleDraggingStrategy","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","TableResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","scrollOffsetPosition","applyScrollOffset","rootLeft","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","isUndefined","RESIZE_HANDLE_WRAPPER_CLASS","TABLE_CLASS","TABLE_RESIZING_CLASS","COLUMN","handles","_destroyResizeHandles","appendHandlesTo","minWidth","_resizeWidth","_resizeHeight","ratioValue","ratioTotalValue","constrainedWidth","styleWidth","currentWidth","parentWidth","maxWidth","_getMaxDimensionValue","_initialElementWidth","_setColumnsWidth","constrainedHeight","styleHeight","currentHeight","parentHeight","maxHeight","hasRowsInPixels","_hasRowsInPixels","_initialElementHeight","dimension","dimensionLowercase","parentDimension","parentScrollOffset","isWidthInPercentages","parentColumn","columnsLength","_initResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_onResizeHandleDrag","_onResizeHandleDragEnd","_onResizeHandleMouseOver","_onResizeHandleMouseOut","TableResizingFactory","factory","eventTarget","eventCurrentTarget","isResizeHandleOrChild","cellsFormatFinder","reUnit","COL_INDEX","HEADERS","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","_ensureFocusableAfterTable","lastSelectedRow","cellProp","tableProp","tableProperties","_lastInCollection","_deleteTableRows","_addRows","_updateColumns","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","_updateHeadersWithThead","_updateHeadersNoThead","_updateHeaderAssociates","_isHeadingRow","_isHeadingCell","cellsWithHeadersAssociated","associatedCells","headingIds","checkHeader","header","headersArray","headersAttr","some","_insertCells","insertCell","createTHead","_createTableRows","createTBody","cellsWithHeaders","_addScopes","initialIndex","cellPropToAll","insertRow","cellsLength","newRowsCount","firstRowLastCell","numberOfColumns","lastCurrentCell","rowColumns","deleteCell","_getStylesData","captionContent","deleteCaption","createCaption","_getAlignmentData","captionAlignment","verticalAlign","_swapToHeaderCells","deleteTHead","_removeScopes","_removeAssociates","headerCols","tds","swapCell","widthUnit","heightUnit","backgroundColor","bgColor","borderColor","borderCollapse","tStyle","captionClone","tableAlignment","numberOfHeaderColumns","tableJson","_getAlignment","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","vAlign","hAlign","collection","TableWizardEditTool","numericTextBoxSettings","borderStyles","DEFAULT_NUMBER_OF_COLS_AND_ROWS","tableAlignmentDropDownSettings","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","dialogTemplate","okHandler","collectDialogValues","tableData","closeHandler","_initTabStripComponent","_initTableViewComponents","_initCellViewComponents","_initAccessibilityViewComponents","components","tabStrip","kendoTabStrip","_collectTableViewValues","_collectCellViewValues","_collectAccessibilityViewValues","tableView","checked","cellView","accessibilityView","_addUnit","onColumnsNumberChange","onRowsNumberChange","headerColumnsNumeric","currentNumberOfColumnsHeaders","headerRowsNumeric","currentNumberOfRowHeaders","numberOfRows","_initNumericTextbox","_initDropDownList","_initTableAlignmentDropDown","_initColorPicker","_initInput","_initCheckbox","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","_initAssociationDropDown","valuePrimitive","storage","settings","component","kendoNumericTextBox","kendoDropDownList","_setComponentValue","_initAlignmentDropDown","kendoColorPicker","clearButton","_destroyComponents"],"mappings":"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IAAK,MACLC,IAAK;AACLC,IAAK,OACLC,IAAK,MACLC,IAAK,SACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,MACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,MACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,UACLC,IAAK,OACLC,IAAK,MACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,UACLC,IAAK,KACLC,IAAK,MACLC,IAAK,QACLC,IAAK,MACLC,IAAK,UACLC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,IAAK,QACLC,IAAK,QACLC,I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","file":"kendo.editor.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('util/undoredostack', ['kendo.core'], f);\n}(function () {\n    (function (kendo) {\n        var UndoRedoStack = kendo.Observable.extend({\n            init: function (options) {\n                kendo.Observable.fn.init.call(this, options);\n                this.clear();\n            },\n            events: [\n                'undo',\n                'redo'\n            ],\n            push: function (command) {\n                this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n                this.currentCommandIndex = this.stack.push(command) - 1;\n            },\n            undo: function () {\n                if (this.canUndo()) {\n                    var command = this.stack[this.currentCommandIndex--];\n                    command.undo();\n                    this.trigger('undo', { command: command });\n                }\n            },\n            redo: function () {\n                if (this.canRedo()) {\n                    var command = this.stack[++this.currentCommandIndex];\n                    command.redo();\n                    this.trigger('redo', { command: command });\n                }\n            },\n            clear: function () {\n                this.stack = [];\n                this.currentCommandIndex = -1;\n            },\n            canUndo: function () {\n                return this.currentCommandIndex >= 0;\n            },\n            canRedo: function () {\n                return this.currentCommandIndex != this.stack.length - 1;\n            }\n        });\n        kendo.deepExtend(kendo, { util: { UndoRedoStack: UndoRedoStack } });\n    }(kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/main', [\n        'util/undoredostack',\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.window',\n        'kendo.colorpicker'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Widget = kendo.ui.Widget, os = kendo.support.mobileOS, browser = kendo.support.browser, extend = $.extend, proxy = $.proxy, deepExtend = kendo.deepExtend, keys = kendo.keys;\n        var SELECT = 'select';\n        var SELECT_OVERLAY_SELECTOR = 'select.k-select-overlay';\n        var PLACEHOLDER_CLASS = 'k-placeholder';\n        var PLACEHOLDER_TAG_ID = 'placeholder';\n        var REFRESH_INTERVAL = 200;\n        var DEFAULT_LANGUAGE = 'en';\n        var ToolTemplate = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            getHtml: function () {\n                var options = this.options;\n                return kendo.template(options.template, { useWithBlock: false })(options);\n            }\n        });\n        var EditorUtils = {\n            editorWrapperTemplate: '<table cellspacing=\"0\" cellpadding=\"0\" class=\"k-widget k-editor\" role=\"presentation\">' + '<tbody>' + '<tr role=\"presentation\"><td class=\"k-editor-toolbar-wrap\" role=\"presentation\"><ul class=\"k-toolbar k-editor-toolbar\" role=\"toolbar\"></ul></td></tr>' + '<tr><td class=\"k-editable-area\"></td></tr>' + '</tbody>' + '</table>',\n            buttonTemplate: '# var iconCssClass = \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' + '# var dataPopup = data.popup ? \"data-popup\" : \"\";#' + '<button tabindex=\"0\" role=\"button\" class=\"k-button k-tool\" #= dataPopup # title=\"#= data.title #\" aria-label=\"#= data.title #\">' + '<span class=\"#= iconCssClass #\"></span>' + '<span class=\"k-tool-text k-button-text\">#= data.title #</span>' + '</button>',\n            iconTextButtonTemplate: '# var iconCssClass = \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' + '# var dataPopup = data.popup ? \"data-popup\" : \"\";#' + '<button tabindex=\"0\" role=\"button\" class=\"k-i-import k-button k-button-icontext\" #= dataPopup # title=\"#= data.title #\" aria-label=\"#= data.title #\">' + '<span class=\"#= iconCssClass #\"></span>' + '#= data.title #' + '</button>',\n            tableWizardButtonTemplate: '# var iconCssClass = \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' + '# var dataPopup = data.popup ? \"data-popup\" : \"\";#' + '<button tabindex=\"0\" role=\"button\" class=\"k-tool k-button\" #= dataPopup # title=\"#= data.title #\" aria-label=\"#= data.title #\">' + '<span class=\"#= iconCssClass #\"></span>' + '<span class=\"k-tool-text\">#= data.title #</span>' + '</button>',\n            colorPickerTemplate: '<input class=\"k-colorpicker k-icon k-i-#= data.cssClass.replace(\"k-\", \"\") #\" />',\n            comboBoxTemplate: '<select title=\"#= data.title #\" aria-label=\"#= data.title #\" class=\"#= data.cssClass #\"></select>',\n            dropDownListTemplate: '<span class=\"k-editor-dropdown\"><select title=\"#= data.title #\" aria-label=\"#= data.title #\" class=\"#= data.cssClass #\"></select></span>',\n            separatorTemplate: '<span class=\"k-separator\"></span>',\n            overflowAnchorTemplate: '<button tabindex=\"0\" role=\"button\" class=\"k-button k-tool k-overflow-anchor\" data-popup' + ' title=\"#= data.title #\" aria-label=\"#= data.title #\" aria-haspopup=\"true\" aria-expanded=\"false\">' + '<span class=\"k-icon k-i-more-vertical\"></span>' + '</button>',\n            formatByName: function (name, format) {\n                for (var i = 0; i < format.length; i++) {\n                    if ($.inArray(name, format[i].tags) >= 0) {\n                        return format[i];\n                    }\n                }\n            },\n            getToolCssClass: function (name) {\n                var toolCssClassNames = {\n                    superscript: 'sup-script',\n                    subscript: 'sub-script',\n                    justifyLeft: 'align-left',\n                    justifyCenter: 'align-center',\n                    justifyRight: 'align-right',\n                    justifyFull: 'align-justify',\n                    insertUnorderedList: 'list-unordered',\n                    insertOrderedList: 'list-ordered',\n                    insertUpperRomanList: 'list-roman-upper',\n                    insertLowerRomanList: 'list-roman-lower',\n                    'import': 'import',\n                    indent: 'indent-increase',\n                    outdent: 'indent-decrease',\n                    createLink: 'link-horizontal',\n                    unlink: 'unlink-horizontal',\n                    insertImage: 'image',\n                    insertFile: 'file-add',\n                    viewHtml: 'html',\n                    foreColor: 'foreground-color',\n                    backColor: 'paint',\n                    createTable: 'table-insert',\n                    addColumnLeft: 'table-column-insert-left',\n                    addColumnRight: 'table-column-insert-right',\n                    addRowAbove: 'table-row-insert-above',\n                    addRowBelow: 'table-row-insert-below',\n                    deleteRow: 'table-row-delete',\n                    deleteColumn: 'table-column-delete',\n                    mergeCellsHorizontally: 'cells-merge-horizontally',\n                    mergeCellsVertically: 'cells-merge-vertically',\n                    splitCellHorizontally: 'cell-split-horizontally',\n                    splitCellVertically: 'cell-split-vertically',\n                    tableWizard: 'table-properties',\n                    tableWizardInsert: 'table-wizard',\n                    tableAlignLeft: 'table-position-left',\n                    tableAlignCenter: 'table-position-center',\n                    tableAlignRight: 'table-position-right',\n                    cleanFormatting: 'clear-css',\n                    copyFormat: 'copy-format',\n                    applyFormat: 'apply-format'\n                };\n                var cssClass = toolCssClassNames[name];\n                if (cssClass) {\n                    return cssClass;\n                }\n                return name;\n            },\n            registerTool: function (toolName, tool) {\n                var toolOptions = tool.options;\n                if (toolOptions && toolOptions.template) {\n                    toolOptions.template.options.cssClass = 'k-' + EditorUtils.getToolCssClass(toolName);\n                }\n                if (!tool.name) {\n                    tool.options.name = toolName;\n                    tool.name = toolName.toLowerCase();\n                }\n                Editor.defaultTools[toolName] = tool;\n            },\n            registerFormat: function (formatName, format) {\n                Editor.fn.options.formats[formatName] = format;\n            },\n            cacheComments: function (content, comments) {\n                for (var index in comments) {\n                    content = content.replace(comments[index], '{' + index + '}');\n                }\n                return content;\n            },\n            retrieveComments: function (content, comments) {\n                for (var index in comments) {\n                    content = content.replace('{' + index + '}', comments[index]);\n                }\n                return content;\n            }\n        };\n        var messages = {\n            bold: 'Bold',\n            italic: 'Italic',\n            underline: 'Underline',\n            strikethrough: 'Strikethrough',\n            superscript: 'Superscript',\n            subscript: 'Subscript',\n            justifyCenter: 'Center text',\n            justifyLeft: 'Align text left',\n            justifyRight: 'Align text right',\n            justifyFull: 'Justify',\n            insertUnorderedList: 'Insert unordered list',\n            insertOrderedList: 'Insert ordered list',\n            indent: 'Indent',\n            outdent: 'Outdent',\n            createLink: 'Insert hyperlink',\n            unlink: 'Remove hyperlink',\n            insertImage: 'Insert image',\n            insertFile: 'Insert file',\n            insertHtml: 'Insert HTML',\n            viewHtml: 'View HTML',\n            fontName: 'Select font family',\n            fontNameInherit: '(inherited font)',\n            fontSize: 'Select font size',\n            fontSizeInherit: '(inherited size)',\n            formatBlock: 'Format',\n            formatting: 'Format',\n            foreColor: 'Color',\n            backColor: 'Background color',\n            style: 'Styles',\n            emptyFolder: 'Empty Folder',\n            editAreaTitle: 'Editable area. Press F10 for toolbar.',\n            uploadFile: 'Upload',\n            overflowAnchor: 'More tools',\n            orderBy: 'Arrange by:',\n            orderBySize: 'Size',\n            orderByName: 'Name',\n            invalidFileType: 'The selected file \"{0}\" is not valid. Supported file types are {1}.',\n            deleteFile: 'Are you sure you want to delete \"{0}\"?',\n            overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n            directoryNotFound: 'A directory with this name was not found.',\n            imageWebAddress: 'Web address',\n            imageAltText: 'Alternate text',\n            imageWidth: 'Width (px)',\n            imageHeight: 'Height (px)',\n            fileWebAddress: 'Web address',\n            fileTitle: 'Title',\n            fileText: 'Text',\n            linkWebAddress: 'Web address',\n            linkText: 'Text',\n            linkToolTip: 'ToolTip',\n            linkOpenInNewWindow: 'Open link in new window',\n            dialogUpdate: 'Update',\n            dialogInsert: 'Insert',\n            dialogOk: 'Ok',\n            dialogCancel: 'Cancel',\n            cleanFormatting: 'Clean formatting',\n            createTable: 'Create a table',\n            createTableHint: 'Create a {0} x {1} table',\n            addColumnLeft: 'Add column on the left',\n            addColumnRight: 'Add column on the right',\n            addRowAbove: 'Add row above',\n            addRowBelow: 'Add row below',\n            deleteRow: 'Delete row',\n            deleteColumn: 'Delete column',\n            mergeCellsHorizontally: 'Merge cells horizontally',\n            mergeCellsVertically: 'Merge cells vertically',\n            splitCellHorizontally: 'Split cells horizontally',\n            splitCellVertically: 'Split cells vertically',\n            tableAlignLeft: 'Table Align Left',\n            tableAlignCenter: 'Table Align Center',\n            tableAlignRight: 'Table Align Right',\n            tableWizard: 'Table Wizard',\n            tableTab: 'Table',\n            cellTab: 'Cell',\n            accessibilityTab: 'Accessibility',\n            caption: 'Caption',\n            summary: 'Summary',\n            width: 'Width',\n            height: 'Height',\n            units: 'Units',\n            cellSpacing: 'Cell Spacing',\n            cellPadding: 'Cell Padding',\n            cellMargin: 'Cell Margin',\n            alignment: 'Alignment',\n            background: 'Background',\n            cssClass: 'CSS Class',\n            id: 'ID',\n            border: 'Border',\n            borderStyle: 'Border Style',\n            collapseBorders: 'Collapse borders',\n            wrapText: 'Wrap text',\n            associateCellsWithHeaders: 'Associate headers',\n            alignLeft: 'Align Left',\n            alignCenter: 'Align Center',\n            alignRight: 'Align Right',\n            alignLeftTop: 'Align Left Top',\n            alignCenterTop: 'Align Center Top',\n            alignRightTop: 'Align Right Top',\n            alignLeftMiddle: 'Align Left Middle',\n            alignCenterMiddle: 'Align Center Middle',\n            alignRightMiddle: 'Align Right Middle',\n            alignLeftBottom: 'Align Left Bottom',\n            alignCenterBottom: 'Align Center Bottom',\n            alignRightBottom: 'Align Right Bottom',\n            alignRemove: 'Remove Alignment',\n            columns: 'Columns',\n            rows: 'Rows',\n            selectAllCells: 'Select All Cells',\n            exportAs: 'Export As',\n            'import': 'Import',\n            print: 'Print',\n            headerRows: 'Header Rows',\n            headerColumns: 'Header Cols',\n            tableSummaryPlaceholder: 'Summary attribute is not HTML5 compatible.',\n            associateNone: 'None',\n            associateScope: 'Associate using \\'scope\\' attribute',\n            associateIds: 'Associate using Ids',\n            copyFormat: 'Copy format',\n            applyFormat: 'Apply format'\n        };\n        var supportedBrowser = !os || os.ios && os.flatVersion >= 500 || !os.ios && typeof document.documentElement.contentEditable != 'undefined';\n        var toolGroups = {\n            basic: [\n                'bold',\n                'italic',\n                'underline'\n            ],\n            alignment: [\n                'justifyLeft',\n                'justifyCenter',\n                'justifyRight'\n            ],\n            lists: [\n                'insertUnorderedList',\n                'insertOrderedList'\n            ],\n            indenting: [\n                'indent',\n                'outdent'\n            ],\n            formatPainter: [\n                'copyFormat',\n                'applyFormat'\n            ],\n            links: [\n                'createLink',\n                'unlink'\n            ],\n            tables: [\n                'tableWizard',\n                'createTable',\n                'addColumnLeft',\n                'addColumnRight',\n                'addRowAbove',\n                'addRowBelow',\n                'deleteRow',\n                'deleteColumn',\n                'mergeCellsHorizontally',\n                'mergeCellsVertically',\n                'splitCellHorizontally',\n                'splitCellVertically',\n                'tableAlignLeft',\n                'tableAlignCenter',\n                'tableAlignRight'\n            ]\n        };\n        var Editor = Widget.extend({\n            init: function (element, options) {\n                var that = this, value, editorNS = kendo.ui.editor, toolbarContainer, toolbarOptions, type, comments;\n                var domElement;\n                var dom = editorNS.Dom;\n                if (!supportedBrowser) {\n                    return;\n                }\n                Widget.fn.init.call(that, element, options);\n                that.options = deepExtend({}, that.options, options);\n                that.options.tools = that.options.tools.slice();\n                element = that.element;\n                domElement = element[0];\n                type = dom.name(domElement);\n                this._registerHandler(element.closest('form'), 'submit', proxy(that.update, that, undefined));\n                toolbarOptions = extend({}, that.options);\n                toolbarOptions.editor = that;\n                if (type == 'textarea') {\n                    that._wrapTextarea();\n                    toolbarContainer = that.wrapper.find('.k-editor-toolbar');\n                    if (domElement.id) {\n                        toolbarContainer.attr('aria-controls', domElement.id);\n                    }\n                } else {\n                    that.element.attr('contenteditable', true).addClass('k-widget k-editor k-editor-inline');\n                    toolbarOptions.popup = true;\n                    toolbarContainer = $('<ul class=\"k-toolbar k-editor-toolbar\" role=\"toolbar\" />').insertBefore(element);\n                }\n                that.toolbar = new editorNS.Toolbar(toolbarContainer[0], toolbarOptions);\n                that.toolbar.bindTo(that);\n                if (type == 'textarea') {\n                    setTimeout(function () {\n                        var heightStyle = that.wrapper[0].style.height;\n                        var expectedHeight = parseInt(heightStyle, 10);\n                        var actualHeight = that.wrapper.height();\n                        if (heightStyle.indexOf('px') > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                            that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                        }\n                    });\n                }\n                that._resizable();\n                that._initializeContentElement(that);\n                that.keyboard = new editorNS.Keyboard([\n                    new editorNS.BackspaceHandler(that),\n                    new editorNS.TypingHandler(that),\n                    new editorNS.SystemHandler(that),\n                    new editorNS.SelectAllHandler(that)\n                ]);\n                that.clipboard = new editorNS.Clipboard(this);\n                that.undoRedoStack = new kendo.util.UndoRedoStack();\n                if (options && options.value) {\n                    value = options.value;\n                } else if (that.textarea) {\n                    value = domElement.value;\n                    if (!value.replace(/\\s/g, '').length) {\n                        value = value.replace(/\\s/g, '');\n                    }\n                    if (that.options.encoded && domElement.defaultValue && domElement.defaultValue.trim().length) {\n                        value = domElement.defaultValue;\n                    }\n                    var deserializedRoot = editorNS.Serializer.htmlToDom(value, $('<div></div>')[0], that.options.deserialization);\n                    comments = dom.getAllComments(deserializedRoot);\n                    value = EditorUtils.cacheComments(value, comments);\n                    value = value.replace(/[\\r\\n\\v\\f\\t ]+/gi, ' ');\n                    value = EditorUtils.retrieveComments(value, comments);\n                } else {\n                    value = domElement.innerHTML;\n                }\n                that.value(value || '\\uFEFF');\n                this._registerHandler(document, {\n                    'mousedown': function () {\n                        that._endTyping();\n                    },\n                    'mouseup': function (e) {\n                        that._mouseup(e);\n                    }\n                });\n                that._initializeImmutables();\n                that.toolbar.resize();\n                kendo.notify(that);\n            },\n            setOptions: function (options) {\n                var editor = this;\n                Widget.fn.setOptions.call(editor, options);\n                if (options.tools) {\n                    editor.toolbar.bindTo(editor);\n                }\n                this._initializePlaceholder();\n            },\n            _togglePlaceholder: function (show) {\n                var that = this, body = that.body, $body = $(body), placeholder = that.options.placeholder;\n                if (!that.textarea || !placeholder) {\n                    return;\n                }\n                $body.attr('aria-label', function () {\n                    return show ? placeholder : '';\n                });\n                $body.toggleClass(PLACEHOLDER_CLASS, show);\n            },\n            _endTyping: function () {\n                var keyboard = this.keyboard;\n                try {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                        this.saveSelection();\n                    }\n                } catch (e) {\n                }\n            },\n            _selectionChange: function () {\n                this._selectionStarted = false;\n                this.saveSelection();\n                this.trigger('select', {});\n            },\n            _resizable: function () {\n                var resizable = this.options.resizable;\n                var isResizable = $.isPlainObject(resizable) ? resizable.content === undefined || resizable.content === true : resizable;\n                if (isResizable && this.textarea) {\n                    var draggableElement = $('<div class=\\'k-resize-handle\\'><span class=\\'k-icon k-i-arrow-45-down-right\\'></span></div>').insertAfter(this.textarea);\n                    this.wrapper.addClass('k-resizable');\n                    this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                        draggableElement: draggableElement,\n                        start: function (e) {\n                            var editor = this.editor = $(e.currentTarget).closest('.k-editor');\n                            this.initialSize = editor.height();\n                            editor.find('td:last').append('<div class=\\'k-overlay\\' />');\n                        },\n                        resize: function (e) {\n                            var delta = e.y.initialDelta;\n                            var newSize = this.initialSize + delta;\n                            var min = this.options.min || 0;\n                            var max = this.options.max || Infinity;\n                            newSize = Math.min(max, Math.max(min, newSize));\n                            this.editor.height(newSize);\n                        },\n                        resizeend: function () {\n                            this.editor.find('.k-overlay').remove();\n                            this.editor = null;\n                        }\n                    }));\n                    if (kendo.support.mobileOS.ios) {\n                        var resizableWidget = this.wrapper.getKendoResizable();\n                        resizableWidget.draggable.options.ignore = SELECT_OVERLAY_SELECTOR;\n                    }\n                }\n            },\n            _initializeTableResizing: function () {\n                var editor = this;\n                kendo.ui.editor.TableResizing.create(editor);\n                editor._showTableResizeHandlesProxy = proxy(editor._showTableResizeHandles, editor);\n                editor.bind(SELECT, editor._showTableResizeHandlesProxy);\n            },\n            _destroyTableResizing: function () {\n                var editor = this;\n                var tableResizing = editor.tableResizing;\n                if (tableResizing) {\n                    tableResizing.destroy();\n                    editor.tableResizing = null;\n                }\n                if (editor._showTableResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showTableResizeHandlesProxy);\n                }\n            },\n            _showTableResizeHandles: function () {\n                var editor = this;\n                var tableResizing = editor.tableResizing;\n                if (tableResizing) {\n                    tableResizing.showResizeHandles();\n                }\n            },\n            _initializeColumnResizing: function () {\n                kendo.ui.editor.ColumnResizing.create(this);\n            },\n            _destroyColumnResizing: function () {\n                var editor = this;\n                if (editor.columnResizing) {\n                    editor.columnResizing.destroy();\n                    editor.columnResizing = null;\n                }\n            },\n            _initializeRowResizing: function () {\n                kendo.ui.editor.RowResizing.create(this);\n            },\n            _destroyRowResizing: function () {\n                var editor = this;\n                if (editor.rowResizing) {\n                    editor.rowResizing.destroy();\n                    editor.rowResizing = null;\n                }\n            },\n            _wrapTextarea: function () {\n                var that = this, textarea = that.element, w = textarea[0].style.width, h = textarea[0].style.height, template = EditorUtils.editorWrapperTemplate, editorWrap = $(template).insertBefore(textarea).width(w).height(h), editArea = editorWrap.find('.k-editable-area');\n                textarea.attr('autocomplete', 'off').appendTo(editArea).addClass('k-content k-raw-content').css('display', 'none');\n                that.textarea = textarea;\n                that.wrapper = editorWrap;\n            },\n            _createContentElement: function (stylesheets) {\n                var editor = this;\n                var iframe, wnd, doc;\n                var textarea = editor.textarea;\n                var specifiedDomain = editor.options.domain;\n                var domain = specifiedDomain || document.domain;\n                var domainScript = '';\n                var src = 'javascript:\"\"';\n                var lang = '';\n                textarea.hide();\n                iframe = $('<iframe />', {\n                    title: editor.options.messages.editAreaTitle,\n                    frameBorder: '0'\n                })[0];\n                $(iframe).css('display', '').addClass('k-content').attr('tabindex', textarea[0].tabIndex).insertBefore(textarea);\n                if (specifiedDomain || domain != location.hostname) {\n                    domainScript = '<script>document.domain=\"' + domain + '\"</script>';\n                    src = 'javascript:document.write(\\'' + domainScript + '\\')';\n                    iframe.src = src;\n                }\n                if (!iframe.src) {\n                    iframe.src = '';\n                }\n                wnd = iframe.contentWindow || iframe;\n                doc = wnd.document || iframe.contentDocument;\n                $(iframe).one('load', function () {\n                    editor.toolbar.decorateFrom(doc.body);\n                });\n                lang = document.getElementsByTagName('html')[0].getAttribute('lang') || DEFAULT_LANGUAGE;\n                doc.open();\n                doc.write('<!DOCTYPE html><html lang=\\'' + lang + '\\'><head>' + '<meta charset=\\'utf-8\\' />' + '<title>Kendo UI Editor content</title>' + '<style>' + 'html{padding:0;margin:0;height:100%;min-height:100%;cursor:text;}' + 'body{padding:0;margin:0;}' + 'body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;' + 'word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;' + (kendo.support.isRtl(textarea) ? 'direction:rtl;' : '') + (os.ios ? 'word-break:keep-all;' : '') + '}' + 'h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}' + 'p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}' + 'ul,ol{padding-left:2.5em}' + 'span{-ms-high-contrast-adjust:none;}' + 'a{color:#00a}' + 'code{font-size:1.23em}' + 'telerik\\\\3Ascript{display: none;}' + '.k-table{width:100%;border-spacing:0;margin: 0 0 1em;}' + '.k-table td{min-width:1px;padding:.2em .3em;}' + '.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}' + '.k-table th{outline:0;border: 1px dotted #999;}' + '.k-table p{margin:0;padding:0;}' + '.k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}' + '.k-column-resize-handle {width: 100%; height: 100%;}' + '.k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}' + '.k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}' + '.k-row-resize-handle {display: table; width: 100%; height: 100%;}' + '.k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}' + '.k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}' + '.k-table-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}' + '.k-table-resize-handle {width: 100%; height: 100%;}' + '.k-table-resize-handle.k-resize-east{cursor:e-resize;}' + '.k-table-resize-handle.k-resize-north{cursor:n-resize;}' + '.k-table-resize-handle.k-resize-northeast{cursor:ne-resize;}' + '.k-table-resize-handle.k-resize-northwest{cursor:nw-resize;}' + '.k-table-resize-handle.k-resize-south{cursor:s-resize;}' + '.k-table-resize-handle.k-resize-southeast{cursor:se-resize;}' + '.k-table-resize-handle.k-resize-southwest{cursor:sw-resize;}' + '.k-table-resize-handle.k-resize-west{cursor:w-resize;}' + '.k-table.k-table-resizing{opacity:0.6;}' + '.k-placeholder{color:grey}' + 'k\\\\:script{display:none;}' + '</style>' + domainScript + $.map(stylesheets, function (href) {\n                    return '<link rel=\\'stylesheet\\' href=\\'' + href + '\\'>';\n                }).join('') + '</head><body autocorrect=\\'off\\' contenteditable=\\'true\\'></body></html>');\n                doc.close();\n                return wnd;\n            },\n            _blur: function () {\n                var textarea = this.textarea;\n                var old = textarea ? textarea.val() : this._oldValue;\n                var value = this.options.encoded ? this.encodedValue() : this.value();\n                this.update();\n                if (textarea) {\n                    textarea.trigger('blur');\n                }\n                if (value != old) {\n                    this.trigger('change');\n                    if (textarea) {\n                        textarea.trigger('change');\n                    }\n                }\n            },\n            _spellCorrect: function (editor) {\n                var beforeCorrection;\n                var falseTrigger = false;\n                this._registerHandler(editor.body, {\n                    'contextmenu': function () {\n                        editor.one('select', function () {\n                            beforeCorrection = null;\n                        });\n                        editor._spellCorrectTimeout = setTimeout(function () {\n                            beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                            falseTrigger = false;\n                        }, 10);\n                    },\n                    'input': function () {\n                        if (!beforeCorrection) {\n                            return;\n                        }\n                        if (kendo.support.browser.mozilla && !falseTrigger) {\n                            falseTrigger = true;\n                            return;\n                        }\n                        kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                    }\n                });\n            },\n            _registerHandler: function (element, type, handler) {\n                var editor = this;\n                var NS = '.kendoEditor';\n                var eventNames;\n                var i;\n                element = $(element);\n                if (!this._handlers) {\n                    this._handlers = [];\n                }\n                if (element.length) {\n                    if ($.isPlainObject(type)) {\n                        for (var t in type) {\n                            if (type.hasOwnProperty(t)) {\n                                this._registerHandler(element, t, type[t]);\n                            }\n                        }\n                    } else {\n                        eventNames = kendo.applyEventMap(type).split(' ');\n                        for (i = 0; i < eventNames.length; i++) {\n                            editor._handlers.push({\n                                element: element,\n                                type: eventNames[i] + NS,\n                                handler: handler\n                            });\n                            element.on(eventNames[i] + NS, handler);\n                        }\n                    }\n                }\n            },\n            _deregisterHandlers: function () {\n                var handlers = this._handlers;\n                for (var i = 0; i < handlers.length; i++) {\n                    var h = handlers[i];\n                    h.element.off(h.type, h.handler);\n                }\n                this._handlers = [];\n            },\n            _initializeContentElement: function () {\n                var editor = this;\n                var doc;\n                var blurTrigger;\n                var mousedownTrigger;\n                if (editor.textarea) {\n                    editor.window = editor._createContentElement(editor.options.stylesheets);\n                    doc = editor.document = editor.window.contentDocument || editor.window.document;\n                    if (!doc.body) {\n                        var body = doc.createElement('body');\n                        body.setAttribute('contenteditable', 'true');\n                        body.setAttribute('autocorrect', 'off');\n                        doc.getElementsByTagName('html')[0].appendChild(body);\n                        var interval = setInterval(function () {\n                            if ($(editor.document).find('body').length > 1) {\n                                $(editor.document).find('body:last').remove();\n                                window.clearInterval(interval);\n                            }\n                        }, 10);\n                    }\n                    editor.body = doc.body;\n                    blurTrigger = editor.window;\n                    mousedownTrigger = doc;\n                    this._registerHandler(doc, 'mouseup', proxy(this._mouseup, this));\n                } else {\n                    editor.window = window;\n                    doc = editor.document = document;\n                    editor.body = editor.element[0];\n                    blurTrigger = editor.body;\n                    mousedownTrigger = editor.body;\n                    editor.toolbar.decorateFrom(editor.body);\n                }\n                this._registerHandler(blurTrigger, 'blur', proxy(this._blur, this));\n                editor._registerHandler(mousedownTrigger, 'down', proxy(editor._mousedown, editor));\n                try {\n                    doc.execCommand('enableInlineTableEditing', null, false);\n                } catch (e) {\n                }\n                if (kendo.support.touch) {\n                    this._registerHandler(doc, {\n                        'keydown': function () {\n                            if (kendo._activeElement() != doc.body) {\n                                editor.window.focus();\n                            }\n                        }\n                    });\n                }\n                this._initializePlaceholder();\n                this._spellCorrect(editor);\n                this._registerHandler(editor.document, {\n                    'mouseover dragenter': function (e) {\n                        var height = $(editor.body).height();\n                        var htmlHeight = $(editor.body.parentElement).height();\n                        if (htmlHeight > height && e.target.nodeName.toLowerCase() === 'html') {\n                            editor._cachedHeight = '' + editor.body.style.height;\n                            editor.body.style.height = '100%';\n                        }\n                    },\n                    'mouseout dragleave drop contextmenu': function (e) {\n                        var restoreHeight = function () {\n                            if (editor._cachedHeight !== undefined && e.target === editor.body) {\n                                editor.body.style.height = editor._cachedHeight;\n                                delete editor._cachedHeight;\n                            }\n                        };\n                        if (e.type === 'contextmenu') {\n                            setTimeout(function () {\n                                restoreHeight();\n                            }, 10);\n                        } else {\n                            restoreHeight();\n                        }\n                    }\n                });\n                this._registerHandler(editor.body, {\n                    'keydown': function (e) {\n                        var range;\n                        if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute('contenteditable') !== 'true') {\n                            return false;\n                        }\n                        if (e.keyCode === keys.F10) {\n                            setTimeout(proxy(editor.toolbar.focus, editor.toolbar), 100);\n                            editor.toolbar.preventPopupHide = true;\n                            e.preventDefault();\n                            return;\n                        } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                            range = editor.getRange();\n                            var left = e.keyCode == keys.LEFT;\n                            var container = range[left ? 'startContainer' : 'endContainer'];\n                            var offset = range[left ? 'startOffset' : 'endOffset'];\n                            var direction = left ? -1 : 1;\n                            var next = offset + direction;\n                            var nextChar = left ? next : offset;\n                            if (container.nodeType == 3 && container.nodeValue[nextChar] == '\\uFEFF') {\n                                range.setStart(container, next);\n                                range.collapse(true);\n                                editor.selectRange(range);\n                            }\n                        }\n                        var tools = editor.toolbar.tools;\n                        var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                        var toolOptions = toolName ? tools[toolName].options : {};\n                        if (toolName && !toolOptions.keyPressCommand) {\n                            e.preventDefault();\n                            if (!/^(undo|redo)$/.test(toolName)) {\n                                editor.keyboard.endTyping(true);\n                            }\n                            editor.trigger('keydown', e);\n                            editor.exec(toolName);\n                            editor._runPostContentKeyCommands(e);\n                            return false;\n                        }\n                        editor.keyboard.clearTimeout();\n                        editor.keyboard.keydown(e);\n                    },\n                    'keypress': function (e) {\n                        setTimeout(function () {\n                            editor._runPostContentKeyCommands(e);\n                            editor._showTableResizeHandles();\n                        }, 0);\n                    },\n                    'keyup': function (e) {\n                        var selectionCodes = [\n                            keys.BACKSPACE,\n                            keys.TAB,\n                            keys.PAGEUP,\n                            keys.PAGEDOWN,\n                            keys.END,\n                            keys.HOME,\n                            keys.LEFT,\n                            keys.UP,\n                            keys.RIGHT,\n                            keys.DOWN,\n                            keys.INSERT,\n                            keys.DELETE\n                        ];\n                        if ($.inArray(e.keyCode, selectionCodes) > -1 || e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey) {\n                            window.clearTimeout(this._refreshInterval);\n                            this._refreshInterval = window.setTimeout(function () {\n                                editor._selectionChange();\n                            }, REFRESH_INTERVAL);\n                        }\n                        editor.keyboard.keyup(e);\n                    },\n                    'click': function (e) {\n                        var dom = kendo.ui.editor.Dom, range;\n                        if (dom.name(e.target) === 'img') {\n                            range = editor.createRange();\n                            range.selectNode(e.target);\n                            editor.selectRange(range);\n                        }\n                    },\n                    'cut copy paste drop dragover': function (e) {\n                        editor.clipboard['on' + e.type](e);\n                    },\n                    'focusin': function () {\n                        if (editor.body.hasAttribute('contenteditable')) {\n                            $(this).addClass('k-state-active');\n                            editor.toolbar.show();\n                            editor._togglePlaceholder(false);\n                        }\n                    },\n                    'focusout': function () {\n                        setTimeout(function () {\n                            var active = kendo._activeElement();\n                            var body = editor.body;\n                            var toolbar = editor.toolbar;\n                            if (toolbar.options.popup) {\n                                var toolbarContainerElement = toolbar.window.element.get(0);\n                                if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                    toolbar.preventPopupHide = false;\n                                }\n                            }\n                            if (active != body && !$.contains(body, active) && !toolbar.focused() && !toolbar.preventPopupHide) {\n                                $(body).removeClass('k-state-active');\n                                toolbar.hide();\n                            }\n                            editor._togglePlaceholder(!editor.value().trim());\n                        }, 10);\n                    }\n                });\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeTableResizing();\n            },\n            _initializePlaceholder: function () {\n                var that = this, placeholder = that.options.placeholder, style, $head;\n                if (!that.textarea || !placeholder) {\n                    return;\n                }\n                style = '<style id=\\'' + PLACEHOLDER_TAG_ID + '\\'>.' + PLACEHOLDER_CLASS + ':before { content: \\'' + placeholder + '\\'; }' + '</style>';\n                $head = $(that.document.head);\n                $head.find('#' + PLACEHOLDER_TAG_ID).remove();\n                $head.append(style);\n                that._togglePlaceholder(!that.value().trim());\n            },\n            _initializeImmutables: function () {\n                var that = this, editorNS = kendo.ui.editor;\n                if (that.options.immutables) {\n                    that.immutables = new editorNS.Immutables(that);\n                }\n            },\n            _mousedown: function (e) {\n                var editor = this;\n                editor._selectionStarted = true;\n                if ($(editor.body).parents('.k-window').length) {\n                    e.stopPropagation();\n                }\n                if (browser.gecko) {\n                    return;\n                }\n                var target = $(e.target).closest('a[href]');\n                if ((e.which == 2 || e.which == 1 && e.ctrlKey) && target && target.is('a[href]')) {\n                    window.open(target.attr('href'), '_new');\n                }\n                if (e.target.tagName && e.target.tagName.toLowerCase() === 'html') {\n                    setTimeout(function () {\n                        editor.body.focus();\n                    }, 0);\n                }\n            },\n            _mouseup: function (e) {\n                var that = this;\n                if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                    return;\n                }\n                if (that._selectionStarted) {\n                    setTimeout(function () {\n                        that._selectionChange();\n                    }, 1);\n                }\n            },\n            _runPostContentKeyCommands: function (e) {\n                var range = this.getRange();\n                var tools = this.keyboard.toolsFromShortcut(this.toolbar.tools, e);\n                for (var i = 0; i < tools.length; i++) {\n                    var tool = tools[i];\n                    var o = tool.options;\n                    if (!o.keyPressCommand) {\n                        continue;\n                    }\n                    var cmd = new o.command({ range: range });\n                    if (cmd.changesContent()) {\n                        this.keyboard.endTyping(true);\n                        this.exec(tool.name);\n                    }\n                }\n            },\n            refresh: function () {\n                var that = this;\n                if (that.textarea) {\n                    that._destroyResizings();\n                    var value = that.value();\n                    that.textarea.val(value);\n                    that.wrapper.find('iframe').remove();\n                    that._initializeContentElement(that);\n                    that.value(value);\n                }\n            },\n            events: [\n                'select',\n                'change',\n                'execute',\n                'error',\n                'paste',\n                'keydown',\n                'keyup'\n            ],\n            options: {\n                name: 'Editor',\n                messages: messages,\n                placeholder: '',\n                formats: {},\n                encoded: true,\n                domain: null,\n                resizable: false,\n                deserialization: { custom: null },\n                serialization: {\n                    entities: true,\n                    semantic: true,\n                    scripts: false\n                },\n                pasteCleanup: {\n                    all: false,\n                    css: false,\n                    custom: null,\n                    keepNewLines: false,\n                    msAllFormatting: false,\n                    msConvertLists: true,\n                    msTags: true,\n                    none: false,\n                    span: false\n                },\n                stylesheets: [],\n                dialogOptions: {\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    animation: false\n                },\n                imageBrowser: null,\n                fileBrowser: null,\n                fontName: [\n                    {\n                        text: 'Arial',\n                        value: 'Arial, Helvetica, sans-serif'\n                    },\n                    {\n                        text: 'Courier New',\n                        value: '\"Courier New\", Courier, monospace'\n                    },\n                    {\n                        text: 'Georgia',\n                        value: 'Georgia, serif'\n                    },\n                    {\n                        text: 'Impact',\n                        value: 'Impact, Charcoal, sans-serif'\n                    },\n                    {\n                        text: 'Lucida Console',\n                        value: '\"Lucida Console\", Monaco, monospace'\n                    },\n                    {\n                        text: 'Tahoma',\n                        value: 'Tahoma, Geneva, sans-serif'\n                    },\n                    {\n                        text: 'Times New Roman',\n                        value: '\"Times New Roman\", Times, serif'\n                    },\n                    {\n                        text: 'Trebuchet MS',\n                        value: '\"Trebuchet MS\", Helvetica, sans-serif'\n                    },\n                    {\n                        text: 'Verdana',\n                        value: 'Verdana, Geneva, sans-serif'\n                    }\n                ],\n                fontSize: [\n                    {\n                        text: '1 (8pt)',\n                        value: 'xx-small'\n                    },\n                    {\n                        text: '2 (10pt)',\n                        value: 'x-small'\n                    },\n                    {\n                        text: '3 (12pt)',\n                        value: 'small'\n                    },\n                    {\n                        text: '4 (14pt)',\n                        value: 'medium'\n                    },\n                    {\n                        text: '5 (18pt)',\n                        value: 'large'\n                    },\n                    {\n                        text: '6 (24pt)',\n                        value: 'x-large'\n                    },\n                    {\n                        text: '7 (36pt)',\n                        value: 'xx-large'\n                    }\n                ],\n                formatBlock: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                tools: [].concat.call(['formatting'], toolGroups.basic, toolGroups.alignment, toolGroups.formatPainter, toolGroups.lists, toolGroups.indenting, toolGroups.links, ['insertImage'], toolGroups.tables)\n            },\n            destroy: function () {\n                var editor = this;\n                Widget.fn.destroy.call(this);\n                this._endTyping(true);\n                this._deregisterHandlers();\n                clearTimeout(this._spellCorrectTimeout);\n                this._focusOutside();\n                this.toolbar.destroy();\n                editor._destroyUploadWidget();\n                editor._destroyResizings();\n                kendo.destroy(this.wrapper);\n            },\n            _destroyResizings: function () {\n                var editor = this;\n                editor._destroyTableResizing();\n                kendo.ui.editor.TableResizing.dispose(editor);\n                editor._destroyRowResizing();\n                kendo.ui.editor.RowResizing.dispose(editor);\n                editor._destroyColumnResizing();\n                kendo.ui.editor.ColumnResizing.dispose(editor);\n            },\n            _focusOutside: function () {\n                if (kendo.support.browser.msie && this.textarea) {\n                    var tempInput = $('<input style=\\'position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0\\' />').appendTo(document.body).focus();\n                    tempInput.blur().remove();\n                }\n            },\n            _destroyUploadWidget: function () {\n                var editor = this;\n                if (editor._uploadWidget) {\n                    editor._uploadWidget.destroy();\n                    editor._uploadWidget = null;\n                }\n            },\n            state: function (toolName) {\n                var tool = Editor.defaultTools[toolName];\n                var finder = tool && (tool.options.finder || tool.finder);\n                var RangeUtils = kendo.ui.editor.RangeUtils;\n                var range, textNodes;\n                if (finder) {\n                    range = this.getRange();\n                    textNodes = RangeUtils.textNodes(range);\n                    if (!textNodes.length && range.collapsed) {\n                        textNodes = [range.startContainer];\n                    }\n                    return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n                }\n                return false;\n            },\n            value: function (html) {\n                var body = this.body, editorNS = kendo.ui.editor, options = this.options, currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n                if (html === undefined) {\n                    return currentHtml;\n                }\n                if (html == currentHtml) {\n                    return;\n                }\n                editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n                this.selectionRestorePoint = null;\n                this.update();\n                this.toolbar.refreshTools();\n            },\n            saveSelection: function (range) {\n                range = range || this.getRange();\n                var container = range.commonAncestorContainer, body = this.body;\n                if (container == body || $.contains(body, container)) {\n                    this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n                }\n            },\n            _focusBody: function () {\n                var body = this.body;\n                var iframe = this.wrapper && this.wrapper.find('iframe')[0];\n                var documentElement = this.document.documentElement;\n                var activeElement = kendo._activeElement();\n                var scrollTop;\n                if (!iframe && body.scrollHeight > body.clientHeight) {\n                    scrollTop = body.scrollTop;\n                    body.focus();\n                    body.scrollTop = scrollTop;\n                } else if (activeElement != body && activeElement != iframe) {\n                    scrollTop = documentElement.scrollTop;\n                    body.focus();\n                    documentElement.scrollTop = scrollTop;\n                }\n            },\n            restoreSelection: function () {\n                this._focusBody();\n                if (this.selectionRestorePoint) {\n                    this.selectRange(this.selectionRestorePoint.toRange());\n                }\n            },\n            focus: function () {\n                this.restoreSelection();\n            },\n            update: function (value) {\n                value = value || this.options.encoded ? this.encodedValue() : this.value();\n                if (this.textarea) {\n                    this.textarea.val(value);\n                    this._togglePlaceholder(!value.trim());\n                } else {\n                    this._oldValue = value;\n                }\n            },\n            encodedValue: function () {\n                return kendo.ui.editor.Dom.encode(this.value());\n            },\n            createRange: function (document) {\n                return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n            },\n            getSelection: function () {\n                return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n            },\n            selectRange: function (range) {\n                this._focusBody();\n                var selection = this.getSelection();\n                selection.removeAllRanges();\n                selection.addRange(range);\n                this.saveSelection(range);\n            },\n            getRange: function () {\n                var selection = this.getSelection(), range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(), doc = this.document;\n                if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                    range.setStart(this.body, 0);\n                    range.collapse(true);\n                }\n                return range;\n            },\n            _containsRange: function (range) {\n                var dom = kendo.ui.editor.Dom;\n                var body = this.body;\n                return range && dom.isAncestorOrSelf(body, range.startContainer) && dom.isAncestorOrSelf(body, range.endContainer);\n            },\n            _deleteSavedRange: function () {\n                if ('_range' in this) {\n                    delete this._range;\n                }\n            },\n            selectedHtml: function () {\n                return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n            },\n            paste: function (html, options) {\n                this.focus();\n                var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                    range: this.getRange(),\n                    html: html\n                }, options));\n                command.editor = this;\n                command.exec();\n            },\n            exec: function (name, params) {\n                var that = this;\n                var command = null;\n                var range, tool, prevented;\n                if (!name) {\n                    throw new Error('kendoEditor.exec(): `name` parameter cannot be empty');\n                }\n                if (that.body.getAttribute('contenteditable') !== 'true' && name !== 'print' && name !== 'pdf' && name !== 'exportAs') {\n                    return false;\n                }\n                name = name.toLowerCase();\n                if (!that.keyboard.isTypingInProgress()) {\n                    that._focusBody();\n                    that.selectRange(that._range || that.getRange());\n                }\n                tool = that.toolbar.toolById(name);\n                if (!tool) {\n                    for (var id in Editor.defaultTools) {\n                        if (id.toLowerCase() == name) {\n                            tool = Editor.defaultTools[id];\n                            break;\n                        }\n                    }\n                }\n                if (tool) {\n                    range = that.getRange();\n                    if (tool.command) {\n                        command = tool.command(extend({\n                            range: range,\n                            body: that.body,\n                            immutables: !!that.immutables\n                        }, params));\n                    }\n                    prevented = that.trigger('execute', {\n                        name: name,\n                        command: command\n                    });\n                    if (prevented) {\n                        return;\n                    }\n                    if (/^(undo|redo)$/i.test(name)) {\n                        that.undoRedoStack[name]();\n                    } else if (command) {\n                        that.execCommand(command);\n                        if (command.async) {\n                            command.change = proxy(that._selectionChange, that);\n                            return;\n                        }\n                    }\n                    that._selectionChange();\n                }\n            },\n            execCommand: function (command) {\n                if (!command.managesUndoRedo) {\n                    this.undoRedoStack.push(command);\n                }\n                command.editor = this;\n                command.exec();\n            }\n        });\n        Editor.defaultTools = {\n            undo: {\n                options: {\n                    key: 'Z',\n                    ctrl: true\n                }\n            },\n            redo: {\n                options: {\n                    key: 'Y',\n                    ctrl: true\n                }\n            }\n        };\n        kendo.ui.plugin(Editor);\n        var Tool = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            initialize: function (ui, options) {\n                ui.attr({\n                    unselectable: 'on',\n                    title: options.title,\n                    'aria-label': options.title\n                });\n            },\n            command: function (commandArguments) {\n                return new this.options.command(commandArguments);\n            },\n            update: $.noop\n        });\n        Tool.exec = function (editor, name, value) {\n            editor.exec(name, { value: value });\n        };\n        EditorUtils.registerTool('separator', new Tool({ template: new ToolTemplate({ template: EditorUtils.separatorTemplate }) }));\n        var emptyElementContent = '\\uFEFF';\n        var emptyTableCellContent = emptyElementContent;\n        if (browser.msie || browser.edge) {\n            emptyTableCellContent = emptyElementContent = '&nbsp;';\n        }\n        extend(kendo.ui, {\n            editor: {\n                ToolTemplate: ToolTemplate,\n                EditorUtils: EditorUtils,\n                Tool: Tool,\n                emptyElementContent: emptyElementContent,\n                emptyTableCellContent: emptyTableCellContent\n            }\n        });\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Editor.prototype);\n            Editor.prototype._drawPDF = function () {\n                return kendo.drawing.drawDOM(this.body, this.options.pdf);\n            };\n            Editor.prototype.saveAsPDF = function () {\n                var progress = new $.Deferred();\n                var promise = progress.promise();\n                var args = { promise: promise };\n                if (this.trigger('pdfExport', args)) {\n                    return;\n                }\n                var options = this.options.pdf;\n                this._drawPDF(progress).then(function (root) {\n                    return kendo.drawing.exportPDF(root, options);\n                }).done(function (dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: options.fileName,\n                        proxyURL: options.proxyURL,\n                        proxyTarget: options.proxyTarget,\n                        forceProxy: options.forceProxy\n                    });\n                    progress.resolve();\n                }).fail(function (err) {\n                    progress.reject(err);\n                });\n                return promise;\n            };\n        }\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/dom', ['editor/main'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, map = $.map, extend = $.extend, browser = kendo.support.browser, STYLE = 'style', FLOAT = 'float', CSSFLOAT = 'cssFloat', STYLEFLOAT = 'styleFloat', CLASS = 'class', KMARKER = 'k-marker';\n        function makeMap(items) {\n            var obj = {}, i, len;\n            for (i = 0, len = items.length; i < len; i++) {\n                obj[items[i]] = true;\n            }\n            return obj;\n        }\n        var empty = makeMap('area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed'.split(',')), nonListBlockElements = 'p,div,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption'.split(','), blockElements = nonListBlockElements.concat([\n                'ul',\n                'ol',\n                'li'\n            ]), block = makeMap(blockElements), selfClosing = makeMap('area,base,br,col,command,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr'.split(',')), inlineElements = 'span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby'.split(','), inline = makeMap(inlineElements), fillAttrs = makeMap('checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected'.split(','));\n        var normalize = function (node) {\n            if (node.nodeType == 1) {\n                node.normalize();\n            }\n        };\n        if (browser.msie && browser.version >= 8) {\n            normalize = function (parent) {\n                if (parent.nodeType == 1 && parent.firstChild) {\n                    var prev = parent.firstChild, node = prev;\n                    normalize(node);\n                    while (true) {\n                        node = node.nextSibling;\n                        if (!node) {\n                            break;\n                        }\n                        normalize(node);\n                        if (node.nodeType == 3 && prev.nodeType == 3) {\n                            node.nodeValue = prev.nodeValue + node.nodeValue;\n                            Dom.remove(prev);\n                        }\n                        prev = node;\n                    }\n                }\n            };\n        }\n        var whitespace = /^\\s+$/, emptyspace = /^[\\n\\r\\t]+$/, rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i, bom = /\\ufeff/g, whitespaceOrBom = /^(\\s+|\\ufeff)$/, persistedScrollTop, cssAttributes = ('color,padding-left,padding-right,padding-top,padding-bottom,' + 'background-color,background-attachment,background-image,background-position,background-repeat,' + 'border-top-style,border-top-width,border-top-color,' + 'border-bottom-style,border-bottom-width,border-bottom-color,' + 'border-left-style,border-left-width,border-left-color,' + 'border-right-style,border-right-width,border-right-color,' + 'font-family,font-size,font-style,font-variant,font-weight,line-height').split(','), htmlRe = /[<>\\&]/g, entityRe = /[\\u00A0-\\u2666<>\\&]/g, entityTable = {\n                34: 'quot',\n                38: 'amp',\n                39: 'apos',\n                60: 'lt',\n                62: 'gt',\n                160: 'nbsp',\n                161: 'iexcl',\n                162: 'cent',\n                163: 'pound',\n                164: 'curren',\n                165: 'yen',\n                166: 'brvbar',\n                167: 'sect',\n                168: 'uml',\n                169: 'copy',\n                170: 'ordf',\n                171: 'laquo',\n                172: 'not',\n                173: 'shy',\n                174: 'reg',\n                175: 'macr',\n                176: 'deg',\n                177: 'plusmn',\n                178: 'sup2',\n                179: 'sup3',\n                180: 'acute',\n                181: 'micro',\n                182: 'para',\n                183: 'middot',\n                184: 'cedil',\n                185: 'sup1',\n                186: 'ordm',\n                187: 'raquo',\n                188: 'frac14',\n                189: 'frac12',\n                190: 'frac34',\n                191: 'iquest',\n                192: 'Agrave',\n                193: 'Aacute',\n                194: 'Acirc',\n                195: 'Atilde',\n                196: 'Auml',\n                197: 'Aring',\n                198: 'AElig',\n                199: 'Ccedil',\n                200: 'Egrave',\n                201: 'Eacute',\n                202: 'Ecirc',\n                203: 'Euml',\n                204: 'Igrave',\n                205: 'Iacute',\n                206: 'Icirc',\n                207: 'Iuml',\n                208: 'ETH',\n                209: 'Ntilde',\n                210: 'Ograve',\n                211: 'Oacute',\n                212: 'Ocirc',\n                213: 'Otilde',\n                214: 'Ouml',\n                215: 'times',\n                216: 'Oslash',\n                217: 'Ugrave',\n                218: 'Uacute',\n                219: 'Ucirc',\n                220: 'Uuml',\n                221: 'Yacute',\n                222: 'THORN',\n                223: 'szlig',\n                224: 'agrave',\n                225: 'aacute',\n                226: 'acirc',\n                227: 'atilde',\n                228: 'auml',\n                229: 'aring',\n                230: 'aelig',\n                231: 'ccedil',\n                232: 'egrave',\n                233: 'eacute',\n                234: 'ecirc',\n                235: 'euml',\n                236: 'igrave',\n                237: 'iacute',\n                238: 'icirc',\n                239: 'iuml',\n                240: 'eth',\n                241: 'ntilde',\n                242: 'ograve',\n                243: 'oacute',\n                244: 'ocirc',\n                245: 'otilde',\n                246: 'ouml',\n                247: 'divide',\n                248: 'oslash',\n                249: 'ugrave',\n                250: 'uacute',\n                251: 'ucirc',\n                252: 'uuml',\n                253: 'yacute',\n                254: 'thorn',\n                255: 'yuml',\n                402: 'fnof',\n                913: 'Alpha',\n                914: 'Beta',\n                915: 'Gamma',\n                916: 'Delta',\n                917: 'Epsilon',\n                918: 'Zeta',\n                919: 'Eta',\n                920: 'Theta',\n                921: 'Iota',\n                922: 'Kappa',\n                923: 'Lambda',\n                924: 'Mu',\n                925: 'Nu',\n                926: 'Xi',\n                927: 'Omicron',\n                928: 'Pi',\n                929: 'Rho',\n                931: 'Sigma',\n                932: 'Tau',\n                933: 'Upsilon',\n                934: 'Phi',\n                935: 'Chi',\n                936: 'Psi',\n                937: 'Omega',\n                945: 'alpha',\n                946: 'beta',\n                947: 'gamma',\n                948: 'delta',\n                949: 'epsilon',\n                950: 'zeta',\n                951: 'eta',\n                952: 'theta',\n                953: 'iota',\n                954: 'kappa',\n                955: 'lambda',\n                956: 'mu',\n                957: 'nu',\n                958: 'xi',\n                959: 'omicron',\n                960: 'pi',\n                961: 'rho',\n                962: 'sigmaf',\n                963: 'sigma',\n                964: 'tau',\n                965: 'upsilon',\n                966: 'phi',\n                967: 'chi',\n                968: 'psi',\n                969: 'omega',\n                977: 'thetasym',\n                978: 'upsih',\n                982: 'piv',\n                8226: 'bull',\n                8230: 'hellip',\n                8242: 'prime',\n                8243: 'Prime',\n                8254: 'oline',\n                8260: 'frasl',\n                8472: 'weierp',\n                8465: 'image',\n                8476: 'real',\n                8482: 'trade',\n                8501: 'alefsym',\n                8592: 'larr',\n                8593: 'uarr',\n                8594: 'rarr',\n                8595: 'darr',\n                8596: 'harr',\n                8629: 'crarr',\n                8656: 'lArr',\n                8657: 'uArr',\n                8658: 'rArr',\n                8659: 'dArr',\n                8660: 'hArr',\n                8704: 'forall',\n                8706: 'part',\n                8707: 'exist',\n                8709: 'empty',\n                8711: 'nabla',\n                8712: 'isin',\n                8713: 'notin',\n                8715: 'ni',\n                8719: 'prod',\n                8721: 'sum',\n                8722: 'minus',\n                8727: 'lowast',\n                8730: 'radic',\n                8733: 'prop',\n                8734: 'infin',\n                8736: 'ang',\n                8743: 'and',\n                8744: 'or',\n                8745: 'cap',\n                8746: 'cup',\n                8747: 'int',\n                8756: 'there4',\n                8764: 'sim',\n                8773: 'cong',\n                8776: 'asymp',\n                8800: 'ne',\n                8801: 'equiv',\n                8804: 'le',\n                8805: 'ge',\n                8834: 'sub',\n                8835: 'sup',\n                8836: 'nsub',\n                8838: 'sube',\n                8839: 'supe',\n                8853: 'oplus',\n                8855: 'otimes',\n                8869: 'perp',\n                8901: 'sdot',\n                8968: 'lceil',\n                8969: 'rceil',\n                8970: 'lfloor',\n                8971: 'rfloor',\n                9001: 'lang',\n                9002: 'rang',\n                9674: 'loz',\n                9824: 'spades',\n                9827: 'clubs',\n                9829: 'hearts',\n                9830: 'diams',\n                338: 'OElig',\n                339: 'oelig',\n                352: 'Scaron',\n                353: 'scaron',\n                376: 'Yuml',\n                710: 'circ',\n                732: 'tilde',\n                8194: 'ensp',\n                8195: 'emsp',\n                8201: 'thinsp',\n                8204: 'zwnj',\n                8205: 'zwj',\n                8206: 'lrm',\n                8207: 'rlm',\n                8211: 'ndash',\n                8212: 'mdash',\n                8216: 'lsquo',\n                8217: 'rsquo',\n                8218: 'sbquo',\n                8220: 'ldquo',\n                8221: 'rdquo',\n                8222: 'bdquo',\n                8224: 'dagger',\n                8225: 'Dagger',\n                8240: 'permil',\n                8249: 'lsaquo',\n                8250: 'rsaquo',\n                8364: 'euro'\n            };\n        var Dom = {\n            block: block,\n            inline: inline,\n            findNodeIndex: function (node, skipText) {\n                var i = 0;\n                if (!node) {\n                    return -1;\n                }\n                while (true) {\n                    node = node.previousSibling;\n                    if (!node) {\n                        break;\n                    }\n                    if (!(skipText && node.nodeType == 3)) {\n                        i++;\n                    }\n                }\n                return i;\n            },\n            isDataNode: function (node) {\n                return node && node.nodeValue !== null && node.data !== null;\n            },\n            isAncestorOf: function (parent, node) {\n                try {\n                    return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n                } catch (e) {\n                    return false;\n                }\n            },\n            isAncestorOrSelf: function (root, node) {\n                return Dom.isAncestorOf(root, node) || root == node;\n            },\n            findClosestAncestor: function (root, node) {\n                if (Dom.isAncestorOf(root, node)) {\n                    while (node && node.parentNode != root) {\n                        node = node.parentNode;\n                    }\n                }\n                return node;\n            },\n            getAllComments: function (rootElem) {\n                var comments = [];\n                var iterator = document.createNodeIterator(rootElem, NodeFilter.SHOW_COMMENT, function () {\n                    return NodeFilter.FILTER_ACCEPT;\n                }, false);\n                var curNode = iterator.nextNode();\n                while (curNode) {\n                    comments.push(curNode.nodeValue);\n                    curNode = iterator.nextNode();\n                }\n                return comments;\n            },\n            getNodeLength: function (node) {\n                return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n            },\n            splitDataNode: function (node, offset) {\n                var newNode = node.cloneNode(false);\n                var denormalizedText = '';\n                var iterator = node.nextSibling;\n                var temp;\n                while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n                    denormalizedText += iterator.nodeValue;\n                    temp = iterator;\n                    iterator = iterator.nextSibling;\n                    Dom.remove(temp);\n                }\n                node.deleteData(offset, node.length);\n                newNode.deleteData(0, offset);\n                newNode.nodeValue += denormalizedText;\n                Dom.insertAfter(newNode, node);\n            },\n            attrEquals: function (node, attributes) {\n                for (var key in attributes) {\n                    var value = node[key];\n                    if (key == FLOAT) {\n                        value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n                    }\n                    if (typeof value == 'object') {\n                        if (!Dom.attrEquals(value, attributes[key])) {\n                            return false;\n                        }\n                    } else if (value != attributes[key]) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            blockParentOrBody: function (node) {\n                return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n            },\n            blockParents: function (nodes) {\n                var blocks = [], i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n                    if (block && $.inArray(block, blocks) < 0) {\n                        blocks.push(block);\n                    }\n                }\n                return blocks;\n            },\n            windowFromDocument: function (document) {\n                return document.defaultView || document.parentWindow;\n            },\n            normalize: normalize,\n            blockElements: blockElements,\n            nonListBlockElements: nonListBlockElements,\n            inlineElements: inlineElements,\n            empty: empty,\n            fillAttrs: fillAttrs,\n            nodeTypes: {\n                ELEMENT_NODE: 1,\n                ATTRIBUTE_NODE: 2,\n                TEXT_NODE: 3,\n                CDATA_SECTION_NODE: 4,\n                ENTITY_REFERENCE_NODE: 5,\n                ENTITY_NODE: 6,\n                PROCESSING_INSTRUCTION_NODE: 7,\n                COMMENT_NODE: 8,\n                DOCUMENT_NODE: 9,\n                DOCUMENT_TYPE_NODE: 10,\n                DOCUMENT_FRAGMENT_NODE: 11,\n                NOTATION_NODE: 12\n            },\n            toHex: function (color) {\n                var matches = rgb.exec(color);\n                if (!matches) {\n                    return color;\n                }\n                return '#' + map(matches.slice(1), function (x) {\n                    x = parseInt(x, 10).toString(16);\n                    return x.length > 1 ? x : '0' + x;\n                }).join('');\n            },\n            encode: function (value, options) {\n                var encodableChars = !options || options.entities ? entityRe : htmlRe;\n                return value.replace(encodableChars, function (c) {\n                    var charCode = c.charCodeAt(0);\n                    var entity = entityTable[charCode];\n                    return entity ? '&' + entity + ';' : c;\n                });\n            },\n            isBom: function (node) {\n                return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n            },\n            stripBom: function (text) {\n                return (text || '').replace(bom, '');\n            },\n            stripBomNode: function (node) {\n                if (Dom.isBom(node)) {\n                    node.parentNode.removeChild(node);\n                }\n            },\n            insignificant: function (node) {\n                var attr = node.attributes;\n                return node.className == 'k-marker' || Dom.is(node, 'br') && (node.className == 'k-br' || attr._moz_dirty || attr._moz_editor_bogus_node) || Dom.is(node, 'span') && node.className == 'k-br';\n            },\n            tableCell: function (node) {\n                return Dom.is(node, 'td') || Dom.is(node, 'th');\n            },\n            significantNodes: function (nodes) {\n                return $.grep(nodes, function (child) {\n                    var name = Dom.name(child);\n                    if (name == 'br') {\n                        return false;\n                    } else if (Dom.insignificant(child)) {\n                        return false;\n                    } else if (Dom.emptyTextNode(child)) {\n                        return false;\n                    } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                        return false;\n                    }\n                    return true;\n                });\n            },\n            emptyTextNode: function (node) {\n                return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n            },\n            emptyNode: function (node) {\n                return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n            },\n            name: function (node) {\n                return node.nodeName.toLowerCase();\n            },\n            significantChildNodes: function (node) {\n                return $.grep(node.childNodes, function (child) {\n                    return child.nodeType != 3 || !Dom.isWhitespace(child);\n                });\n            },\n            lastTextNode: function (node) {\n                var result = null;\n                if (node.nodeType == 3) {\n                    return node;\n                }\n                for (var child = node.lastChild; child; child = child.previousSibling) {\n                    result = Dom.lastTextNode(child);\n                    if (result) {\n                        return result;\n                    }\n                }\n                return result;\n            },\n            is: function (node, nodeName) {\n                return node && Dom.name(node) == nodeName;\n            },\n            isMarker: function (node) {\n                return node.className == KMARKER;\n            },\n            isWhitespace: function (node) {\n                return whitespace.test(node.nodeValue);\n            },\n            allWhitespaceContent: function (node) {\n                var child = node.firstChild;\n                while (child && Dom.isWhitespace(child)) {\n                    child = child.nextSibling;\n                }\n                return !child;\n            },\n            isEmptyspace: function (node) {\n                return emptyspace.test(node.nodeValue);\n            },\n            htmlIndentSpace: function (node) {\n                if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n                    return false;\n                }\n                if (emptyspace.test(node.nodeValue)) {\n                    return true;\n                }\n                var sibling = function (el, direction) {\n                    while (el[direction]) {\n                        el = el[direction];\n                        if (Dom.significantNodes([el]).length > 0) {\n                            return el;\n                        }\n                    }\n                };\n                var parent = node.parentNode;\n                var prev = sibling(node, 'previousSibling');\n                var next = sibling(node, 'nextSibling');\n                if (bom.test(node.nodeValue)) {\n                    return !!(prev || next);\n                }\n                if ($(parent).is('tr,tbody,thead,tfoot,table,ol,ul')) {\n                    return true;\n                }\n                if (Dom.isBlock(parent) || Dom.is(parent, 'body')) {\n                    var isPrevBlock = prev && Dom.isBlock(prev);\n                    var isNextBlock = next && Dom.isBlock(next);\n                    if (!next && isPrevBlock || !prev && isNextBlock || isPrevBlock && isNextBlock) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            isBlock: function (node) {\n                return block[Dom.name(node)];\n            },\n            isSelfClosing: function (node) {\n                return selfClosing[Dom.name(node)];\n            },\n            isEmpty: function (node) {\n                return empty[Dom.name(node)];\n            },\n            isInline: function (node) {\n                return inline[Dom.name(node)];\n            },\n            isBr: function (node) {\n                return Dom.name(node) == 'br';\n            },\n            list: function (node) {\n                var name = node ? Dom.name(node) : '';\n                return name == 'ul' || name == 'ol' || name == 'dl';\n            },\n            scrollContainer: function (doc) {\n                var wnd = Dom.windowFromDocument(doc), scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n                if (scrollContainer.compatMode == 'BackCompat') {\n                    scrollContainer = scrollContainer.body;\n                } else {\n                    scrollContainer = scrollContainer.scrollingElement || scrollContainer.documentElement;\n                }\n                return scrollContainer;\n            },\n            scrollTo: function (node, toStart) {\n                var doc = node.ownerDocument;\n                var wnd = Dom.windowFromDocument(doc);\n                var windowHeight = wnd.innerHeight;\n                var scrollContainer = Dom.scrollContainer(doc);\n                var element, elementTop, elementHeight, marker;\n                if (Dom.isDataNode(node)) {\n                    if (toStart) {\n                        marker = Dom.create(doc, 'span', { 'innerHTML': '&#xfeff;' });\n                        Dom.insertBefore(marker, node);\n                        element = $(marker);\n                    } else {\n                        element = $(node.parentNode);\n                    }\n                } else {\n                    element = $(node);\n                }\n                elementTop = element.offset().top;\n                elementHeight = element[0].offsetHeight;\n                if (toStart || !elementHeight) {\n                    elementHeight = parseInt(element.css('line-height'), 10) || Math.ceil(1.2 * parseInt(element.css('font-size'), 10)) || 15;\n                }\n                if (marker) {\n                    Dom.remove(marker);\n                }\n                if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n                    scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n                }\n            },\n            persistScrollTop: function (doc) {\n                persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n            },\n            offset: function (target, offsetParent) {\n                var result = {\n                    top: target.offsetTop,\n                    left: target.offsetLeft\n                };\n                var parent = target.offsetParent;\n                while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n                    result.top += parent.offsetTop;\n                    result.left += parent.offsetLeft;\n                    parent = parent.offsetParent;\n                }\n                return result;\n            },\n            restoreScrollTop: function (doc) {\n                if (typeof persistedScrollTop == 'number') {\n                    Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n                    persistedScrollTop = undefined;\n                }\n            },\n            insertAt: function (parent, newElement, position) {\n                parent.insertBefore(newElement, parent.childNodes[position] || null);\n            },\n            insertBefore: function (newElement, referenceElement) {\n                if (referenceElement.parentNode) {\n                    return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n                } else {\n                    return referenceElement;\n                }\n            },\n            insertAfter: function (newElement, referenceElement) {\n                return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n            },\n            remove: function (node) {\n                if (node.parentNode) {\n                    node.parentNode.removeChild(node);\n                }\n            },\n            removeChildren: function (node) {\n                while (node.firstChild) {\n                    node.removeChild(node.firstChild);\n                }\n            },\n            removeTextSiblings: function (node) {\n                var parentNode = node.parentNode;\n                while (node.nextSibling && node.nextSibling.nodeType == 3) {\n                    parentNode.removeChild(node.nextSibling);\n                }\n                while (node.previousSibling && node.previousSibling.nodeType == 3) {\n                    parentNode.removeChild(node.previousSibling);\n                }\n            },\n            trim: function (parent) {\n                for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n                    var node = parent.childNodes[i];\n                    if (Dom.isDataNode(node)) {\n                        if (!Dom.stripBom(node.nodeValue).length) {\n                            Dom.remove(node);\n                        }\n                    } else if (node.className != KMARKER) {\n                        Dom.trim(node);\n                        if (!Dom.isEmpty(node) && node.childNodes.length === 0 || Dom.isBlock(node) && Dom.allWhitespaceContent(node)) {\n                            Dom.remove(node);\n                        }\n                    }\n                }\n                return parent;\n            },\n            closest: function (node, tags) {\n                if (typeof tags === 'string') {\n                    tags = [tags];\n                }\n                while (node && tags.indexOf(Dom.name(node)) < 0) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            closestBy: function (node, condition, rootCondition) {\n                while (node && !condition(node)) {\n                    if (rootCondition && rootCondition(node)) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            sibling: function (node, direction) {\n                do {\n                    node = node[direction];\n                } while (node && node.nodeType != 1);\n                return node;\n            },\n            next: function (node) {\n                return Dom.sibling(node, 'nextSibling');\n            },\n            prev: function (node) {\n                return Dom.sibling(node, 'previousSibling');\n            },\n            parentOfType: function (node, tags) {\n                do {\n                    node = node.parentNode;\n                } while (node && !Dom.ofType(node, tags));\n                return node;\n            },\n            ofType: function (node, tags) {\n                return $.inArray(Dom.name(node), tags) >= 0;\n            },\n            changeTag: function (referenceElement, tagName, skipAttributes) {\n                var newElement = Dom.create(referenceElement.ownerDocument, tagName), attributes = referenceElement.attributes, i, len, name, value, attribute;\n                if (!skipAttributes) {\n                    for (i = 0, len = attributes.length; i < len; i++) {\n                        attribute = attributes[i];\n                        if (attribute.specified) {\n                            name = attribute.nodeName;\n                            value = attribute.nodeValue;\n                            if (name == CLASS) {\n                                newElement.className = value;\n                            } else if (name == STYLE) {\n                                newElement.style.cssText = referenceElement.style.cssText;\n                            } else {\n                                newElement.setAttribute(name, value);\n                            }\n                        }\n                    }\n                }\n                while (referenceElement.firstChild) {\n                    newElement.appendChild(referenceElement.firstChild);\n                }\n                Dom.insertBefore(newElement, referenceElement);\n                Dom.remove(referenceElement);\n                return newElement;\n            },\n            editableParent: function (node) {\n                while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            wrap: function (node, wrapper) {\n                Dom.insertBefore(wrapper, node);\n                wrapper.appendChild(node);\n                return wrapper;\n            },\n            unwrap: function (node) {\n                var parent = node.parentNode;\n                while (node.firstChild) {\n                    parent.insertBefore(node.firstChild, node);\n                }\n                parent.removeChild(node);\n            },\n            wrapper: function (node) {\n                var wrapper = Dom.closestBy(node, function (el) {\n                    return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n                });\n                return $(wrapper).is('body,.k-editor') ? undefined : wrapper;\n            },\n            create: function (document, tagName, attributes) {\n                return Dom.attr(document.createElement(tagName), attributes);\n            },\n            createEmptyNode: function (document, tagName, attributes) {\n                var node = Dom.attr(document.createElement(tagName), attributes);\n                node.innerHTML = '\\uFEFF';\n                return node;\n            },\n            attr: function (element, attributes) {\n                attributes = extend({}, attributes);\n                if (attributes && STYLE in attributes) {\n                    Dom.style(element, attributes.style);\n                    delete attributes.style;\n                }\n                for (var attr in attributes) {\n                    if (attributes[attr] === null) {\n                        element.removeAttribute(attr);\n                        delete attributes[attr];\n                    } else if (attr == 'className') {\n                        element[attr] = attributes[attr];\n                    }\n                }\n                return extend(element, attributes);\n            },\n            mergeAttributes: function (origin, target, traverseCss) {\n                if (!origin.attributes.length) {\n                    return;\n                }\n                $.each(origin.attributes, function () {\n                    if (this.name !== 'contenteditable' && (!traverseCss || this.name !== STYLE)) {\n                        $(target).attr(this.name, this.value);\n                    }\n                    if (traverseCss && this.name === STYLE) {\n                        $.each(origin.style, function () {\n                            target.style[this] = origin.style[this];\n                        });\n                    }\n                });\n            },\n            style: function (node, value) {\n                $(node).css(value || {});\n            },\n            unstyle: function (node, value) {\n                for (var key in value) {\n                    if (key == FLOAT) {\n                        key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n                    }\n                    node.style[key] = '';\n                }\n                if (node.style.cssText === '') {\n                    node.removeAttribute(STYLE);\n                }\n            },\n            inlineStyle: function (body, name, attributes) {\n                var span = $(Dom.create(body.ownerDocument, name, attributes)), style;\n                body.appendChild(span[0]);\n                style = map(cssAttributes, function (value) {\n                    if (browser.msie && value == 'line-height' && span.css(value) == '1px') {\n                        return 'line-height:1.5';\n                    } else {\n                        return value + ':' + span.css(value);\n                    }\n                }).join(';');\n                span.remove();\n                return style;\n            },\n            getEffectiveBackground: function (element) {\n                var backgroundStyle = element.css('background-color') || '';\n                if (backgroundStyle.indexOf('rgba(0, 0, 0, 0') < 0 && backgroundStyle !== 'transparent') {\n                    return backgroundStyle;\n                } else if (element[0].tagName.toLowerCase() === 'html') {\n                    return 'Window';\n                } else {\n                    return Dom.getEffectiveBackground(element.parent());\n                }\n            },\n            innerText: function (node) {\n                var text = node.innerHTML;\n                text = text.replace(/<!--(.|\\s)*?-->/gi, '');\n                text = text.replace(/<\\/?[^>]+?\\/?>/gm, '');\n                return text;\n            },\n            removeClass: function (node, classNames) {\n                var className = ' ' + node.className + ' ', classes = classNames.split(' '), i, len;\n                for (i = 0, len = classes.length; i < len; i++) {\n                    className = className.replace(' ' + classes[i] + ' ', ' ');\n                }\n                className = kendo.trim(className);\n                if (className.length) {\n                    node.className = className;\n                } else {\n                    node.removeAttribute(CLASS);\n                }\n            },\n            commonAncestor: function () {\n                var count = arguments.length, paths = [], minPathLength = Infinity, output = null, i, ancestors, node, first, j;\n                if (!count) {\n                    return null;\n                }\n                if (count == 1) {\n                    return arguments[0];\n                }\n                for (i = 0; i < count; i++) {\n                    ancestors = [];\n                    node = arguments[i];\n                    while (node) {\n                        ancestors.push(node);\n                        node = node.parentNode;\n                    }\n                    paths.push(ancestors.reverse());\n                    minPathLength = Math.min(minPathLength, ancestors.length);\n                }\n                if (count == 1) {\n                    return paths[0][0];\n                }\n                for (i = 0; i < minPathLength; i++) {\n                    first = paths[0][i];\n                    for (j = 1; j < count; j++) {\n                        if (first != paths[j][i]) {\n                            return output;\n                        }\n                    }\n                    output = first;\n                }\n                return output;\n            },\n            closestSplittableParent: function (nodes) {\n                var result;\n                if (nodes.length == 1) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'ul',\n                        'ol'\n                    ]);\n                } else {\n                    result = Dom.commonAncestor.apply(null, nodes);\n                }\n                if (!result) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'p',\n                        'td'\n                    ]) || nodes[0].ownerDocument.body;\n                }\n                if (Dom.isInline(result)) {\n                    result = Dom.blockParentOrBody(result);\n                }\n                var editableParents = map(nodes, Dom.editableParent);\n                var editableAncestor = Dom.commonAncestor(editableParents)[0];\n                if ($.contains(result, editableAncestor)) {\n                    result = editableAncestor;\n                }\n                return result;\n            },\n            closestEditable: function (node, types) {\n                var closest;\n                var editable = Dom.editableParent(node);\n                if (Dom.ofType(node, types)) {\n                    closest = node;\n                } else {\n                    closest = Dom.parentOfType(node, types);\n                }\n                if (closest && editable && $.contains(closest, editable)) {\n                    closest = editable;\n                } else if (!closest && editable) {\n                    closest = editable;\n                }\n                return closest;\n            },\n            closestEditableOfType: function (node, types) {\n                var editable = Dom.closestEditable(node, types);\n                if (editable && Dom.ofType(editable, types) && !$(editable).is('.k-editor')) {\n                    return editable;\n                }\n            },\n            filter: function (tagName, nodes, invert) {\n                var filterFn = function (node) {\n                    return Dom.name(node) == tagName;\n                };\n                return Dom.filterBy(nodes, filterFn, invert);\n            },\n            filterBy: function (nodes, condition, invert) {\n                var i = 0;\n                var len = nodes.length;\n                var result = [];\n                var match;\n                for (; i < len; i++) {\n                    match = condition(nodes[i]);\n                    if (match && !invert || !match && invert) {\n                        result.push(nodes[i]);\n                    }\n                }\n                return result;\n            },\n            ensureTrailingBreaks: function (node) {\n                var elements = $(node).find('p,td,th');\n                var length = elements.length;\n                var i = 0;\n                if (length) {\n                    for (; i < length; i++) {\n                        Dom.ensureTrailingBreak(elements[i]);\n                    }\n                } else {\n                    Dom.ensureTrailingBreak(node);\n                }\n            },\n            removeTrailingBreak: function (node) {\n                $(node).find('br[type=_moz],.k-br').remove();\n            },\n            ensureTrailingBreak: function (node) {\n                Dom.removeTrailingBreak(node);\n                var lastChild = node.lastChild;\n                var name = lastChild && Dom.name(lastChild);\n                var br;\n                if (!name || name != 'br' && name != 'img' || name == 'br' && lastChild.className != 'k-br') {\n                    br = node.ownerDocument.createElement('br');\n                    br.className = 'k-br';\n                    node.appendChild(br);\n                }\n            },\n            reMapTableColumns: function (table, colAttr) {\n                Dom._mapColIndices(table, colAttr);\n            },\n            clearTableMappings: function (table, colAttr) {\n                $(table).find('[' + colAttr + ']').removeAttr(colAttr);\n            },\n            _mapColIndices: function (table, colAttr) {\n                var registeredColumns = {};\n                for (var rowIndex = 0; rowIndex < table.rows.length; rowIndex++) {\n                    var cells = table.rows[rowIndex].cells;\n                    var colIndex = 0;\n                    for (var cellIndex = 0; cellIndex < cells.length; cellIndex++, colIndex++) {\n                        var cell = cells[cellIndex];\n                        if (cell.rowSpan > 1) {\n                            this._mapColspan(cell, rowIndex, colIndex, registeredColumns);\n                        }\n                        if (registeredColumns[rowIndex]) {\n                            while (registeredColumns[rowIndex][colIndex]) {\n                                colIndex++;\n                            }\n                        }\n                        cell.setAttribute(colAttr, colIndex);\n                        if (cell.colSpan > 1) {\n                            colIndex = colIndex + cell.colSpan - 1;\n                        }\n                    }\n                }\n            },\n            _mapColspan: function (cell, rowIndex, colIndex, registeredColumns) {\n                var rowSpan = cell.rowSpan, colSpan = cell.colSpan, index;\n                for (var ci = 0; ci < colSpan; ci++) {\n                    index = colIndex + ci;\n                    for (var ri = rowIndex + 1; ri < rowIndex + rowSpan; ri++) {\n                        if (!registeredColumns[ri]) {\n                            registeredColumns[ri] = {};\n                            registeredColumns[ri].length = 0;\n                        }\n                        if (registeredColumns[rowIndex]) {\n                            while (registeredColumns[rowIndex][index]) {\n                                index++;\n                            }\n                        }\n                        registeredColumns[ri][index] = true;\n                        registeredColumns[ri].length++;\n                    }\n                }\n            },\n            associateWithIds: function (table) {\n                var that = this;\n                var numberOfTheadRows = 0;\n                var tableRows = table.rows;\n                var numberOfTableRows = tableRows.length;\n                var theadMatrix = [];\n                var tbodyMatrix = [];\n                var theadRows, i;\n                if (table.tHead) {\n                    theadRows = table.tHead.rows;\n                    numberOfTheadRows = theadRows.length;\n                } else {\n                    numberOfTheadRows = that._getNumberOfHeaderRows(table);\n                    theadRows = [];\n                    for (i = 0; i < numberOfTheadRows; i++) {\n                        theadRows.push(tableRows[i]);\n                    }\n                }\n                for (i = 0; i < numberOfTheadRows; i++) {\n                    theadMatrix.push([]);\n                }\n                for (i = 0; i < numberOfTableRows; i++) {\n                    tbodyMatrix.push([]);\n                }\n                that._generateIdsForColumns(theadMatrix, theadRows);\n                that._generateIdsForRows(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n                that._assignIds(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n            },\n            _generateIdsForColumns: function (theadMatrix, theadRows) {\n                var timestamp = new Date().getTime();\n                var numberOfTheadRows = theadRows ? theadRows.length : 0;\n                var row, cells, cell, col, id, colspan, rowspan, i, j, k, l;\n                for (i = 0; i < numberOfTheadRows; i++) {\n                    row = theadRows[i];\n                    cells = row.cells;\n                    col = 0;\n                    for (j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        id = 'table' + i + j + ++timestamp;\n                        cell.setAttribute('id', id);\n                        colspan = cell.getAttribute('colspan') || 1;\n                        rowspan = cell.getAttribute('rowspan') || 1;\n                        while (theadMatrix[i][j + col]) {\n                            col += 1;\n                        }\n                        for (k = 0; k < rowspan; k++) {\n                            for (l = 0; l < colspan; l++) {\n                                theadMatrix[i + k][j + col + l] = id;\n                            }\n                        }\n                    }\n                }\n            },\n            _generateIdsForRows: function (theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n                var that = this;\n                var timestamp = new Date().getTime();\n                var numberOfTableRows = tableRows.length;\n                var row, cells, cell, col, id, colspan, rowspan, i, j, k, l, colIndex, headers;\n                var pushHeaderId = function (row) {\n                    headers.push(row[colIndex]);\n                };\n                for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n                    row = tableRows[i];\n                    cells = $(row.cells).filter('th');\n                    col = 0;\n                    for (j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        id = 'table' + i + j + ++timestamp;\n                        cell.setAttribute('id', id);\n                        colspan = cell.getAttribute('colspan') || 1;\n                        rowspan = cell.getAttribute('rowspan') || 1;\n                        while (tbodyMatrix[i][j + col]) {\n                            col += 1;\n                        }\n                        for (k = 0; k < rowspan; k++) {\n                            for (l = 0; l < colspan; l++) {\n                                tbodyMatrix[i + k][j + col + l] = id;\n                            }\n                        }\n                        colIndex = cell.getAttribute('col-index');\n                        headers = [];\n                        theadMatrix.forEach(pushHeaderId);\n                        headers = headers.filter(that._onlyUnique);\n                        cell.setAttribute('headers', headers.join(' ').trim());\n                    }\n                }\n            },\n            _assignIds: function (theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n                var that = this;\n                var numberOfTableRows = tableRows.length;\n                var row, cells, cell, i, j, colIndex, headers;\n                var pushHeaderId = function (row) {\n                    headers.push(row[colIndex]);\n                };\n                for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n                    row = tableRows[i];\n                    cells = $(row.cells).filter('td');\n                    for (j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        colIndex = cell.getAttribute('col-index');\n                        headers = tbodyMatrix[i].slice();\n                        theadMatrix.forEach(pushHeaderId);\n                        headers = headers.filter(that._onlyUnique);\n                        cell.setAttribute('headers', headers.join(' ').trim());\n                    }\n                }\n            },\n            _getNumberOfColumns: function (table) {\n                var cells = $(table).find('th, td');\n                var numberOfCols = 0;\n                var cell, i, currentIndex;\n                for (i = 0; i < cells.length; i++) {\n                    cell = cells[i];\n                    currentIndex = Number(cell.getAttribute('col-index')) + 1;\n                    if (currentIndex > numberOfCols) {\n                        numberOfCols = currentIndex;\n                    }\n                }\n                return numberOfCols;\n            },\n            _getNumberOfHeaderColumns: function (table, numberOfHeaderRows) {\n                var rows = table.rows;\n                var numberOfCols = 0;\n                var currentIndex, row, i, j, cell;\n                for (i = numberOfHeaderRows; i < rows.length; i++) {\n                    row = rows[i];\n                    for (j = 0; j < row.cells.length; j++) {\n                        cell = row.cells[j];\n                        if (this.is(cell, 'th')) {\n                            currentIndex = Number(cell.getAttribute('col-index')) + 1;\n                            if (currentIndex > numberOfCols) {\n                                numberOfCols = currentIndex;\n                            }\n                        }\n                    }\n                }\n                return numberOfCols;\n            },\n            _getNumberOfHeaderRows: function (table) {\n                var rows = table.rows;\n                var thead = table.tHead;\n                var number = thead && table.tHead.rows ? table.tHead.rows.length : 0;\n                var j, row, cell, length;\n                if (number === 0) {\n                    row = rows[0];\n                    length = row.cells && row.cells.length;\n                    while (row && length && this.is(row.cells[0], 'th')) {\n                        for (j = 0; j < length; j++) {\n                            cell = row ? row.cells[j] : null;\n                            if (!this.is(cell, 'th')) {\n                                row = null;\n                            }\n                        }\n                        if (row) {\n                            number += 1;\n                            row = this.next(row);\n                            length = row && row.cells && row.cells.length;\n                        }\n                    }\n                }\n                return number;\n            },\n            _onlyUnique: function (value, index, self) {\n                return self.indexOf(value) === index;\n            }\n        };\n        kendo.ui.editor.Dom = Dom;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/serializer', ['editor/dom'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var Editor = kendo.ui.editor;\n        var dom = Editor.Dom;\n        var extend = $.extend;\n        var fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\n        var quoteRe = /\"/g;\n        var brRe = /<br[^>]*>/i;\n        var pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\n        var emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\n        var cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\n        var sizzleAttr = /^sizzle-\\d+/i;\n        var scriptAttr = /^k-script-/i;\n        var onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\n        var br = '<br class=\"k-br\">';\n        var bomSpan = '<span class=\\'k-br\\'>\\uFEFF</span>';\n        var div = document.createElement('div');\n        div.innerHTML = ' <hr>';\n        var supportsLeadingWhitespace = div.firstChild.nodeType === 3;\n        div = null;\n        var isFunction = $.isFunction;\n        var TD = 'td';\n        var Serializer = {\n            toEditableHtml: function (html) {\n                return (html || '').replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, '<!--[CDATA[$1]]-->').replace(/<(\\/?)script([^>]*)>/gi, '<$1k:script$2>').replace(/<img([^>]*)>/gi, function (match) {\n                    return match.replace(onerrorRe, '');\n                }).replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/gi, '$1').replace(/^<(table|blockquote)/i, br + '<$1').replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1').replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n            },\n            _toEditableImmutables: function (body) {\n                var immutable = Editor.Immutables.immutable, emptyTextNode = dom.emptyTextNode, first = body.firstChild, last = body.lastChild;\n                while (emptyTextNode(first)) {\n                    first = first.nextSibling;\n                }\n                while (emptyTextNode(last)) {\n                    last = last.previousSibling;\n                }\n                if (first && immutable(first)) {\n                    $(bomSpan).prependTo(body);\n                }\n                if (last && immutable(last)) {\n                    $(bomSpan).appendTo(body);\n                }\n            },\n            _fillEmptyElements: function (body) {\n                $(body).find('p,td').each(function () {\n                    var p = $(this);\n                    if (/^\\s*$/g.test(p.text()) && !p.find('img,input').length) {\n                        var node = this;\n                        while (node.children[0] && node.children[0].nodeType != 3) {\n                            node = node.children[0];\n                        }\n                        if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                            if (dom.is(node, 'td')) {\n                                node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                            } else {\n                                node.innerHTML = kendo.ui.editor.emptyElementContent;\n                            }\n                        }\n                    }\n                });\n            },\n            _removeSystemElements: function (body) {\n                $('.k-paste-container', body).remove();\n            },\n            _resetOrderedLists: function (root) {\n                var ols = root.getElementsByTagName('ol'), i, ol, originalStart;\n                for (i = 0; i < ols.length; i++) {\n                    ol = ols[i];\n                    originalStart = ol.getAttribute('start');\n                    ol.setAttribute('start', 1);\n                    if (originalStart) {\n                        ol.setAttribute('start', originalStart);\n                    } else {\n                        ol.removeAttribute(originalStart);\n                    }\n                }\n            },\n            _preventScriptExecution: function (root) {\n                $(root).find('*').each(function () {\n                    var attributes = this.attributes;\n                    var attribute, i, l, name;\n                    var attributesToRemove = [];\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        if (attribute.specified && /^on/i.test(name)) {\n                            this.setAttribute('k-script-' + name, attribute.value);\n                            attributesToRemove.push(name);\n                        }\n                    }\n                    for (i = 0, l = attributesToRemove.length; i < l; i++) {\n                        this.removeAttribute(attributesToRemove[i]);\n                    }\n                });\n            },\n            htmlToDom: function (html, root, options) {\n                var browser = kendo.support.browser;\n                var msie = browser.msie;\n                var o = options || {};\n                var immutables = o.immutables;\n                html = Serializer.toEditableHtml(html);\n                if (isFunction(o.custom)) {\n                    html = o.custom(html) || html;\n                }\n                root.innerHTML = html;\n                if (immutables) {\n                    immutables.deserialize(root);\n                }\n                if (msie) {\n                    dom.normalize(root);\n                    Serializer._resetOrderedLists(root);\n                }\n                Serializer._preventScriptExecution(root);\n                Serializer._fillEmptyElements(root);\n                Serializer._removeSystemElements(root);\n                Serializer._toEditableImmutables(root);\n                $('table', root).addClass('k-table');\n                return root;\n            },\n            domToXhtml: function (root, options) {\n                var result = [];\n                var immutables = options && options.immutables;\n                function semanticFilter(attributes) {\n                    return $.grep(attributes, function (attr) {\n                        return attr.name != 'style';\n                    });\n                }\n                function mapStart(node, tag) {\n                    result.push('<' + tag);\n                    attr(node);\n                    result.push('>');\n                }\n                var tagMap = {\n                    iframe: {\n                        start: function (node) {\n                            mapStart(node, 'iframe');\n                        },\n                        end: function () {\n                            result.push('</iframe>');\n                        }\n                    },\n                    'k:script': {\n                        start: function (node) {\n                            mapStart(node, 'script');\n                        },\n                        end: function () {\n                            result.push('</script>');\n                        },\n                        skipEncoding: true\n                    },\n                    span: {\n                        semantic: true,\n                        start: function (node) {\n                            var style = node.style;\n                            var attributes = specifiedAttributes(node);\n                            var semanticAttributes = semanticFilter(attributes);\n                            if (semanticAttributes.length) {\n                                result.push('<span');\n                                attr(node, semanticAttributes);\n                                result.push('>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('<u>');\n                            }\n                            var font = [];\n                            if (style.color) {\n                                font.push('color=\"' + dom.toHex(style.color) + '\"');\n                            }\n                            if (style.fontFamily) {\n                                font.push('face=\"' + style.fontFamily + '\"');\n                            }\n                            if (style.fontSize) {\n                                var size = $.inArray(style.fontSize, fontSizeMappings);\n                                font.push('size=\"' + size + '\"');\n                            }\n                            if (font.length) {\n                                result.push('<font ' + font.join(' ') + '>');\n                            }\n                        },\n                        end: function (node) {\n                            var style = node.style;\n                            if (style.color || style.fontFamily || style.fontSize) {\n                                result.push('</font>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('</u>');\n                            }\n                            if (semanticFilter(specifiedAttributes(node)).length) {\n                                result.push('</span>');\n                            }\n                        }\n                    },\n                    strong: {\n                        semantic: true,\n                        start: function (node) {\n                            mapStart(node, 'b');\n                        },\n                        end: function () {\n                            result.push('</b>');\n                        }\n                    },\n                    em: {\n                        semantic: true,\n                        start: function (node) {\n                            mapStart(node, 'i');\n                        },\n                        end: function () {\n                            result.push('</i>');\n                        }\n                    },\n                    b: {\n                        semantic: false,\n                        start: function (node) {\n                            mapStart(node, 'strong');\n                        },\n                        end: function () {\n                            result.push('</strong>');\n                        }\n                    },\n                    i: {\n                        semantic: false,\n                        start: function (node) {\n                            mapStart(node, 'em');\n                        },\n                        end: function () {\n                            result.push('</em>');\n                        }\n                    },\n                    u: {\n                        semantic: false,\n                        start: function (node) {\n                            result.push('<span');\n                            var attributes = specifiedAttributes(node);\n                            var style = $(attributes).filter(function (i, item) {\n                                return item.name == 'style';\n                            })[0];\n                            var styleObj = {\n                                nodeName: 'style',\n                                value: 'text-decoration:underline;'\n                            };\n                            if (style) {\n                                styleObj.value = style.value;\n                                if (!/text-decoration/i.test(styleObj.value)) {\n                                    styleObj.value = 'text-decoration:underline;' + styleObj.value;\n                                }\n                                attributes.splice($.inArray(style, attributes), 1);\n                            }\n                            attributes.push(styleObj);\n                            attr(node, attributes);\n                            result.push('>');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    },\n                    font: {\n                        semantic: false,\n                        start: function (node) {\n                            result.push('<span style=\"');\n                            var color = node.getAttribute('color');\n                            var size = fontSizeMappings[node.getAttribute('size')];\n                            var face = node.getAttribute('face');\n                            if (color) {\n                                result.push('color:');\n                                result.push(dom.toHex(color));\n                                result.push(';');\n                            }\n                            if (face) {\n                                result.push('font-family:');\n                                result.push(face);\n                                result.push(';');\n                            }\n                            if (size) {\n                                result.push('font-size:');\n                                result.push(size);\n                                result.push(';');\n                            }\n                            result.push('\">');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    }\n                };\n                tagMap.script = tagMap['k:script'];\n                options = options || {};\n                if (typeof options.semantic == 'undefined') {\n                    options.semantic = true;\n                }\n                function cssProperties(cssText) {\n                    var trim = kendo.trim;\n                    var css = trim(cssText);\n                    var match;\n                    var property, value;\n                    var properties = [];\n                    cssDeclaration.lastIndex = 0;\n                    while (true) {\n                        match = cssDeclaration.exec(css);\n                        if (!match) {\n                            break;\n                        }\n                        property = trim(match[1].toLowerCase());\n                        value = trim(match[2]);\n                        if (property == 'font-size-adjust' || property == 'font-stretch') {\n                            continue;\n                        }\n                        if (property.indexOf('color') >= 0) {\n                            value = dom.toHex(value);\n                        } else if (property.indexOf('font') >= 0) {\n                            value = value.replace(quoteRe, '\\'');\n                        } else if (/\\burl\\(/g.test(value)) {\n                            value = value.replace(quoteRe, '');\n                        }\n                        properties.push({\n                            property: property,\n                            value: value\n                        });\n                    }\n                    return properties;\n                }\n                function styleAttr(cssText) {\n                    var properties = cssProperties(cssText);\n                    var i;\n                    for (i = 0; i < properties.length; i++) {\n                        result.push(properties[i].property);\n                        result.push(':');\n                        result.push(properties[i].value);\n                        result.push(';');\n                    }\n                }\n                function specifiedAttributes(node) {\n                    var result = [];\n                    var attributes = node.attributes;\n                    var attribute, i, l;\n                    var name, value, specified;\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        specified = attribute.specified;\n                        if (name == 'value' && 'value' in node && node.value) {\n                            specified = true;\n                        } else if (name == 'type' && value == 'text') {\n                            specified = true;\n                        } else if (name == 'class' && !value) {\n                            specified = false;\n                        } else if (sizzleAttr.test(name)) {\n                            specified = false;\n                        } else if (name == 'complete') {\n                            specified = false;\n                        } else if (name == 'altHtml') {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ul')) {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ol') && value == '1') {\n                            specified = false;\n                        } else if (name.indexOf('_moz') >= 0) {\n                            specified = false;\n                        } else if (scriptAttr.test(name)) {\n                            specified = !!options.scripts;\n                        } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, 'tr') || dom.is(node, 'td'))) {\n                            specified = false;\n                        }\n                        if (specified) {\n                            result.push(attribute);\n                        }\n                    }\n                    return result;\n                }\n                function attr(node, attributes) {\n                    var i, l, attribute, name, value;\n                    attributes = attributes || specifiedAttributes(node);\n                    if (dom.is(node, 'img')) {\n                        var width = node.style.width, height = node.style.height, $node = $(node);\n                        if (width && pixelRe.test(width)) {\n                            $node.attr('width', parseInt(width, 10));\n                            dom.unstyle(node, { width: undefined });\n                        }\n                        if (height && pixelRe.test(height)) {\n                            $node.attr('height', parseInt(height, 10));\n                            dom.unstyle(node, { height: undefined });\n                        }\n                    }\n                    if (!attributes.length) {\n                        return;\n                    }\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        if (name == 'class' && value == 'k-table') {\n                            continue;\n                        }\n                        name = name.replace(scriptAttr, '');\n                        result.push(' ');\n                        result.push(name);\n                        result.push('=\"');\n                        if (name == 'style') {\n                            styleAttr(value || node.style.cssText);\n                        } else if (name == 'src' || name == 'href') {\n                            result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                        } else {\n                            result.push(dom.fillAttrs[name] ? name : value);\n                        }\n                        result.push('\"');\n                    }\n                }\n                function children(node, skip, skipEncoding) {\n                    for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                        child(childNode, skip, skipEncoding);\n                    }\n                }\n                function text(node) {\n                    return node.nodeValue.replace(/\\ufeff/g, '');\n                }\n                function isEmptyBomNode(node) {\n                    if (dom.isBom(node)) {\n                        do {\n                            node = node.parentNode;\n                            if (dom.is(node, TD) && node.childNodes.length === 1) {\n                                return true;\n                            }\n                            if (node.childNodes.length !== 1) {\n                                return false;\n                            }\n                        } while (!dom.isBlock(node));\n                        return true;\n                    }\n                    return false;\n                }\n                function child(node, skip, skipEncoding) {\n                    var nodeType = node.nodeType, tagName, mapper, parent, value, previous, jqNode;\n                    if (immutables && Editor.Immutables.immutable(node)) {\n                        result.push(immutables.serialize(node));\n                    } else if (nodeType == 1) {\n                        tagName = dom.name(node);\n                        jqNode = $(node);\n                        if (jqNode.hasClass('k-table-resize-handle-wrapper') || jqNode.hasClass('k-column-resize-handle-wrapper') || jqNode.hasClass('k-row-resize-handle-wrapper')) {\n                            return;\n                        }\n                        if (!tagName || dom.insignificant(node)) {\n                            return;\n                        }\n                        if (!options.scripts && (tagName == 'script' || tagName == 'k:script')) {\n                            return;\n                        }\n                        mapper = tagMap[tagName];\n                        if (mapper) {\n                            if (typeof mapper.semantic == 'undefined' || options.semantic ^ mapper.semantic) {\n                                mapper.start(node);\n                                children(node, false, mapper.skipEncoding);\n                                mapper.end(node);\n                                return;\n                            }\n                        }\n                        result.push('<');\n                        result.push(tagName);\n                        attr(node);\n                        if (dom.empty[tagName]) {\n                            result.push(' />');\n                        } else {\n                            result.push('>');\n                            children(node, skip || dom.is(node, 'pre'));\n                            result.push('</');\n                            result.push(tagName);\n                            result.push('>');\n                        }\n                    } else if (nodeType == 3) {\n                        if (isEmptyBomNode(node)) {\n                            result.push('&nbsp;');\n                            return;\n                        }\n                        value = text(node);\n                        if (!skip && supportsLeadingWhitespace) {\n                            parent = node.parentNode;\n                            previous = node.previousSibling;\n                            if (!previous) {\n                                previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                            }\n                            if (!previous || previous.innerHTML === '' || dom.isBlock(previous)) {\n                                value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                            }\n                            value = value.replace(/ +/, ' ');\n                        }\n                        result.push(skipEncoding ? value : dom.encode(value, options));\n                    } else if (nodeType == 4) {\n                        result.push('<![CDATA[');\n                        result.push(node.data);\n                        result.push(']]>');\n                    } else if (nodeType == 8) {\n                        if (node.data.indexOf('[CDATA[') < 0) {\n                            result.push('<!--');\n                            result.push(node.data);\n                            result.push('-->');\n                        } else {\n                            result.push('<!');\n                            result.push(node.data);\n                            result.push('>');\n                        }\n                    }\n                }\n                function textOnly(root) {\n                    var childrenCount = root.childNodes.length;\n                    var textChild = childrenCount && root.firstChild.nodeType == 3;\n                    return textChild && (childrenCount == 1 || childrenCount == 2 && dom.insignificant(root.lastChild));\n                }\n                function runCustom() {\n                    if ($.isFunction(options.custom)) {\n                        result = options.custom(result) || result;\n                    }\n                }\n                if (textOnly(root)) {\n                    result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n                    runCustom();\n                    return result;\n                }\n                children(root);\n                result = result.join('');\n                runCustom();\n                if (result.replace(brRe, '').replace(emptyPRe, '') === '') {\n                    return '';\n                }\n                return result;\n            }\n        };\n        extend(Editor, { Serializer: Serializer });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/components', ['editor/serializer'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, DropDownList = kendo.ui.DropDownList, dom = kendo.ui.editor.Dom;\n        var SelectBox = DropDownList.extend({\n            init: function (element, options) {\n                var that = this;\n                DropDownList.fn.init.call(that, element, options);\n                if (kendo.support.mobileOS.ios) {\n                    this._initSelectOverlay();\n                    this.bind('dataBound', $.proxy(this._initSelectOverlay, this));\n                }\n                that.text(that.options.title);\n                that.element.attr('title', that.options.title);\n                that.wrapper.attr('title', that.options.title);\n                that.bind('open', function () {\n                    if (that.options.autoSize) {\n                        var list = that.list, listWidth;\n                        list.css({\n                            whiteSpace: 'nowrap',\n                            width: 'auto'\n                        });\n                        listWidth = list.width();\n                        if (listWidth > 0) {\n                            listWidth += 20;\n                        } else {\n                            listWidth = that._listWidth;\n                        }\n                        list.css('width', listWidth + kendo.support.scrollbar());\n                        that._listWidth = listWidth;\n                    }\n                });\n            },\n            options: {\n                name: 'SelectBox',\n                index: -1\n            },\n            _initSelectOverlay: function () {\n                var selectBox = this;\n                var value = selectBox.value();\n                var view = this.dataSource.view();\n                var item;\n                var html = '';\n                var encode = kendo.htmlEncode;\n                for (var i = 0; i < view.length; i++) {\n                    item = view[i];\n                    html += '<option value=\\'' + encode(item.value) + '\\'';\n                    if (item.value == value) {\n                        html += ' selected';\n                    }\n                    html += '>' + encode(item.text) + '</option>';\n                }\n                var select = $('<select class=\\'k-select-overlay\\'>' + html + '</select>');\n                var wrapper = $(this.element).closest('.k-widget');\n                wrapper.next('.k-select-overlay').remove();\n                select.insertAfter(wrapper);\n                select.on('change', function () {\n                    selectBox.value(this.value);\n                    selectBox.trigger('change');\n                });\n            },\n            value: function (value) {\n                var that = this, result = DropDownList.fn.value.call(that, value);\n                if (value === undefined) {\n                    return result;\n                }\n                if (!DropDownList.fn.value.call(that)) {\n                    that.text(that.options.title);\n                }\n            },\n            decorate: function (body) {\n                var that = this, dataSource = that.dataSource, items = dataSource.data(), i, tag, className, style;\n                if (body) {\n                    that.list.css('background-color', dom.getEffectiveBackground($(body)));\n                }\n                for (i = 0; i < items.length; i++) {\n                    tag = items[i].tag || 'span';\n                    className = items[i].className;\n                    style = dom.inlineStyle(body, tag, { className: className });\n                    style = style.replace(/\"/g, '\\'');\n                    items[i].style = style + ';display:inline-block';\n                }\n                dataSource.trigger('change');\n            }\n        });\n        kendo.ui.plugin(SelectBox);\n        kendo.ui.editor.SelectBox = SelectBox;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/range', ['editor/components'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, browser = kendo.support.browser, dom = Editor.Dom, findNodeIndex = dom.findNodeIndex, isDataNode = dom.isDataNode, findClosestAncestor = dom.findClosestAncestor, getNodeLength = dom.getNodeLength, normalize = dom.normalize;\n        var SelectionUtils = {\n            selectionFromWindow: function (window) {\n                if (!window) {\n                    return;\n                }\n                if (!('getSelection' in window)) {\n                    return new W3CSelection(window.document);\n                }\n                return window.getSelection();\n            },\n            selectionFromRange: function (range) {\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                return SelectionUtils.selectionFromDocument(rangeDocument);\n            },\n            selectionFromDocument: function (document) {\n                return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n            }\n        };\n        var W3CRange = Class.extend({\n            init: function (doc) {\n                $.extend(this, {\n                    ownerDocument: doc,\n                    startContainer: doc,\n                    endContainer: doc,\n                    commonAncestorContainer: doc,\n                    startOffset: 0,\n                    endOffset: 0,\n                    collapsed: true\n                });\n            },\n            setStart: function (node, offset) {\n                this.startContainer = node;\n                this.startOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, true);\n            },\n            setEnd: function (node, offset) {\n                this.endContainer = node;\n                this.endOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, false);\n            },\n            setStartBefore: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node));\n            },\n            setStartAfter: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node) + 1);\n            },\n            setEndBefore: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node));\n            },\n            setEndAfter: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n            },\n            selectNode: function (node) {\n                this.setStartBefore(node);\n                this.setEndAfter(node);\n            },\n            selectNodeContents: function (node) {\n                this.setStart(node, 0);\n                this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n            },\n            collapse: function (toStart) {\n                var that = this;\n                if (toStart) {\n                    that.setEnd(that.startContainer, that.startOffset);\n                } else {\n                    that.setStart(that.endContainer, that.endOffset);\n                }\n            },\n            deleteContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                (function deleteSubtree(iterator) {\n                    while (iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            deleteSubtree(iterator.getSubtreeIterator());\n                        } else {\n                            iterator.remove();\n                        }\n                    }\n                }(new RangeIterator(range)));\n            },\n            cloneContents: function () {\n                var document = RangeUtils.documentFromRange(this);\n                return function cloneSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        node = node.cloneNode(!iterator.hasPartialSubtree());\n                        if (iterator.hasPartialSubtree()) {\n                            node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(this));\n            },\n            extractContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                var document = RangeUtils.documentFromRange(that);\n                return function extractSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            node = node.cloneNode(false);\n                            node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                        } else {\n                            iterator.remove(that.originalRange);\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(range));\n            },\n            insertNode: function (node) {\n                var that = this;\n                if (isDataNode(that.startContainer)) {\n                    if (that.startOffset != that.startContainer.nodeValue.length) {\n                        dom.splitDataNode(that.startContainer, that.startOffset);\n                    }\n                    dom.insertAfter(node, that.startContainer);\n                } else {\n                    dom.insertAt(that.startContainer, node, that.startOffset);\n                }\n                that.setStart(that.startContainer, that.startOffset);\n            },\n            cloneRange: function () {\n                return $.extend(new W3CRange(this.ownerDocument), {\n                    startContainer: this.startContainer,\n                    endContainer: this.endContainer,\n                    commonAncestorContainer: this.commonAncestorContainer,\n                    startOffset: this.startOffset,\n                    endOffset: this.endOffset,\n                    collapsed: this.collapsed,\n                    originalRange: this\n                });\n            },\n            toString: function () {\n                var startNodeName = this.startContainer.nodeName, endNodeName = this.endContainer.nodeName;\n                return [\n                    startNodeName == '#text' ? this.startContainer.nodeValue : startNodeName,\n                    '(',\n                    this.startOffset,\n                    ') : ',\n                    endNodeName == '#text' ? this.endContainer.nodeValue : endNodeName,\n                    '(',\n                    this.endOffset,\n                    ')'\n                ].join('');\n            }\n        });\n        W3CRange.fromNode = function (node) {\n            return new W3CRange(node.ownerDocument);\n        };\n        function compareBoundaries(start, end, startOffset, endOffset) {\n            if (start == end) {\n                return endOffset - startOffset;\n            }\n            var container = end;\n            while (container && container.parentNode != start) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return findNodeIndex(container) - startOffset;\n            }\n            container = start;\n            while (container && container.parentNode != end) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return endOffset - findNodeIndex(container) - 1;\n            }\n            var root = dom.commonAncestor(start, end);\n            var startAncestor = start;\n            while (startAncestor && startAncestor.parentNode != root) {\n                startAncestor = startAncestor.parentNode;\n            }\n            if (!startAncestor) {\n                startAncestor = root;\n            }\n            var endAncestor = end;\n            while (endAncestor && endAncestor.parentNode != root) {\n                endAncestor = endAncestor.parentNode;\n            }\n            if (!endAncestor) {\n                endAncestor = root;\n            }\n            if (startAncestor == endAncestor) {\n                return 0;\n            }\n            return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n        }\n        function fixIvalidRange(range, toStart) {\n            function isInvalidRange(range) {\n                try {\n                    return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n                } catch (ex) {\n                    return true;\n                }\n            }\n            if (isInvalidRange(range)) {\n                if (toStart) {\n                    range.commonAncestorContainer = range.endContainer = range.startContainer;\n                    range.endOffset = range.startOffset;\n                } else {\n                    range.commonAncestorContainer = range.startContainer = range.endContainer;\n                    range.startOffset = range.endOffset;\n                }\n                range.collapsed = true;\n            }\n        }\n        function updateRangeProperties(range) {\n            range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n            var node = range.startContainer;\n            while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n                node = node.parentNode;\n            }\n            range.commonAncestorContainer = node;\n        }\n        var RangeIterator = Class.extend({\n            init: function (range) {\n                $.extend(this, {\n                    range: range,\n                    _current: null,\n                    _next: null,\n                    _end: null\n                });\n                if (range.collapsed) {\n                    return;\n                }\n                var root = range.commonAncestorContainer;\n                this._next = range.startContainer == root && !isDataNode(range.startContainer) ? range.startContainer.childNodes[range.startOffset] : findClosestAncestor(root, range.startContainer);\n                this._end = range.endContainer == root && !isDataNode(range.endContainer) ? range.endContainer.childNodes[range.endOffset] : findClosestAncestor(root, range.endContainer).nextSibling;\n            },\n            hasNext: function () {\n                return !!this._next;\n            },\n            next: function () {\n                var that = this, current = that._current = that._next;\n                that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                if (isDataNode(that._current)) {\n                    if (that.range.endContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n                    }\n                    if (that.range.startContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(0, that.range.startOffset);\n                    }\n                }\n                return current;\n            },\n            traverse: function (callback) {\n                var that = this, current;\n                function next() {\n                    that._current = that._next;\n                    that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                    return that._current;\n                }\n                while (current = next()) {\n                    if (that.hasPartialSubtree()) {\n                        that.getSubtreeIterator().traverse(callback);\n                    } else {\n                        callback(current);\n                    }\n                }\n                return current;\n            },\n            remove: function (originalRange) {\n                var that = this, inStartContainer = that.range.startContainer == that._current, inEndContainer = that.range.endContainer == that._current, start, end, delta;\n                if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n                    start = inStartContainer ? that.range.startOffset : 0;\n                    end = inEndContainer ? that.range.endOffset : that._current.length;\n                    delta = end - start;\n                    if (originalRange && (inStartContainer || inEndContainer)) {\n                        if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                            originalRange.startOffset -= delta;\n                        }\n                        if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                            originalRange.endOffset -= delta;\n                        }\n                    }\n                    that._current.deleteData(start, delta);\n                } else {\n                    var parent = that._current.parentNode;\n                    if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                        var nodeIndex = findNodeIndex(that._current);\n                        if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                            originalRange.startOffset -= 1;\n                        }\n                        if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                            originalRange.endOffset -= 1;\n                        }\n                    }\n                    dom.remove(that._current);\n                }\n            },\n            hasPartialSubtree: function () {\n                return !isDataNode(this._current) && (dom.isAncestorOrSelf(this._current, this.range.startContainer) || dom.isAncestorOrSelf(this._current, this.range.endContainer));\n            },\n            getSubtreeIterator: function () {\n                return new RangeIterator(this.getSubRange());\n            },\n            getSubRange: function () {\n                var that = this, subRange = that.range.cloneRange();\n                subRange.selectNodeContents(that._current);\n                if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n                    subRange.setStart(that.range.startContainer, that.range.startOffset);\n                }\n                if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n                    subRange.setEnd(that.range.endContainer, that.range.endOffset);\n                }\n                return subRange;\n            }\n        });\n        var W3CSelection = Class.extend({\n            init: function (doc) {\n                this.ownerDocument = doc;\n                this.rangeCount = 1;\n            },\n            addRange: function (range) {\n                var textRange = this.ownerDocument.body.createTextRange();\n                adoptContainer(textRange, range, false);\n                adoptContainer(textRange, range, true);\n                textRange.select();\n            },\n            removeAllRanges: function () {\n                var selection = this.ownerDocument.selection;\n                if (selection.type != 'None') {\n                    selection.empty();\n                }\n            },\n            getRangeAt: function () {\n                var textRange, range = new W3CRange(this.ownerDocument), selection = this.ownerDocument.selection, element, commonAncestor;\n                try {\n                    textRange = selection.createRange();\n                    element = textRange.item ? textRange.item(0) : textRange.parentElement();\n                    if (element.ownerDocument != this.ownerDocument) {\n                        return range;\n                    }\n                } catch (ex) {\n                    return range;\n                }\n                if (selection.type == 'Control') {\n                    range.selectNode(textRange.item(0));\n                } else {\n                    commonAncestor = textRangeContainer(textRange);\n                    adoptEndPoint(textRange, range, commonAncestor, true);\n                    adoptEndPoint(textRange, range, commonAncestor, false);\n                    if (range.startContainer.nodeType == 9) {\n                        range.setStart(range.endContainer, range.startOffset);\n                    }\n                    if (range.endContainer.nodeType == 9) {\n                        range.setEnd(range.startContainer, range.endOffset);\n                    }\n                    if (textRange.compareEndPoints('StartToEnd', textRange) === 0) {\n                        range.collapse(false);\n                    }\n                    var startContainer = range.startContainer, endContainer = range.endContainer, body = this.ownerDocument.body;\n                    if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) {\n                        var movedStart = false, movedEnd = false;\n                        while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                            startContainer = startContainer.parentNode;\n                            movedStart = true;\n                        }\n                        while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                            endContainer = endContainer.parentNode;\n                            movedEnd = true;\n                        }\n                        if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                            range.setStart(startContainer, 0);\n                            range.setEnd(endContainer, getNodeLength(body));\n                        }\n                    }\n                }\n                return range;\n            }\n        });\n        function textRangeContainer(textRange) {\n            var left = textRange.duplicate(), right = textRange.duplicate();\n            left.collapse(true);\n            right.collapse(false);\n            return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n        }\n        function adoptContainer(textRange, range, start) {\n            var container = range[start ? 'startContainer' : 'endContainer'], offset = range[start ? 'startOffset' : 'endOffset'], textOffset = 0, isData = isDataNode(container), anchorNode = isData ? container : container.childNodes[offset] || null, anchorParent = isData ? container.parentNode : container, doc = range.ownerDocument, cursor = doc.body.createTextRange(), cursorNode;\n            if (container.nodeType == 3 || container.nodeType == 4) {\n                textOffset = offset;\n            }\n            if (!anchorParent) {\n                anchorParent = doc.body;\n            }\n            if (anchorParent.nodeName.toLowerCase() == 'img') {\n                cursor.moveToElementText(anchorParent);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            } else {\n                cursorNode = anchorParent.insertBefore(dom.create(doc, 'a'), anchorNode);\n                cursor.moveToElementText(cursorNode);\n                dom.remove(cursorNode);\n                cursor[start ? 'moveStart' : 'moveEnd']('character', textOffset);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            }\n        }\n        function adoptEndPoint(textRange, range, commonAncestor, start) {\n            var cursorNode = dom.create(range.ownerDocument, 'a'), cursor = textRange.duplicate(), comparison = start ? 'StartToStart' : 'StartToEnd', result, parent, target, previous, next, args, index, appended = false;\n            cursorNode.innerHTML = '\\uFEFF';\n            cursor.collapse(start);\n            parent = cursor.parentElement();\n            if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n                parent = commonAncestor;\n            }\n            do {\n                if (appended) {\n                    parent.insertBefore(cursorNode, cursorNode.previousSibling);\n                } else {\n                    parent.appendChild(cursorNode);\n                    appended = true;\n                }\n                cursor.moveToElementText(cursorNode);\n            } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n            target = cursorNode.nextSibling;\n            if (result == -1 && isDataNode(target)) {\n                cursor.setEndPoint(start ? 'EndToStart' : 'EndToEnd', textRange);\n                dom.remove(cursorNode);\n                args = [\n                    target,\n                    cursor.text.length\n                ];\n            } else {\n                previous = !start && cursorNode.previousSibling;\n                next = start && cursorNode.nextSibling;\n                if (isDataNode(next)) {\n                    args = [\n                        next,\n                        0\n                    ];\n                } else if (isDataNode(previous)) {\n                    args = [\n                        previous,\n                        previous.length\n                    ];\n                } else {\n                    index = findNodeIndex(cursorNode);\n                    if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                        args = [\n                            parent.nextSibling,\n                            0\n                        ];\n                    } else {\n                        args = [\n                            parent,\n                            index\n                        ];\n                    }\n                }\n                dom.remove(cursorNode);\n            }\n            range[start ? 'setStart' : 'setEnd'].apply(range, args);\n        }\n        var RangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    function visit(node) {\n                        if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                            nodes.push(node);\n                        } else {\n                            node = node.firstChild;\n                            while (node) {\n                                visit(node);\n                                node = node.nextSibling;\n                            }\n                        }\n                    }\n                    new RangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var ImmutablesRangeIterator = RangeIterator.extend({\n            hasPartialSubtree: function () {\n                var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n            },\n            getSubtreeIterator: function () {\n                return new ImmutablesRangeIterator(this.getSubRange());\n            }\n        });\n        var ImmutablesRangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                    function visit(node) {\n                        if (immutable && !immutable(node)) {\n                            if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                                nodes.push(node);\n                            } else {\n                                node = node.firstChild;\n                                while (node) {\n                                    visit(node);\n                                    node = node.nextSibling;\n                                }\n                            }\n                        }\n                    }\n                    new ImmutablesRangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var RestorePoint = Class.extend({\n            init: function (range, body, options) {\n                var that = this;\n                that.range = range;\n                that.rootNode = RangeUtils.documentFromRange(range);\n                that.body = body || that.getEditable(range);\n                if (dom.name(that.body) != 'body') {\n                    that.rootNode = that.body;\n                }\n                that.startContainer = that.nodeToPath(range.startContainer);\n                that.endContainer = that.nodeToPath(range.endContainer);\n                that.startOffset = that.offset(range.startContainer, range.startOffset);\n                that.endOffset = that.offset(range.endContainer, range.endOffset);\n                that.immutables = options && options.immutables;\n                if (that.immutables) {\n                    that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n                }\n                that.html = that.body.innerHTML;\n                if (that.immutables && !that.serializedImmutables.empty) {\n                    Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n                }\n            },\n            index: function (node) {\n                var result = 0, lastType = node.nodeType;\n                while (node = node.previousSibling) {\n                    var nodeType = node.nodeType;\n                    if (nodeType != 3 || lastType != nodeType) {\n                        result++;\n                    }\n                    lastType = nodeType;\n                }\n                return result;\n            },\n            getEditable: function (range) {\n                var root = range.commonAncestorContainer;\n                while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == 'false'))) {\n                    root = root.parentNode;\n                }\n                return root;\n            },\n            restoreHtml: function () {\n                var that = this;\n                dom.removeChildren(that.body);\n                that.body.innerHTML = that.html;\n                if (that.immutables && !that.serializedImmutables.empty) {\n                    Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n                }\n            },\n            offset: function (node, value) {\n                if (node.nodeType == 3) {\n                    while ((node = node.previousSibling) && node.nodeType == 3) {\n                        value += node.nodeValue.length;\n                    }\n                }\n                return value;\n            },\n            nodeToPath: function (node) {\n                var path = [];\n                while (node != this.rootNode) {\n                    path.push(this.index(node));\n                    node = node.parentNode;\n                }\n                return path;\n            },\n            toRangePoint: function (range, start, path, denormalizedOffset) {\n                var node = this.rootNode, length = path.length, offset = denormalizedOffset;\n                while (length-- && node) {\n                    node = node.childNodes[path[length]];\n                }\n                while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n                    offset -= node.nodeValue.length;\n                    node = node.nextSibling;\n                }\n                if (node && offset >= 0) {\n                    range[start ? 'setStart' : 'setEnd'](node, offset);\n                }\n            },\n            toRange: function () {\n                var that = this, result = that.range.cloneRange();\n                that.toRangePoint(result, true, that.startContainer, that.startOffset);\n                that.toRangePoint(result, false, that.endContainer, that.endOffset);\n                return result;\n            }\n        });\n        var Marker = Class.extend({\n            init: function () {\n                this.caret = null;\n            },\n            addCaret: function (range) {\n                var that = this;\n                var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n                range.insertNode(caret);\n                dom.stripBomNode(caret.previousSibling);\n                dom.stripBomNode(caret.nextSibling);\n                range.selectNode(caret);\n                return caret;\n            },\n            removeCaret: function (range) {\n                var that = this, previous = that.caret.previousSibling, startOffset = 0;\n                if (previous) {\n                    startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n                }\n                var container = that.caret.parentNode;\n                var containerIndex = previous ? findNodeIndex(previous) : 0;\n                dom.remove(that.caret);\n                normalize(container);\n                var node = container.childNodes[containerIndex];\n                if (isDataNode(node)) {\n                    range.setStart(node, startOffset);\n                } else if (node) {\n                    var textNode = dom.lastTextNode(node);\n                    if (textNode) {\n                        range.setStart(textNode, textNode.nodeValue.length);\n                    } else {\n                        range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n                    }\n                } else {\n                    if (!browser.msie && !container.innerHTML) {\n                        container.innerHTML = '<br _moz_dirty=\"\" />';\n                    }\n                    range.selectNodeContents(container);\n                }\n                range.collapse(true);\n            },\n            add: function (range, expand) {\n                var that = this;\n                var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n                var doc = RangeUtils.documentFromRange(range);\n                if (expand && range.collapsed) {\n                    that.addCaret(range);\n                    range = RangeUtils.expand(range);\n                }\n                var rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(false);\n                that.end = dom.create(doc, 'span', { className: 'k-marker' });\n                rangeBoundary.insertNode(that.end);\n                rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(true);\n                that.start = that.end.cloneNode(true);\n                rangeBoundary.insertNode(that.start);\n                that._removeDeadMarkers(that.start, that.end);\n                if (collapsed) {\n                    var bom = doc.createTextNode('\\uFEFF');\n                    dom.insertAfter(bom.cloneNode(), that.start);\n                    dom.insertBefore(bom, that.end);\n                }\n                normalize(range.commonAncestorContainer);\n                range.setStartBefore(that.start);\n                range.setEndAfter(that.end);\n                return range;\n            },\n            _removeDeadMarkers: function (start, end) {\n                if (start.previousSibling && start.previousSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(start.previousSibling);\n                }\n                if (end.nextSibling && end.nextSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(end.nextSibling);\n                }\n            },\n            _normalizedIndex: function (node) {\n                var index = findNodeIndex(node);\n                var pointer = node;\n                while (pointer.previousSibling) {\n                    if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                        index--;\n                    }\n                    pointer = pointer.previousSibling;\n                }\n                return index;\n            },\n            remove: function (range) {\n                var that = this, start = that.start, end = that.end, shouldNormalizeStart, shouldNormalizeEnd, shouldNormalize;\n                normalize(range.commonAncestorContainer);\n                while (!start.nextSibling && start.parentNode) {\n                    start = start.parentNode;\n                }\n                while (!end.previousSibling && end.parentNode) {\n                    end = end.parentNode;\n                }\n                shouldNormalizeStart = start.previousSibling && start.previousSibling.nodeType == 3 && (start.nextSibling && start.nextSibling.nodeType == 3);\n                shouldNormalizeEnd = end.previousSibling && end.previousSibling.nodeType == 3 && (end.nextSibling && end.nextSibling.nodeType == 3);\n                shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n                start = start.nextSibling;\n                end = end.previousSibling;\n                var isBomSelected = start === end && dom.isBom(start);\n                if (isBomSelected && start.length > 1) {\n                    start.nodeValue = start.nodeValue.charAt(0);\n                }\n                var collapsed = isBomSelected;\n                var collapsedToStart = false;\n                if (start == that.end) {\n                    collapsedToStart = !!that.start.previousSibling;\n                    start = end = that.start.previousSibling || that.end.nextSibling;\n                    collapsed = true;\n                }\n                dom.remove(that.start);\n                dom.remove(that.end);\n                if (!start || !end) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    range.collapse(true);\n                    return;\n                }\n                var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n                var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n                if (start.nodeType == 3) {\n                    while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                        start = start.previousSibling;\n                        startOffset += start.nodeValue.length;\n                    }\n                }\n                if (end.nodeType == 3) {\n                    while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                        end = end.previousSibling;\n                        endOffset += end.nodeValue.length;\n                    }\n                }\n                var startParent = start.parentNode;\n                var endParent = end.parentNode;\n                var startIndex = this._normalizedIndex(start);\n                var endIndex = this._normalizedIndex(end);\n                normalize(startParent);\n                if (start.nodeType == 3) {\n                    start = startParent.childNodes[startIndex];\n                }\n                normalize(endParent);\n                if (end.nodeType == 3) {\n                    end = endParent.childNodes[endIndex];\n                }\n                if (collapsed) {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n                    }\n                    range.collapse(true);\n                } else {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range.setStartBefore(start);\n                    }\n                    if (end.nodeType == 3) {\n                        range.setEnd(end, endOffset);\n                    } else {\n                        range.setEndAfter(end);\n                    }\n                }\n                if (that.caret) {\n                    that.removeCaret(range);\n                }\n            }\n        });\n        var boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n        var RangeUtils = {\n            nodes: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                return nodes;\n            },\n            textNodes: function (range) {\n                return new RangeEnumerator(range).enumerate();\n            },\n            editableTextNodes: function (range) {\n                var nodes = [], immutableParent = Editor.Immutables && Editor.Immutables.immutableParent;\n                if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n                    nodes = new ImmutablesRangeEnumerator(range).enumerate();\n                }\n                return nodes;\n            },\n            documentFromRange: function (range) {\n                var startContainer = range.startContainer;\n                return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n            },\n            createRange: function (document) {\n                return document.createRange();\n            },\n            selectRange: function (range) {\n                var image = RangeUtils.image(range);\n                if (image) {\n                    range.setStartAfter(image);\n                    range.setEndAfter(image);\n                }\n                var selection = SelectionUtils.selectionFromRange(range);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            },\n            stringify: function (range) {\n                return kendo.format('{0}:{1} - {2}:{3}', dom.name(range.startContainer), range.startOffset, dom.name(range.endContainer), range.endOffset);\n            },\n            split: function (range, node, trim) {\n                function partition(start) {\n                    var partitionRange = range.cloneRange();\n                    partitionRange.collapse(start);\n                    partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n                    var contents = partitionRange.extractContents();\n                    if (trim) {\n                        contents = dom.trim(contents);\n                    }\n                    dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n                }\n                partition(true);\n                partition(false);\n            },\n            mapAll: function (range, map) {\n                var nodes = [];\n                new RangeIterator(range).traverse(function (node) {\n                    var mapped = map(node);\n                    if (mapped && $.inArray(mapped, nodes) < 0) {\n                        nodes.push(mapped);\n                    }\n                });\n                return nodes;\n            },\n            getAll: function (range, predicate) {\n                var selector = predicate;\n                if (typeof predicate == 'string') {\n                    predicate = function (node) {\n                        return dom.is(node, selector);\n                    };\n                }\n                return RangeUtils.mapAll(range, function (node) {\n                    if (predicate(node)) {\n                        return node;\n                    }\n                });\n            },\n            getMarkers: function (range) {\n                return RangeUtils.getAll(range, function (node) {\n                    return node.className == 'k-marker';\n                });\n            },\n            image: function (range) {\n                var nodes = RangeUtils.getAll(range, 'img');\n                if (nodes.length == 1) {\n                    return nodes[0];\n                }\n            },\n            isStartOf: function (originalRange, node) {\n                if (originalRange.startOffset !== 0) {\n                    return false;\n                }\n                var range = originalRange.cloneRange();\n                while (range.startOffset === 0 && range.startContainer != node) {\n                    var index = dom.findNodeIndex(range.startContainer);\n                    var parent = range.startContainer.parentNode;\n                    while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                        index--;\n                    }\n                    range.setStart(parent, index);\n                }\n                return range.startOffset === 0 && range.startContainer == node;\n            },\n            isEndOf: function (originalRange, node) {\n                var range = originalRange.cloneRange();\n                range.collapse(false);\n                var start = range.startContainer;\n                if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n                    range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n                    range.collapse(true);\n                }\n                range.setEnd(node, dom.getNodeLength(node));\n                var nodes = [];\n                function visit(node) {\n                    if (!dom.insignificant(node) && !(dom.isDataNode(node) && /^[\\ufeff]*$/.test(node.nodeValue))) {\n                        nodes.push(node);\n                    }\n                }\n                new RangeIterator(range).traverse(visit);\n                return !nodes.length;\n            },\n            wrapSelectedElements: function (range) {\n                var startEditable = dom.editableParent(range.startContainer);\n                var endEditable = dom.editableParent(range.endContainer);\n                while (range.startOffset === 0 && range.startContainer != startEditable) {\n                    range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n                }\n                function isEnd(offset, container) {\n                    var length = dom.getNodeLength(container);\n                    if (offset == length) {\n                        return true;\n                    }\n                    for (var i = offset; i < length; i++) {\n                        if (!dom.insignificant(container.childNodes[i])) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n                while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n                    range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n                }\n                return range;\n            },\n            expand: function (range) {\n                var result = range.cloneRange();\n                var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n                var endContainer = result.endContainer.childNodes[result.endOffset];\n                if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n                    return result;\n                }\n                var beforeCaret = startContainer.nodeValue;\n                var afterCaret = endContainer.nodeValue;\n                if (!beforeCaret || !afterCaret) {\n                    return result;\n                }\n                var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                var endOffset = afterCaret.search(boundary);\n                if (!startOffset || !endOffset) {\n                    return result;\n                }\n                endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n                startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n                result.setStart(startContainer, startOffset);\n                result.setEnd(endContainer, endOffset);\n                return result;\n            },\n            isExpandable: function (range) {\n                var node = range.startContainer;\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                if (node == rangeDocument || node == rangeDocument.body) {\n                    return false;\n                }\n                var result = range.cloneRange();\n                var value = node.nodeValue;\n                if (!value) {\n                    return false;\n                }\n                var beforeCaret = value.substring(0, result.startOffset);\n                var afterCaret = value.substring(result.startOffset);\n                var startOffset = 0, endOffset = 0;\n                if (beforeCaret) {\n                    startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                }\n                if (afterCaret) {\n                    endOffset = afterCaret.search(boundary);\n                }\n                return startOffset && endOffset;\n            }\n        };\n        extend(Editor, {\n            SelectionUtils: SelectionUtils,\n            W3CRange: W3CRange,\n            RangeIterator: RangeIterator,\n            W3CSelection: W3CSelection,\n            RangeEnumerator: RangeEnumerator,\n            RestorePoint: RestorePoint,\n            Marker: Marker,\n            RangeUtils: RangeUtils\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/immutables', ['editor/range'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, dom = Editor.Dom, template = kendo.template, RangeUtils = Editor.RangeUtils, complexBlocks = [\n                'ul',\n                'ol',\n                'tbody',\n                'thead',\n                'table'\n            ], toolsToBeUpdated = [\n                'bold',\n                'italic',\n                'underline',\n                'strikethrough',\n                'superscript',\n                'subscript',\n                'forecolor',\n                'backcolor',\n                'fontname',\n                'fontsize',\n                'createlink',\n                'unlink',\n                'autolink',\n                'addcolumnleft',\n                'addcolumnright',\n                'addrowabove',\n                'addrowbelow',\n                'deleterow',\n                'deletecolumn',\n                'mergecells',\n                'formatting',\n                'cleanformatting'\n            ], IMMUTABALE = 'k-immutable', IMMUTABALE_MARKER_SELECTOR = '[' + IMMUTABALE + ']', IMMUTABLE_SELECTOR = '[contenteditable=\\'false\\']';\n        var rootCondition = function (node) {\n            return $(node).is('body,.k-editor');\n        };\n        var immutable = function (node) {\n            return node.getAttribute && node.getAttribute('contenteditable') == 'false';\n        };\n        var immutableParent = function (node) {\n            return dom.closestBy(node, immutable, rootCondition);\n        };\n        var expandImmutablesIn = function (range) {\n            var startImmutableParent = immutableParent(range.startContainer);\n            var endImmutableParent = immutableParent(range.endContainer);\n            if (startImmutableParent || endImmutableParent) {\n                if (startImmutableParent) {\n                    range.setStartBefore(startImmutableParent);\n                }\n                if (endImmutableParent) {\n                    range.setEndAfter(endImmutableParent);\n                }\n            }\n        };\n        var immutablesContext = function (range) {\n            if (immutableParent(range.commonAncestorContainer)) {\n                return true;\n            } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n                var editableNodes = RangeUtils.editableTextNodes(range);\n                if (editableNodes.length === 0) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        var randomId = function (length) {\n            var result = '';\n            var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n            for (var i = length || 10; i > 0; --i) {\n                result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n            }\n            return result;\n        };\n        var removeImmutables = function (root) {\n            var serializedImmutables = { empty: true }, nodeName, id, serialized;\n            $(root).find(IMMUTABLE_SELECTOR).each(function (i, node) {\n                nodeName = dom.name(node);\n                id = randomId();\n                serialized = '<' + nodeName + ' ' + IMMUTABALE + '=\\'' + id + '\\'></' + nodeName + '>';\n                serializedImmutables[id] = {\n                    node: node,\n                    style: $(node).attr('style')\n                };\n                serializedImmutables.empty = false;\n                $(node).replaceWith(serialized);\n            });\n            return serializedImmutables;\n        };\n        var restoreImmutables = function (root, serializedImmutables) {\n            var id, immutable;\n            $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function (i, node) {\n                id = node.getAttribute(IMMUTABALE);\n                immutable = serializedImmutables[id];\n                $(node).replaceWith(immutable.node);\n                if (immutable.style != $(immutable.node).attr('style')) {\n                    $(immutable.node).removeAttr('style').attr('style', immutable.style);\n                }\n            });\n        };\n        var deletingKey = function (keyCode) {\n            var keys = kendo.keys;\n            return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n        };\n        var updateToolOptions = function (tool) {\n            var options = tool ? tool.options : undefined;\n            if (options && options.finder) {\n                options.finder._initOptions({ immutables: true });\n            }\n        };\n        var Immutables = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.serializedImmutables = {};\n                this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n                var tools = editor.toolbar.tools;\n                updateToolOptions(tools.justifyLeft);\n                updateToolOptions(tools.justifyCenter);\n                updateToolOptions(tools.justifyRight);\n                updateToolOptions(tools.justifyFull);\n            },\n            serialize: function (node) {\n                var result = this._toHtml(node), id;\n                if (result.indexOf(IMMUTABALE) === -1) {\n                    id = this.randomId();\n                    result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n                } else {\n                    id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n                }\n                this.serializedImmutables[id] = node;\n                return result;\n            },\n            _toHtml: function (node) {\n                var serialization = this.options.serialization;\n                var serializationType = typeof serialization;\n                var nodeName;\n                switch (serializationType) {\n                case 'string':\n                    return template(serialization)(node);\n                case 'function':\n                    return serialization(node);\n                default:\n                    nodeName = dom.name(node);\n                    return '<' + nodeName + '></' + nodeName + '>';\n                }\n            },\n            deserialize: function (node) {\n                var that = this;\n                var deserialization = this.options.deserialization;\n                $(IMMUTABALE_MARKER_SELECTOR, node).each(function () {\n                    var id = this.getAttribute(IMMUTABALE);\n                    var immutable = that.serializedImmutables[id];\n                    if (kendo.isFunction(deserialization)) {\n                        deserialization(this, immutable);\n                    }\n                    $(this).replaceWith(immutable);\n                });\n                that.serializedImmutables = {};\n            },\n            randomId: function (length) {\n                return randomId(length);\n            },\n            keydown: function (e, range) {\n                var isDeleting = deletingKey(e.keyCode);\n                var shouldCancelEvent = isDeleting && this._cancelDeleting(e, range) || !isDeleting && this._cancelTyping(e, range);\n                if (shouldCancelEvent) {\n                    e.preventDefault();\n                    return true;\n                }\n            },\n            _cancelTyping: function (e, range) {\n                var editor = this.editor;\n                var keyboard = editor.keyboard;\n                return range.collapsed && !keyboard.typingInProgress && keyboard.isTypingKey(e) && immutablesContext(range);\n            },\n            _cancelDeleting: function (e, range) {\n                var keys = kendo.keys;\n                var backspace = e.keyCode === keys.BACKSPACE;\n                var del = e.keyCode == keys.DELETE;\n                if (!backspace && !del) {\n                    return false;\n                }\n                var cancelDeleting = false;\n                if (range.collapsed) {\n                    if (immutablesContext(range)) {\n                        return true;\n                    }\n                    var immutable = this.nextImmutable(range, del);\n                    if (immutable && backspace) {\n                        var closestSelectionLi = dom.closest(range.commonAncestorContainer, 'li');\n                        if (closestSelectionLi) {\n                            var closestImmutableLi = dom.closest(immutable, 'li');\n                            if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                                return cancelDeleting;\n                            }\n                        }\n                    }\n                    if (immutable && !dom.tableCell(immutable)) {\n                        if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                            while (immutable && immutable.parentNode.childNodes.length == 1) {\n                                immutable = immutable.parentNode;\n                            }\n                            if (dom.tableCell(immutable)) {\n                                return cancelDeleting;\n                            }\n                            this._removeImmutable(immutable, range);\n                        }\n                        cancelDeleting = true;\n                    }\n                }\n                return cancelDeleting;\n            },\n            nextImmutable: function (range, forwards) {\n                var commonContainer = range.commonAncestorContainer;\n                if (dom.isBom(commonContainer) || (forwards && RangeUtils.isEndOf(range, commonContainer) || !forwards && RangeUtils.isStartOf(range, commonContainer))) {\n                    var next = this._nextNode(commonContainer, forwards);\n                    if (next && dom.isBlock(next) && !immutableParent(next)) {\n                        while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                            next = next.children[forwards ? 0 : next.children.length - 1];\n                        }\n                    }\n                    return immutableParent(next);\n                }\n            },\n            _removeImmutable: function (immutable, range) {\n                var editor = this.editor;\n                var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n                dom.remove(immutable);\n                Editor._finishUpdate(editor, startRestorePoint);\n            },\n            _nextNode: function (node, forwards) {\n                var sibling = forwards ? 'nextSibling' : 'previousSibling';\n                var current = node, next;\n                while (current && !next) {\n                    next = current[sibling];\n                    if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                        current = next;\n                        next = current[sibling];\n                    }\n                    if (!next) {\n                        current = current.parentNode;\n                    }\n                }\n                return next;\n            }\n        });\n        Immutables.immutable = immutable;\n        Immutables.immutableParent = immutableParent;\n        Immutables.expandImmutablesIn = expandImmutablesIn;\n        Immutables.immutablesContext = immutablesContext;\n        Immutables.toolsToBeUpdated = toolsToBeUpdated;\n        Immutables.removeImmutables = removeImmutables;\n        Immutables.restoreImmutables = restoreImmutables;\n        Editor.Immutables = Immutables;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/command', ['editor/immutables'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, dom = editorNS.Dom, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, extend = $.extend;\n        function finishUpdate(editor, startRestorePoint) {\n            var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n            var command = new GenericCommand(startRestorePoint, endRestorePoint);\n            command.editor = editor;\n            editor.undoRedoStack.push(command);\n            return endRestorePoint;\n        }\n        var Command = Class.extend({\n            init: function (options) {\n                this.options = options;\n                this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n                this.marker = new Marker();\n                this.formatter = options.formatter;\n            },\n            getRange: function () {\n                return this.restorePoint.toRange();\n            },\n            lockRange: function (expand) {\n                return this.marker.add(this.getRange(), expand);\n            },\n            releaseRange: function (range) {\n                this.marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            undo: function () {\n                var point = this.restorePoint;\n                point.restoreHtml();\n                this.editor.selectRange(point.toRange());\n            },\n            redo: function () {\n                this.exec();\n            },\n            createDialog: function (content, options) {\n                var editor = this.editor;\n                return $(content).appendTo(document.body).kendoWindow(extend({}, editor.options.dialogOptions, options)).closest('.k-window').toggleClass('k-rtl', kendo.support.isRtl(editor.wrapper)).end();\n            },\n            exec: function () {\n                var range = this.lockRange(true);\n                this.formatter.editor = this.editor;\n                this.formatter.toggle(range);\n                this.releaseRange(range);\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            expandImmutablesIn: function (range) {\n                if (this.immutables()) {\n                    kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                    this.restorePoint = new RestorePoint(range, this.editor.body);\n                }\n            }\n        });\n        var GenericCommand = Class.extend({\n            init: function (startRestorePoint, endRestorePoint) {\n                this.body = startRestorePoint.body;\n                this.startRestorePoint = startRestorePoint;\n                this.endRestorePoint = endRestorePoint;\n            },\n            redo: function () {\n                dom.removeChildren(this.body);\n                this.body.innerHTML = this.endRestorePoint.html;\n                this.editor.selectRange(this.endRestorePoint.toRange());\n            },\n            undo: function () {\n                dom.removeChildren(this.body);\n                this.body.innerHTML = this.startRestorePoint.html;\n                this.editor.selectRange(this.startRestorePoint.toRange());\n            }\n        });\n        extend(editorNS, {\n            _finishUpdate: finishUpdate,\n            Command: Command,\n            GenericCommand: GenericCommand\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/toolbar', ['editor/range'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var ui = kendo.ui;\n        var editorNS = ui.editor;\n        var Widget = ui.Widget;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var keys = kendo.keys;\n        var NS = '.kendoEditor';\n        var EditorUtils = editorNS.EditorUtils;\n        var ToolTemplate = editorNS.ToolTemplate;\n        var Tool = editorNS.Tool;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var OVERFLOWANCHOR = 'overflowAnchor';\n        var focusable = '.k-tool-group:visible .k-tool:not(.k-state-disabled),' + '.k-tool.k-overflow-anchor:visible,' + '.k-tool-group:visible .k-colorpicker:not(input),' + '.k-tool-group:visible .k-selectbox,' + '.k-tool-group:visible .k-dropdown,' + '.k-tool-group:visible .k-combobox .k-input';\n        var toolNamesByCssClass = {\n            'k-i-sup-script': 'superscript',\n            'k-i-sub-script': 'subscript',\n            'k-i-align-left': 'justifyLeft',\n            'k-i-align-center': 'justifyCenter',\n            'k-i-align-right': 'justifyRight',\n            'k-i-align-justify': 'justifyFull',\n            'k-i-list-unordered': 'insertUnorderedList',\n            'k-i-list-ordered': 'insertOrderedList',\n            'k-i-list-roman-upper': 'insertUpperRomanList',\n            'k-i-list-roman-lower': 'insertLowerRomanList',\n            'k-i-import': 'import',\n            'k-i-indent-increase': 'indent',\n            'k-i-indent-decrease': 'outdent',\n            'k-i-link-horizontal': 'createLink',\n            'k-i-unlink-horizontal': 'unlink',\n            'k-i-image': 'insertImage',\n            'k-i-file-add': 'insertFile',\n            'k-i-html': 'viewHtml',\n            'k-i-foreground-color': 'foreColor',\n            'k-i-paint': 'backColor',\n            'k-i-table-insert': 'createTable',\n            'k-i-table-column-insert-left': 'addColumnLeft',\n            'k-i-table-column-insert-right': 'addColumnRight',\n            'k-i-table-row-insert-above': 'addRowAbove',\n            'k-i-table-row-insert-below': 'addRowBelow',\n            'k-i-table-row-delete': 'deleteRow',\n            'k-i-table-column-delete': 'deleteColumn',\n            'k-i-table-properties': 'tableWizard',\n            'k-i-table-wizard': 'tableWizardInsert',\n            'k-i-table-position-left': 'tableAlignLeft',\n            'k-i-table-position-center': 'tableAlignCenter',\n            'k-i-table-position-right': 'tableAlignRight',\n            'k-i-clear-css': 'cleanFormatting',\n            'k-i-cells-merge-horizontally': 'mergeCellsHorizontally',\n            'k-i-cells-merge-vertically': 'mergeCellsVertically',\n            'k-i-cell-split-horizontally': 'splitCellHorizontally',\n            'k-i-cell-split-vertically': 'splitCellVertically',\n            'k-i-copy-format': 'copyFormat',\n            'k-i-apply-format': 'applyFormat'\n        };\n        var OverflowAnchorTool = Tool.extend({\n            initialize: function (ui, options) {\n                var toolbar = options.editor.toolbar;\n                ui.attr('aria-controls', options.editor.element.attr('id')).on('click', $.proxy(function () {\n                    this.overflowPopup.toggle();\n                }, toolbar));\n            },\n            options: { name: OVERFLOWANCHOR },\n            command: $.noop,\n            update: $.noop,\n            destroy: $.noop\n        });\n        EditorUtils.registerTool(OVERFLOWANCHOR, new OverflowAnchorTool({\n            key: '',\n            ctrl: true,\n            template: new ToolTemplate({ template: EditorUtils.overflowAnchorTemplate })\n        }));\n        var Toolbar = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                options = extend({}, options, { name: 'EditorToolbar' });\n                Widget.fn.init.call(that, element, options);\n                if (options.popup) {\n                    that._initPopup();\n                }\n                if (options.resizable && options.resizable.toolbar) {\n                    that._resizeHandler = kendo.onResize(function () {\n                        that.resize(true);\n                    });\n                    that.element.addClass('k-toolbar-resizable');\n                }\n            },\n            events: ['execute'],\n            groups: {\n                basic: [\n                    'bold',\n                    'italic',\n                    'underline',\n                    'strikethrough'\n                ],\n                scripts: [\n                    'subscript',\n                    'superscript'\n                ],\n                alignment: [\n                    'justifyLeft',\n                    'justifyCenter',\n                    'justifyRight',\n                    'justifyFull'\n                ],\n                links: [\n                    'insertImage',\n                    'insertFile',\n                    'createLink',\n                    'unlink'\n                ],\n                lists: [\n                    'insertUnorderedList',\n                    'insertOrderedList',\n                    'insertUpperRomanList',\n                    'insertLowerRomanList',\n                    'indent',\n                    'outdent'\n                ],\n                tablesInsert: ['createTable'],\n                tablesAddDelete: [\n                    'addColumnLeft',\n                    'addColumnRight',\n                    'addRowAbove',\n                    'addRowBelow',\n                    'deleteRow',\n                    'deleteColumn'\n                ],\n                tablesMerge: [\n                    'mergeCellsHorizontally',\n                    'mergeCellsVertically',\n                    'splitCellHorizontally',\n                    'splitCellVertically'\n                ],\n                tablesPosition: [\n                    'tableAlignLeft',\n                    'tableAlignCenter',\n                    'tableAlignRight'\n                ],\n                advanced: [\n                    'viewHtml',\n                    'cleanFormatting',\n                    'print',\n                    'pdf',\n                    'exportAs',\n                    'import'\n                ],\n                fonts: [\n                    'fontName',\n                    'fontSize'\n                ],\n                colors: [\n                    'foreColor',\n                    'backColor'\n                ],\n                formatPainter: [\n                    'copyFormat',\n                    'applyFormat'\n                ]\n            },\n            overflowFlaseTools: [\n                'formatting',\n                'fontName',\n                'fontSize',\n                'foreColor',\n                'backColor',\n                'insertHtml'\n            ],\n            _initPopup: function () {\n                var that = this;\n                this.window = $(this.element).wrap('<div class=\\'editorToolbarWindow\\' />').parent().prepend('<span class=\\'k-editortoolbar-dragHandle\\'><span class=\\'k-icon k-i-handler-drag\\'></span></span>').kendoWindow({\n                    title: false,\n                    resizable: false,\n                    draggable: { dragHandle: '.k-editortoolbar-dragHandle' },\n                    animation: {\n                        open: { effects: 'fade:in' },\n                        close: { effects: 'fade:out' }\n                    },\n                    minHeight: 42,\n                    visible: false,\n                    autoFocus: false,\n                    actions: [],\n                    dragend: function () {\n                        this._moved = true;\n                    }\n                }).on('mousedown', function (e) {\n                    if (!$(e.target).is('.k-icon')) {\n                        that.preventPopupHide = true;\n                    }\n                }).on('focusout', function () {\n                    that.options.editor.element.focusout();\n                }).data('kendoWindow');\n            },\n            _toggleOverflowStyles: function (element, show) {\n                element.find('> li').toggleClass('k-item', show).find('.k-tool:not(.k-state-disabled), .k-overflow-button').toggleClass('k-overflow-button', show);\n            },\n            _initOverflowPopup: function (ui) {\n                var that = this;\n                var popupTemplate = '<ul class=\\'k-editor-overflow-popup k-overflow-container k-list-container\\'></ul>';\n                that.overflowPopup = $(popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    origin: kendo.support.isRtl(that.element) ? 'bottom left' : 'bottom right',\n                    position: kendo.support.isRtl(that.element) ? 'top left' : 'top right',\n                    copyAnchorStyles: false,\n                    open: function (e) {\n                        if (this.element.is(':empty')) {\n                            e.preventDefault();\n                        }\n                        that._toggleOverflowStyles(this.element, true);\n                        ui.attr('aria-expanded', true);\n                    },\n                    close: function () {\n                        ui.attr('aria-expanded', false);\n                    },\n                    activate: proxy(that.focusOverflowPopup, that)\n                }).data('kendoPopup');\n            },\n            items: function () {\n                var isResizable = this.options.resizable && this.options.resizable.toolbar, popup, result;\n                result = this.element.children().find('> *, select');\n                if (isResizable) {\n                    popup = this.overflowPopup;\n                    result = result.add(popup.element.children().find('> *'));\n                }\n                return result;\n            },\n            focused: function () {\n                var active = kendo._activeElement(), popup = this.window, overflowPopup = this.overflowPopup;\n                return popup && $(active).closest(popup.wrapper).length || overflowPopup && overflowPopup.visible();\n            },\n            toolById: function (name) {\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (id.toLowerCase() == name) {\n                        return tools[id];\n                    }\n                }\n            },\n            toolGroupFor: function (toolName) {\n                var i, groups = this.groups;\n                if (this.isCustomTool(toolName)) {\n                    return 'custom';\n                }\n                for (i in groups) {\n                    if ($.inArray(toolName, groups[i]) >= 0) {\n                        return i;\n                    }\n                }\n            },\n            bindTo: function (editor) {\n                var that = this, window = that.window;\n                if (that._editor) {\n                    that._editor.unbind('select', proxy(that.resize, that));\n                }\n                that._editor = editor;\n                if (that.options.resizable && that.options.resizable.toolbar) {\n                    editor.options.tools.push(OVERFLOWANCHOR);\n                }\n                that.tools = that.expandTools(editor.options.tools);\n                that.render();\n                that.element.find('.k-combobox .k-input').keydown(function (e) {\n                    var combobox = $(this).closest('.k-combobox').data('kendoComboBox'), key = e.keyCode;\n                    if (key == keys.RIGHT || key == keys.LEFT) {\n                        combobox.close();\n                    } else if (key == keys.DOWN) {\n                        if (!combobox.dropDown.isOpened()) {\n                            e.stopImmediatePropagation();\n                            combobox.open();\n                        }\n                    }\n                });\n                that._attachEvents();\n                that.items().each(function initializeTool() {\n                    var toolName = that._toolName(this), tool = toolName !== 'moreVertical' ? that.tools[toolName] : that.tools.overflowAnchor, options = tool && tool.options, messages = editor.options.messages, description = options && options.tooltip || messages[toolName], ui = $(this);\n                    if (!tool || !tool.initialize) {\n                        return;\n                    }\n                    if (toolName == 'fontSize' || toolName == 'fontName') {\n                        var inheritText = messages[toolName + 'Inherit'];\n                        ui.find('input').val(inheritText).end().find('span.k-input').text(inheritText).end();\n                    }\n                    tool.initialize(ui, {\n                        title: that._appendShortcutSequence(description, tool),\n                        editor: that._editor\n                    });\n                    ui.closest('.k-widget', that.element).addClass('k-editor-widget');\n                    ui.closest('.k-colorpicker', that.element).next('.k-colorpicker').addClass('k-editor-widget');\n                });\n                editor.bind('select', proxy(that.resize, that));\n                that.update();\n                if (window) {\n                    window.wrapper.css({\n                        top: '',\n                        left: '',\n                        width: ''\n                    });\n                }\n            },\n            show: function () {\n                var that = this, window = that.window, editorOptions = that.options.editor, wrapper, editorElement, editorOffset, browser = kendo.support.browser;\n                if (window) {\n                    wrapper = window.wrapper;\n                    editorElement = editorOptions.element;\n                    if (!wrapper.is(':visible') || !that.window.options.visible) {\n                        if (!wrapper[0].style.width) {\n                            wrapper.width(this._getWindowWidth());\n                        }\n                        if (!window._moved) {\n                            editorOffset = editorElement.offset();\n                            wrapper.css({\n                                top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.window.element.css('padding-bottom'), 10)),\n                                left: Math.max(0, parseInt(editorOffset.left, 10))\n                            });\n                        }\n                        if ((browser.msie || browser.edge) && that._overlaps(editorElement)) {\n                            setTimeout(function () {\n                                window.open();\n                            }, 0);\n                        } else {\n                            window.open();\n                        }\n                    }\n                }\n            },\n            _getWindowWidth: function () {\n                var that = this, wrapper = that.window.wrapper, editorElement = that.options.editor.element;\n                return outerWidth(editorElement) - parseInt(wrapper.css('border-left-width'), 10) - parseInt(wrapper.css('border-right-width'), 10);\n            },\n            _overlaps: function (box) {\n                var toolbarWrapper = this.window.wrapper, toolbarWrapperOffset = toolbarWrapper.offset(), toolbarWrapperLeft = toolbarWrapperOffset.left, toolbarWrapperTop = toolbarWrapperOffset.top, boxOffset = box.offset(), boxOffsetLeft = boxOffset.left, boxOffsetTop = boxOffset.top;\n                return !(boxOffsetLeft + box.width() < toolbarWrapperLeft || boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() || boxOffsetTop + box.height() < toolbarWrapperTop || boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n            },\n            hide: function () {\n                if (this.window) {\n                    this.window.close();\n                }\n            },\n            focus: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.attr(TABINDEX, tabIndex || 0).focus().find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            focusOverflowPopup: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.overflowPopup.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.closest('.k-animation-container').addClass('k-overflow-wrapper');\n                element.attr(TABINDEX, tabIndex || 0).find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            _appendShortcutSequence: function (localizedText, tool) {\n                if (!tool.key) {\n                    return localizedText;\n                }\n                var res = localizedText + ' (';\n                if (tool.ctrl) {\n                    res += 'Ctrl + ';\n                }\n                if (tool.shift) {\n                    res += 'Shift + ';\n                }\n                if (tool.alt) {\n                    res += 'Alt + ';\n                }\n                res += tool.key + ')';\n                return res;\n            },\n            _nativeTools: [\n                'insertLineBreak',\n                'insertParagraph',\n                'redo',\n                'undo',\n                'autoLink'\n            ],\n            tools: {},\n            isCustomTool: function (toolName) {\n                return !(toolName in kendo.ui.Editor.defaultTools);\n            },\n            expandTools: function (tools) {\n                var currentTool, i, nativeTools = this._nativeTools, options, defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools), result = {}, name;\n                for (i = 0; i < tools.length; i++) {\n                    currentTool = tools[i];\n                    name = currentTool.name;\n                    if ($.isPlainObject(currentTool)) {\n                        if (name && defaultTools[name]) {\n                            result[name] = extend({}, defaultTools[name]);\n                            extend(result[name].options, currentTool);\n                        } else {\n                            options = extend({\n                                cssClass: 'k-i-gear',\n                                type: 'button',\n                                title: ''\n                            }, currentTool);\n                            if (!options.name) {\n                                options.name = 'custom';\n                            }\n                            options.cssClass = 'k-' + options.name;\n                            if (!options.template && options.type == 'button') {\n                                options.template = editorNS.EditorUtils.buttonTemplate;\n                                options.title = options.title || options.tooltip;\n                            }\n                            result[name] = { options: options };\n                        }\n                    } else if (defaultTools[currentTool]) {\n                        result[currentTool] = defaultTools[currentTool];\n                    }\n                }\n                for (i = 0; i < nativeTools.length; i++) {\n                    if (!result[nativeTools[i]]) {\n                        result[nativeTools[i]] = defaultTools[nativeTools[i]];\n                    }\n                }\n                return result;\n            },\n            render: function () {\n                var that = this, tools = that.tools, options, template, toolElement, toolName, editorElement = that._editor.element, element = that.element.empty(), groupName, newGroupName, toolConfig = that._editor.options.tools, group, i, groupPosition = 0, resizable = that.options.resizable && that.options.resizable.toolbar, overflowFlaseTools = this.overflowFlaseTools;\n                function stringify(template) {\n                    var result = '';\n                    if (template.getHtml) {\n                        result = template.getHtml();\n                    } else {\n                        if (!$.isFunction(template)) {\n                            template = kendo.template(template);\n                        }\n                        result = template(options);\n                    }\n                    return kendo.trim(result);\n                }\n                function endGroup() {\n                    if (group.children().length) {\n                        if (resizable) {\n                            group.data('position', groupPosition);\n                            groupPosition++;\n                        }\n                        group.appendTo(element);\n                    }\n                }\n                function startGroup(toolName) {\n                    if (toolName !== OVERFLOWANCHOR) {\n                        group = $('<li class=\\'k-tool-group\\' role=\\'presentation\\' />');\n                        group.data('overflow', $.inArray(toolName, overflowFlaseTools) === -1 ? true : false);\n                    } else {\n                        group = $('<li class=\\'k-overflow-tools\\' />');\n                    }\n                }\n                element.empty();\n                if (toolConfig.length) {\n                    toolName = toolConfig[0].name || toolConfig[0];\n                }\n                startGroup(toolName, overflowFlaseTools);\n                for (i = 0; i < toolConfig.length; i++) {\n                    toolName = toolConfig[i].name || toolConfig[i];\n                    options = tools[toolName] && tools[toolName].options;\n                    if (!options && $.isPlainObject(toolName)) {\n                        options = toolName;\n                    }\n                    template = options && options.template;\n                    if (toolName == 'break') {\n                        endGroup();\n                        $('<li class=\\'k-row-break\\' />').appendTo(that.element);\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (!template) {\n                        continue;\n                    }\n                    newGroupName = that.toolGroupFor(toolName);\n                    if (groupName != newGroupName || toolName == OVERFLOWANCHOR) {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                        groupName = newGroupName;\n                    }\n                    if (toolName == OVERFLOWANCHOR) {\n                        template.options.title = that.options.messages.overflowAnchor;\n                    }\n                    template = stringify(template);\n                    toolElement = $(template).appendTo(group);\n                    if (newGroupName == 'custom') {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (options.exec && toolElement.hasClass('k-tool')) {\n                        toolElement.click(proxy(options.exec, editorElement[0]));\n                    }\n                }\n                endGroup();\n                $(that.element).children(':has(> .k-tool)').not('.k-overflow-tools').addClass('k-button-group');\n                that.updateGroups();\n                if (resizable) {\n                    that._initOverflowPopup(that.element.find('.k-overflow-anchor'));\n                }\n                that.angular('compile', function () {\n                    return { elements: that.element };\n                });\n            },\n            updateGroups: function () {\n                $(this.element).children().not('.k-overflow-tools').each(function () {\n                    $(this).children().removeClass('k-group-start k-group-end').first().addClass('k-group-start').end().last().addClass('k-group-end').end();\n                });\n            },\n            decorateFrom: function (body) {\n                this.items().filter('.k-decorated').each(function () {\n                    var selectBox = $(this).data('kendoSelectBox');\n                    if (selectBox) {\n                        selectBox.decorate(body);\n                    }\n                });\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (tools[id].destroy) {\n                        tools[id].destroy();\n                    }\n                }\n                if (this.window) {\n                    this.window.destroy();\n                }\n                if (this._resizeHandler) {\n                    kendo.unbindResize(this._resizeHandler);\n                }\n                if (this.overflowPopup) {\n                    this.overflowPopup.destroy();\n                }\n            },\n            _attachEvents: function () {\n                var that = this, popupElement = that.overflowPopup ? that.overflowPopup.element : $([]);\n                that.attachToolsEvents(that.element.add(popupElement));\n            },\n            attachToolsEvents: function (element) {\n                var that = this, buttons = '[role=button].k-tool', enabledButtons = buttons + ':not(.k-state-disabled)' + ', [role=button].k-i-import:not(.k-state-disabled)', disabledButtons = buttons + '.k-state-disabled', dropdown = '.k-dropdown', colorpicker = '.k-colorpicker', editorTools = [\n                        buttons,\n                        dropdown,\n                        colorpicker\n                    ].join(',');\n                element.off(NS).on('mouseenter' + NS, enabledButtons, function () {\n                    $(this).addClass('k-state-hover');\n                }).on('mouseleave' + NS, enabledButtons, function () {\n                    $(this).removeClass('k-state-hover');\n                }).on('mousedown' + NS, editorTools, function (e) {\n                    e.preventDefault();\n                }).on('keydown' + NS, focusable, function (e) {\n                    var current = this;\n                    var resizable = that.options.resizable && that.options.resizable.toolbar;\n                    var direction = kendo.support.isRtl(that.element) ? -1 : 1;\n                    var focusableItems;\n                    var focusElement, currentContainer, keyCode = e.keyCode;\n                    function move(direction, container, constrain) {\n                        var tools = container.find(focusable);\n                        var index = tools.index(current) + direction;\n                        if (constrain) {\n                            index = Math.max(0, Math.min(tools.length - 1, index));\n                        }\n                        return tools[index];\n                    }\n                    if (keyCode == keys.RIGHT || keyCode == keys.LEFT) {\n                        if (!$(current).is('.k-dropdown')) {\n                            focusElement = move(keyCode == keys.RIGHT ? 1 * direction : -1 * direction, that.element, true);\n                        } else {\n                            focusElement = $(current);\n                        }\n                    } else if (resizable && (keyCode == keys.UP || keyCode == keys.DOWN)) {\n                        focusElement = move(keyCode == keys.DOWN ? 1 : -1, that.overflowPopup.element, true);\n                    } else if (keyCode == keys.HOME) {\n                        focusElement = that.element.find(focusable)[0];\n                        e.preventDefault();\n                    } else if (keyCode == keys.END) {\n                        focusableItems = that.element.find(focusable).filter(function () {\n                            return $(this).css('visibility') !== 'hidden';\n                        });\n                        focusElement = focusableItems[focusableItems.length - 1];\n                        e.preventDefault();\n                    } else if (keyCode == keys.ESC) {\n                        if (that.overflowPopup && that.overflowPopup.visible()) {\n                            that.overflowPopup.close();\n                        }\n                        focusElement = that._editor;\n                    } else if (keyCode == keys.TAB && !(e.ctrlKey || e.altKey)) {\n                        if (resizable) {\n                            currentContainer = $(current.parentElement).hasClass('k-overflow-tool-group') ? that.overflowPopup.element : that.element;\n                        } else {\n                            currentContainer = that.element;\n                        }\n                        if (e.shiftKey) {\n                            focusElement = move(-1, currentContainer);\n                        } else {\n                            focusElement = move(1, currentContainer);\n                            if (!focusElement || $(focusElement).closest('.k-overflow-tools').css('visibility') === 'hidden') {\n                                focusElement = that._editor;\n                            }\n                        }\n                    }\n                    if (focusElement) {\n                        e.preventDefault();\n                        focusElement.focus();\n                    }\n                    if ((keyCode === keys.ENTER || keyCode === keys.SPACEBAR) && ($(current).is('button') || $(current).is('a')) && !$(current).attr('href')) {\n                        that._executeToolCommand(current, e);\n                    }\n                }).on('click' + NS, enabledButtons, function (e) {\n                    that._executeToolCommand(this, e);\n                }).on('click' + NS, disabledButtons, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _executeToolCommand: function (toolElement, e) {\n                var that = this;\n                var button = $(toolElement);\n                e.preventDefault();\n                e.stopPropagation();\n                button.removeClass('k-state-hover');\n                if (!button.is('[data-popup]')) {\n                    that._editor.exec(that._toolName(toolElement));\n                }\n            },\n            _toolName: function (element) {\n                if (!element) {\n                    return;\n                }\n                var className = element.className;\n                if (/k-tool\\b/i.test(className)) {\n                    className = element.firstChild.className;\n                }\n                var tool = $.grep(className.split(' '), function (x) {\n                    return !/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(x);\n                });\n                if (tool[0]) {\n                    var toolname = tool[0];\n                    if (toolNamesByCssClass[toolname]) {\n                        toolname = toolNamesByCssClass[toolname];\n                    }\n                    if (toolname.indexOf('k-i-') >= 0) {\n                        return kendo.toCamelCase(toolname.substring(toolname.indexOf('k-i-') + 4));\n                    } else {\n                        return toolname.substring(toolname.lastIndexOf('-') + 1);\n                    }\n                }\n                return 'custom';\n            },\n            refreshTools: function () {\n                var that = this, editor = that._editor, range = editor.getRange(), nodes = editorNS.RangeUtils.textNodes(range), immutables = editor.options.immutables, immutablesContext = that._immutablesContext(range);\n                nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n                if (!nodes.length) {\n                    nodes = [range.startContainer];\n                }\n                that.items().each(function () {\n                    var tool = that.tools[that._toolName(this)];\n                    if (tool) {\n                        var ui = $(this);\n                        if (tool.update) {\n                            tool.update(ui, nodes);\n                        }\n                        if (immutables) {\n                            that._updateImmutablesState(tool, ui, immutablesContext);\n                        }\n                    }\n                });\n                this.update();\n            },\n            _immutablesContext: function (range) {\n                if (this._editor.options.immutables) {\n                    if (range.collapsed) {\n                        return editorNS.Immutables.immutablesContext(range);\n                    } else {\n                        return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                    }\n                }\n            },\n            _updateImmutablesState: function (tool, ui, immutablesContext) {\n                var name = tool.name;\n                var uiElement = ui;\n                var trackImmutables = tool.options.trackImmutables;\n                if (trackImmutables === undefined) {\n                    trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n                }\n                if (trackImmutables) {\n                    var display = immutablesContext ? 'none' : '';\n                    if (!ui.is('.k-tool')) {\n                        var uiData = ui.data();\n                        for (var key in uiData) {\n                            if (key.match(/^kendo[A-Z][a-zA-Z]*/)) {\n                                var widget = uiData[key];\n                                uiElement = widget.wrapper;\n                                break;\n                            }\n                        }\n                    }\n                    uiElement.css('display', display);\n                    var groupUi = uiElement.closest('li');\n                    if (groupUi.children(':visible').length === 0) {\n                        groupUi.css('display', display);\n                    }\n                }\n            },\n            update: function () {\n                this.updateGroups();\n            },\n            _resize: function (e) {\n                var containerWidth = e.width;\n                var resizable = this.options.resizable && this.options.resizable.toolbar;\n                var popup = this.overflowPopup;\n                var editorElement = this.options.editor.element;\n                var toolbarWindow = this.window;\n                this.refreshTools();\n                if (!resizable) {\n                    return;\n                }\n                if (toolbarWindow) {\n                    toolbarWindow.wrapper.width(this._getWindowWidth());\n                    if (!toolbarWindow._moved) {\n                        toolbarWindow.wrapper.css({ left: Math.max(0, parseInt(editorElement.offset().left, 10)) });\n                    }\n                }\n                if (popup.visible()) {\n                    popup.close(true);\n                }\n                this._refreshWidths();\n                this._shrink(containerWidth);\n                this._stretch(containerWidth);\n                this._toggleOverflowStyles(this.element, false);\n                this._toggleOverflowStyles(this.overflowPopup.element, true);\n                this.element.children('li.k-overflow-tools').css('visibility', popup.element.is(':empty') ? 'hidden' : 'visible');\n            },\n            _refreshWidths: function () {\n                this.element.children('li').each(function (idx, element) {\n                    var group = $(element);\n                    group.data('outerWidth', outerWidth(group, true));\n                });\n            },\n            _shrink: function (width) {\n                var group, visibleGroups;\n                if (width < this._groupsWidth()) {\n                    visibleGroups = this._visibleGroups().filter(':not(.k-overflow-tools)');\n                    for (var i = visibleGroups.length - 1; i >= 0; i--) {\n                        group = visibleGroups.eq(i);\n                        if (width > this._groupsWidth()) {\n                            break;\n                        } else {\n                            this._hideGroup(group);\n                        }\n                    }\n                }\n            },\n            _stretch: function (width) {\n                var group, hiddenGroups;\n                if (width > this._groupsWidth()) {\n                    hiddenGroups = this._hiddenGroups();\n                    for (var i = 0; i < hiddenGroups.length; i++) {\n                        group = hiddenGroups.eq(i);\n                        if (width < this._groupsWidth() || !this._showGroup(group, width)) {\n                            break;\n                        }\n                    }\n                }\n            },\n            _hiddenGroups: function () {\n                var popup = this.overflowPopup;\n                var hiddenGroups = this.element.children('li.k-tool-group').filter(':hidden');\n                hiddenGroups = hiddenGroups.add(popup.element.children('li'));\n                hiddenGroups.sort(function (a, b) {\n                    return $(a).data('position') > $(b).data('position') ? 1 : -1;\n                });\n                return hiddenGroups;\n            },\n            _visibleGroups: function () {\n                return this.element.children('li.k-tool-group, li.k-overflow-tools').filter(':visible');\n            },\n            _groupsWidth: function () {\n                var width = 0;\n                this._visibleGroups().each(function () {\n                    width += $(this).data('outerWidth');\n                });\n                return Math.ceil(width);\n            },\n            _hideGroup: function (group) {\n                if (group.data('overflow')) {\n                    var popup = this.overflowPopup;\n                    group.detach().prependTo(popup.element).addClass('k-overflow-tool-group');\n                } else {\n                    group.addClass('k-hidden');\n                }\n            },\n            _showGroup: function (group, width) {\n                var position, previous, groupWidth;\n                if (group.hasClass('k-state-disabled')) {\n                    return true;\n                }\n                if (group.hasClass('k-overflow-tool-group')) {\n                    groupWidth = group.data('outerWidth');\n                } else {\n                    group.removeClass('k-hidden');\n                    groupWidth = outerWidth(group, true);\n                    group.addClass('k-hidden');\n                }\n                if (group.length && width > this._groupsWidth() + groupWidth) {\n                    if (group.hasClass('k-overflow-tool-group')) {\n                        position = group.data('position');\n                        if (position === 0) {\n                            group.detach().prependTo(this.element);\n                        } else {\n                            previous = this.element.children().filter(function (idx, element) {\n                                return $(element).data('position') === position - 1;\n                            });\n                            group.detach().insertAfter(previous);\n                        }\n                        group.removeClass('k-overflow-tool-group');\n                    } else {\n                        group.removeClass('k-hidden');\n                    }\n                    return true;\n                }\n                return false;\n            }\n        });\n        $.extend(editorNS, { Toolbar: Toolbar });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/viewhtml', ['editor/command'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, dom = Editor.Dom;\n        var ViewHtmlCommand = Command.extend({\n            init: function (options) {\n                var cmd = this;\n                cmd.options = options;\n                Command.fn.init.call(cmd, options);\n                cmd.attributes = null;\n                cmd.async = true;\n            },\n            exec: function () {\n                var that = this, editor = that.editor, options = editor.options, messages = editor.options.messages, dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body), textarea = '.k-editor-textarea', content, comments;\n                options.serialization.immutables = editor.immutables;\n                comments = dom.getAllComments(editor.body);\n                content = EditorUtils.cacheComments(editor.value(), comments);\n                content = ViewHtmlCommand.indent(content);\n                content = EditorUtils.retrieveComments(content, comments);\n                options.serialization.immutables = undefined;\n                function apply(e) {\n                    options.deserialization.immutables = editor.immutables;\n                    editor.value(dialog.find(textarea).val());\n                    options.deserialization.immutables = undefined;\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    editor.trigger('change');\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.data('kendoWindow').destroy();\n                    if (editor.immutables) {\n                        editor.immutables.serializedImmutables = {};\n                    }\n                    editor.focus();\n                }\n                this.createDialog(dialog, {\n                    title: messages.viewHtml,\n                    width: 600,\n                    height: 400,\n                    resizable: true,\n                    close: close,\n                    visible: false\n                }).find(textarea).val(content).end().find('.k-dialog-update').click(apply).end().find('.k-dialog-close').click(close).end().data('kendoWindow').center().open();\n                dialog.find(textarea).focus();\n            }\n        });\n        extend(ViewHtmlCommand, {\n            template: '' + '<div class=\\'k-editor-dialog k-popup-edit-form k-viewhtml-dialog\\'>' + '<textarea class=\\'k-textarea k-editor-textarea\\'></textarea>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\\'k-dialog-update k-button k-primary\\'>#: dialogUpdate #</button>' + '<button class=\\'k-dialog-close k-button\\'>#: dialogCancel #</button>' + '</div>' + '</div>',\n            indent: function (content) {\n                return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi, '</$1>\\n').replace(/<(ul|ol)([^>]*)><li/gi, '<$1$2>\\n<li').replace(/<br \\/>/gi, '<br />\\n').replace(/\\n$/, '');\n            }\n        });\n        kendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n        Editor.EditorUtils.registerTool('viewHtml', new Tool({\n            command: ViewHtmlCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'View HTML'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/format', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, Tool = Editor.Tool, Command = Editor.Command, EditorUtils = Editor.EditorUtils;\n        var FormatCommand = Command.extend({\n            init: function (options) {\n                options.formatter = options.formatter();\n                var finder = options.formatter.finder;\n                if (finder && EditorUtils.formatByName('immutable', finder.format)) {\n                    finder._initOptions({ immutables: options.immutables });\n                }\n                Command.fn.init.call(this, options);\n            }\n        });\n        var FormatTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n            },\n            command: function (commandArguments) {\n                var that = this;\n                return new FormatCommand(extend(commandArguments, { formatter: that.options.formatter }));\n            },\n            update: function (ui, nodes) {\n                var isFormatted = this.options.finder.isFormatted(nodes);\n                ui.toggleClass('k-state-selected', isFormatted);\n                ui.attr('aria-pressed', isFormatted);\n            }\n        });\n        $.extend(Editor, {\n            FormatCommand: FormatCommand,\n            FormatTool: FormatTool\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/inlineformat', ['editor/plugins/format'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, EditorUtils = Editor.EditorUtils, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, extend = $.extend, registerTool = Editor.EditorUtils.registerTool, registerFormat = Editor.EditorUtils.registerFormat, MOUSEDOWN_NS = 'mousedown.kendoEditor', KEYDOWN_NS = 'keydown.kendoEditor', KMARKER = 'k-marker';\n        var InlineFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            numberOfSiblings: function (referenceNode) {\n                var textNodesCount = 0, elementNodesCount = 0, markerCount = 0, parentNode = referenceNode.parentNode, node;\n                for (node = parentNode.firstChild; node; node = node.nextSibling) {\n                    if (node != referenceNode) {\n                        if (node.className == KMARKER) {\n                            markerCount++;\n                        } else if (node.nodeType == 3) {\n                            textNodesCount++;\n                        } else {\n                            elementNodesCount++;\n                        }\n                    }\n                }\n                if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n                    return 0;\n                } else {\n                    return elementNodesCount + textNodesCount;\n                }\n            },\n            findSuitable: function (sourceNode, skip) {\n                if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n                    return null;\n                }\n                var node = sourceNode.parentNode;\n                var tags = this.format[0].tags;\n                while (!dom.ofType(node, tags)) {\n                    if (this.numberOfSiblings(node) > 0) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, attrEquals = dom.attrEquals, i, len, node, tags, attributes;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                        return node;\n                    }\n                    while (node) {\n                        node = dom.parentOfType(node, tags);\n                        if (node && attrEquals(node, attributes)) {\n                            return node;\n                        }\n                    }\n                }\n                return null;\n            },\n            isFormatted: function (nodes) {\n                var i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    if (this.findFormat(nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n        });\n        var InlineFormatter = Class.extend({\n            init: function (format, values) {\n                this.finder = new InlineFormatFinder(format);\n                this.attributes = extend({}, format[0].attr, values);\n                this.tag = format[0].tags[0];\n            },\n            wrap: function (node) {\n                return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n            },\n            activate: function (range, nodes) {\n                if (this.finder.isFormatted(nodes)) {\n                    this.split(range);\n                    this.remove(nodes);\n                } else {\n                    this.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n                var nodes = textNodes(range);\n                if (nodes.length > 0) {\n                    this.activate(range, nodes);\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            apply: function (nodes) {\n                var formatNodes = [];\n                var i, l, node, formatNode;\n                if (nodes.length > 1) {\n                    for (i = 0, l = nodes.length; i < l; i++) {\n                        node = nodes[i];\n                        formatNode = this.format(node, true);\n                        formatNodes.push(formatNode);\n                    }\n                } else {\n                    node = nodes[0];\n                    formatNode = this.format(node, false);\n                }\n                this.consolidate(formatNodes);\n            },\n            format: function (node, outerMostInline) {\n                var formatNode = this.finder.findSuitable(node);\n                var attributes = this.attributes;\n                var styleAttr = attributes ? attributes.style || {} : {};\n                if (formatNode) {\n                    if (dom.is(formatNode, 'font')) {\n                        if (styleAttr.color) {\n                            formatNode.removeAttribute('color');\n                        }\n                        if (styleAttr.fontName) {\n                            formatNode.removeAttribute('face');\n                        }\n                        if (styleAttr.fontSize) {\n                            formatNode.removeAttribute('size');\n                        }\n                    }\n                    dom.attr(formatNode, attributes);\n                } else {\n                    while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true' && outerMostInline) {\n                        node = node.parentNode;\n                    }\n                    formatNode = this.wrap(node);\n                }\n                return formatNode;\n            },\n            remove: function (nodes) {\n                var i, l, formatNode;\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        if (this.attributes && this.attributes.style) {\n                            dom.unstyle(formatNode, this.attributes.style);\n                            if (!formatNode.style.cssText && !formatNode.attributes['class']) {\n                                dom.unwrap(formatNode);\n                            }\n                        } else {\n                            dom.unwrap(formatNode);\n                        }\n                    }\n                }\n            },\n            split: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                var l = nodes.length;\n                var i, formatNode;\n                if (l > 0) {\n                    for (i = 0; i < l; i++) {\n                        formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            RangeUtils.split(range, formatNode, true);\n                        }\n                    }\n                }\n            },\n            consolidate: function (nodes) {\n                var node, last;\n                while (nodes.length > 1) {\n                    node = nodes.pop();\n                    last = nodes[nodes.length - 1];\n                    if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                        last.appendChild(node.previousSibling);\n                    }\n                    if (node.tagName == last.tagName && node.previousSibling == last && node.style.cssText == last.style.cssText && node.className === last.className) {\n                        while (node.firstChild) {\n                            last.appendChild(node.firstChild);\n                        }\n                        dom.remove(node);\n                    }\n                }\n            }\n        });\n        var GreedyInlineFormatFinder = InlineFormatFinder.extend({\n            init: function (format, greedyProperty) {\n                this.format = format;\n                this.greedyProperty = greedyProperty;\n                InlineFormatFinder.fn.init.call(this, format);\n            },\n            getInlineCssValue: function (node) {\n                var attributes = node.attributes;\n                var trim = kendo.trim;\n                var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n                var propertyAndValue, property, value;\n                if (!attributes) {\n                    return;\n                }\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n                    attributeValue = attribute.nodeValue;\n                    if (attribute.specified && name == 'style') {\n                        css = trim(attributeValue || node.style.cssText).split(';');\n                        for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                            pair = css[cssIndex];\n                            if (pair.length) {\n                                propertyAndValue = pair.split(':');\n                                property = trim(propertyAndValue[0].toLowerCase());\n                                value = trim(propertyAndValue[1]);\n                                if (property != this.greedyProperty) {\n                                    continue;\n                                }\n                                return property.indexOf('color') >= 0 ? dom.toHex(value) : value;\n                            }\n                        }\n                    }\n                }\n            },\n            getFormatInner: function (node) {\n                var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n                var parents = $node.parentsUntil('[contentEditable]').addBack().toArray().reverse();\n                var i, len, value;\n                for (i = 0, len = parents.length; i < len; i++) {\n                    value = this.greedyProperty == 'className' ? parents[i].className : this.getInlineCssValue(parents[i]);\n                    if (value) {\n                        return value;\n                    }\n                }\n                return 'inherit';\n            },\n            getFormat: function (nodes) {\n                var result = this.getFormatInner(nodes[0]), i, len;\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != this.getFormatInner(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result;\n            },\n            isFormatted: function (nodes) {\n                return this.getFormat(nodes) !== '';\n            }\n        });\n        var GreedyInlineFormatter = InlineFormatter.extend({\n            init: function (format, values, greedyProperty) {\n                InlineFormatter.fn.init.call(this, format, values);\n                this.values = values;\n                this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n                if (greedyProperty) {\n                    this.greedyProperty = kendo.toCamelCase(greedyProperty);\n                }\n            },\n            activate: function (range, nodes) {\n                var greedyProperty = this.greedyProperty;\n                var action = 'apply';\n                this.split(range);\n                if (greedyProperty && this.values.style[greedyProperty] == 'inherit') {\n                    action = 'remove';\n                }\n                this[action](nodes);\n            }\n        });\n        var InlineFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new InlineFormatFinder(options.format),\n                    formatter: function () {\n                        return new InlineFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        var DelayedExecutionTool = Tool.extend({\n            update: function (ui, nodes) {\n                var list = ui.data(this.type);\n                list.close();\n                list.value(this.finder.getFormat(nodes));\n            }\n        });\n        var FontTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.type = kendo.support.browser.msie || kendo.support.touch ? 'kendoDropDownList' : 'kendoComboBox';\n                this.format = [{\n                        tags: [\n                            'span',\n                            'font'\n                        ]\n                    }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, toolName = options.name, dataSource, range, defaultValue = [];\n                if (options.defaultValue) {\n                    defaultValue = [{\n                            text: editor.options.messages[options.defaultValue[0].text],\n                            value: options.defaultValue[0].value\n                        }];\n                }\n                dataSource = defaultValue.concat(options.items ? options.items : editor.options[toolName] || []);\n                ui.attr({ title: initOptions.title });\n                ui[this.type]({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: dataSource,\n                    change: function () {\n                        editor._range = range;\n                        Tool.exec(editor, toolName, this.value());\n                    },\n                    close: function () {\n                        setTimeout(function () {\n                            editor._deleteSavedRange();\n                        }, 0);\n                    },\n                    highlightFirst: false\n                });\n                ui.closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n                var widget = ui.data(this.type);\n                widget.value('inherit');\n                widget.wrapper.on(MOUSEDOWN_NS, '.k-select,.k-input', function () {\n                    var newRange = editor.getRange();\n                    range = editor._containsRange(newRange) ? newRange : range;\n                }).on(KEYDOWN_NS, function (e) {\n                    if (e.keyCode === kendo.keys.ENTER) {\n                        editor._deleteSavedRange();\n                        e.preventDefault();\n                    }\n                });\n            }\n        });\n        var ColorTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.format = [{\n                        tags: [\n                            'span',\n                            'font'\n                        ]\n                    }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            options: { palette: 'websafe' },\n            update: function () {\n                this._widget.close();\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var that = this, editor = initOptions.editor, toolName = this.name, options = extend({}, ColorTool.fn.options, this.options), palette = options.palette, columns = options.columns;\n                ui = this._widget = new kendo.ui.ColorPicker(ui, {\n                    toolIcon: 'k-icon k-i-' + EditorUtils.getToolCssClass(options.name),\n                    palette: palette,\n                    columns: columns,\n                    change: function () {\n                        var color = ui.value();\n                        if (kendo.support.browser.msie && that.storedRange && that._inputFocused) {\n                            editor.selectRange(that.storedRange);\n                        }\n                        if (color) {\n                            Tool.exec(editor, toolName, color);\n                        }\n                        delete that.storedRange;\n                        delete that._inputFocused;\n                        editor.focus();\n                    },\n                    open: function (e) {\n                        var picker = e.sender;\n                        that.storedRange = editor.getRange();\n                        picker._popup.element.on(MOUSEDOWN_NS, function (e) {\n                            if (!$(e.target).is('input.k-color-value')) {\n                                e.preventDefault();\n                            }\n                        });\n                        if (!picker._popup.element.is('[unselectable=\\'on\\']')) {\n                            picker._popup.element.attr({ unselectable: 'on' }).find('*:not(input)').attr('unselectable', 'on').end().find('input').on('focus', function () {\n                                that._inputFocused = true;\n                            });\n                        }\n                    },\n                    close: function (e) {\n                        e.sender._popup.element.off(MOUSEDOWN_NS);\n                        if (kendo.support.browser.msie && that.storedRange && that._inputFocused) {\n                            editor.selectRange(that.storedRange);\n                        }\n                    },\n                    activate: function (e) {\n                        e.preventDefault();\n                        if (e.sender._value.toCssRgba() === 'rgba(255, 255, 255, 0)') {\n                            return;\n                        }\n                        ui.trigger('change');\n                    }\n                });\n                ui.wrapper.attr({\n                    title: initOptions.title,\n                    unselectable: 'on'\n                }).find('*:not(input)').attr('unselectable', 'on');\n                ui.value('transparent');\n            }\n        });\n        extend(Editor, {\n            InlineFormatFinder: InlineFormatFinder,\n            InlineFormatter: InlineFormatter,\n            DelayedExecutionTool: DelayedExecutionTool,\n            GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n            GreedyInlineFormatter: GreedyInlineFormatter,\n            InlineFormatTool: InlineFormatTool,\n            FontTool: FontTool,\n            ColorTool: ColorTool\n        });\n        registerFormat('bold', [\n            {\n                tags: [\n                    'strong',\n                    'b'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontWeight: 'bold' } }\n            }\n        ]);\n        registerTool('bold', new InlineFormatTool({\n            key: 'B',\n            ctrl: true,\n            format: formats.bold,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Bold'\n            })\n        }));\n        registerFormat('italic', [\n            {\n                tags: [\n                    'em',\n                    'i'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontStyle: 'italic' } }\n            }\n        ]);\n        registerTool('italic', new InlineFormatTool({\n            key: 'I',\n            ctrl: true,\n            format: formats.italic,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Italic'\n            })\n        }));\n        registerFormat('underline', [\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'underline' } }\n            },\n            { tags: ['u'] }\n        ]);\n        registerTool('underline', new InlineFormatTool({\n            key: 'U',\n            ctrl: true,\n            format: formats.underline,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Underline'\n            })\n        }));\n        registerFormat('strikethrough', [\n            {\n                tags: [\n                    'del',\n                    'strike'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'line-through' } }\n            }\n        ]);\n        registerTool('strikethrough', new InlineFormatTool({\n            format: formats.strikethrough,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Strikethrough'\n            })\n        }));\n        registerFormat('superscript', [{ tags: ['sup'] }]);\n        registerTool('superscript', new InlineFormatTool({\n            format: formats.superscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Superscript'\n            })\n        }));\n        registerFormat('subscript', [{ tags: ['sub'] }]);\n        registerTool('subscript', new InlineFormatTool({\n            format: formats.subscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Subscript'\n            })\n        }));\n        registerTool('foreColor', new ColorTool({\n            cssAttr: 'color',\n            domAttr: 'color',\n            name: 'foreColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Color'\n            })\n        }));\n        registerTool('backColor', new ColorTool({\n            cssAttr: 'background-color',\n            domAttr: 'backgroundColor',\n            name: 'backColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Background Color'\n            })\n        }));\n        registerTool('fontName', new FontTool({\n            cssAttr: 'font-family',\n            domAttr: 'fontFamily',\n            name: 'fontName',\n            defaultValue: [{\n                    text: 'fontNameInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Name'\n            })\n        }));\n        registerTool('fontSize', new FontTool({\n            cssAttr: 'font-size',\n            domAttr: 'fontSize',\n            name: 'fontSize',\n            defaultValue: [{\n                    text: 'fontSizeInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Size'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/link', ['editor/plugins/inlineformat'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InlineFormatter = Editor.InlineFormatter, InlineFormatFinder = Editor.InlineFormatFinder, textNodes = RangeUtils.textNodes, editableTextNodes = RangeUtils.editableTextNodes, registerTool = Editor.EditorUtils.registerTool, keys = kendo.keys;\n        var HTTP_PROTOCOL = 'http://';\n        var protocolRegExp = /^\\w*:\\/\\//;\n        var endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n        var LinkFormatFinder = Class.extend({\n            findSuitable: function (sourceNode) {\n                return dom.parentOfType(sourceNode, ['a']);\n            }\n        });\n        var LinkFormatter = Class.extend({\n            init: function () {\n                this.finder = new LinkFormatFinder();\n            },\n            apply: function (range, attributes) {\n                var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n                var markers, doc, formatter, a, parent;\n                if (attributes.innerText) {\n                    doc = RangeUtils.documentFromRange(range);\n                    markers = RangeUtils.getMarkers(range);\n                    range.deleteContents();\n                    a = dom.create(doc, 'a', attributes);\n                    range.insertNode(a);\n                    parent = a.parentNode;\n                    if (dom.name(parent) == 'a') {\n                        dom.insertAfter(a, parent);\n                    }\n                    if (dom.emptyNode(parent)) {\n                        dom.remove(parent);\n                    }\n                    var ref = a;\n                    for (var i = 0; i < markers.length; i++) {\n                        dom.insertAfter(markers[i], ref);\n                        ref = markers[i];\n                    }\n                    if (markers.length) {\n                        dom.insertBefore(doc.createTextNode('\\uFEFF'), markers[1] || markers[0]);\n                        dom.insertAfter(doc.createTextNode('\\uFEFF'), markers[1] || markers[0]);\n                        range.setStartBefore(markers[0]);\n                        range.setEndAfter(markers[markers.length - 1]);\n                    }\n                } else {\n                    formatter = new InlineFormatter([{ tags: ['a'] }], attributes);\n                    formatter.finder = this.finder;\n                    formatter.apply(nodes);\n                }\n            }\n        });\n        var UnlinkCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: function (range) {\n                        var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                        new InlineFormatter([{ tags: ['a'] }]).remove(nodes);\n                    }\n                };\n                this.options = options;\n                Command.fn.init.call(this, options);\n            }\n        });\n        var LinkCommand = Command.extend({\n            init: function (options) {\n                var that;\n                this.options = options;\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n                if (!options.url) {\n                    this.attributes = null;\n                    this.async = true;\n                } else {\n                    this.exec = function () {\n                        this.formatter.immutables = that && that.immutables();\n                        this.formatter.apply(options.range, {\n                            href: options.url,\n                            innerText: options.text || options.url,\n                            target: options.target\n                        });\n                    };\n                }\n            },\n            _dialogTemplate: function () {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-url\\'>#: messages.linkWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-textbox\\' id=\\'k-editor-link-url\\'>' + '</div>' + '<div class=\\'k-edit-label k-editor-link-text-row\\'>' + '<label for=\\'k-editor-link-text\\'>#: messages.linkText #</label>' + '</div>' + '<div class=\\'k-edit-field k-editor-link-text-row\\'>' + '<input type=\\'text\\' class=\\'k-textbox\\' id=\\'k-editor-link-text\\'>' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-title\\'>#: messages.linkToolTip #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-textbox\\' id=\\'k-editor-link-title\\'>' + '</div>' + '<div class=\\'k-edit-label\\'></div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'checkbox\\' class=\\'k-checkbox\\' id=\\'k-editor-link-target\\'>' + '<label for=\\'k-editor-link-target\\' class=\\'k-checkbox-label\\'>#: messages.linkOpenInNewWindow #</label>' + '</div>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>')({ messages: this.editor.options.messages });\n            },\n            exec: function () {\n                var messages = this.editor.options.messages;\n                this._initialText = '';\n                this._range = this.lockRange(true);\n                this.formatter.immutables = this.immutables();\n                var nodes = textNodes(this._range);\n                var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n                var img = nodes.length && dom.name(nodes[0]) == 'img';\n                var dialog = this.createDialog(this._dialogTemplate(), {\n                    title: messages.createLink,\n                    close: proxy(this._close, this),\n                    visible: false\n                });\n                if (a) {\n                    this._range.selectNodeContents(a);\n                    nodes = textNodes(this._range);\n                }\n                this._initialText = this.linkText(nodes);\n                dialog.find('.k-dialog-insert').click(proxy(this._apply, this)).end().find('.k-dialog-close').click(proxy(this._close, this)).end().find('.k-edit-field input').keydown(proxy(this._keydown, this)).end().find('#k-editor-link-url').val(this.linkUrl(a)).end().find('#k-editor-link-text').val(this._initialText).end().find('#k-editor-link-title').val(a ? a.title : '').end().find('#k-editor-link-target').attr('checked', a ? a.target == '_blank' : false).end().find('.k-editor-link-text-row').toggle(!img);\n                this._dialog = dialog.data('kendoWindow').center().open();\n                $('#k-editor-link-url', dialog).focus().select();\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                if (e.keyCode == keys.ENTER) {\n                    this._apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    this._close(e);\n                }\n            },\n            _apply: function (e) {\n                var element = this._dialog.element;\n                var href = $('#k-editor-link-url', element).val();\n                var title, text, target;\n                var textInput = $('#k-editor-link-text', element);\n                if (href && href != HTTP_PROTOCOL) {\n                    if (href.indexOf('@') > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                        href = 'mailto:' + href;\n                    }\n                    this.attributes = { href: href };\n                    title = $('#k-editor-link-title', element).val();\n                    if (title) {\n                        this.attributes.title = title;\n                    }\n                    if (textInput.is(':visible')) {\n                        text = kendo.trim(textInput.val());\n                        if (!text && !this._initialText) {\n                            this.attributes.innerText = href;\n                        } else if (text && text !== this._initialText) {\n                            this.attributes.innerText = dom.stripBom(text);\n                        }\n                    }\n                    target = $('#k-editor-link-target', element).is(':checked');\n                    this.attributes.target = target ? '_blank' : null;\n                    this.formatter.apply(this._range, this.attributes);\n                }\n                this._close(e);\n                if (this.change) {\n                    this.change();\n                }\n            },\n            _close: function (e) {\n                e.preventDefault();\n                this._dialog.destroy();\n                dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n                this.releaseRange(this._range);\n            },\n            linkUrl: function (anchor) {\n                if (anchor) {\n                    return anchor.getAttribute('href', 2);\n                }\n                return HTTP_PROTOCOL;\n            },\n            linkText: function (nodes) {\n                var text = '';\n                var i;\n                for (i = 0; i < nodes.length; i++) {\n                    text += nodes[i].nodeValue;\n                }\n                return dom.stripBom(text || '');\n            },\n            redo: function () {\n                var range = this.lockRange(true);\n                this.formatter.apply(range, this.attributes);\n                this.releaseRange(range);\n            }\n        });\n        var AutoLinkCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n            },\n            exec: function () {\n                var detectedLink = this.detectLink();\n                if (!detectedLink) {\n                    return;\n                }\n                var range = this.getRange();\n                var linkMarker = new kendo.ui.editor.Marker();\n                var linkRange = range.cloneRange();\n                linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n                linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n                range = this.lockRange();\n                linkMarker.add(linkRange);\n                this.formatter.apply(linkRange, { href: this._ensureWebProtocol(detectedLink.text) });\n                linkMarker.remove(linkRange);\n                this.releaseRange(range);\n            },\n            detectLink: function () {\n                var range = this.getRange();\n                var startNode = range.startContainer;\n                var startOffset = range.startOffset;\n                var prev = startNode.previousSibling;\n                if (!prev && (dom.isBom(startNode) && !startNode.nextSibling || !startOffset && dom.isDataNode(startNode))) {\n                    startNode = startNode.parentNode;\n                    startOffset = 0;\n                }\n                var traverser = new LeftDomTextTraverser({\n                    node: startNode,\n                    offset: startOffset,\n                    cancelAtNode: function (node) {\n                        return node && dom.name(node) === 'a';\n                    }\n                });\n                var detection = new DomTextLinkDetection(traverser);\n                return detection.detectLink();\n            },\n            changesContent: function () {\n                return !!this.detectLink();\n            },\n            _ensureWebProtocol: function (linkText) {\n                var hasProtocol = this._hasProtocolPrefix(linkText);\n                return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n            },\n            _hasProtocolPrefix: function (linkText) {\n                return protocolRegExp.test(linkText);\n            },\n            _prefixWithWebProtocol: function (linkText) {\n                return HTTP_PROTOCOL + linkText;\n            }\n        });\n        var UnlinkTool = Tool.extend({\n            init: function (options) {\n                this.options = options;\n                this.finder = new InlineFormatFinder([{ tags: ['a'] }]);\n                Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                ui.toggleClass('k-state-disabled', !this.finder.isFormatted(nodes)).removeClass('k-state-hover');\n            }\n        });\n        var DomTextLinkDetection = Class.extend({\n            init: function (traverser) {\n                this.traverser = traverser;\n                this.start = DomPos();\n                this.end = DomPos();\n                this.text = '';\n            },\n            detectLink: function () {\n                var node = this.traverser.node;\n                var offset = this.traverser.offset;\n                if (dom.isDataNode(node)) {\n                    var text = node.data.substring(0, offset);\n                    if (/\\s{2}$/.test(dom.stripBom(text))) {\n                        return;\n                    }\n                } else if (offset === 0) {\n                    var p = dom.closestEditableOfType(node, dom.blockElements);\n                    if (p && p.previousSibling) {\n                        this.traverser.init({ node: p.previousSibling });\n                    }\n                }\n                this.traverser.traverse($.proxy(this._detectEnd, this));\n                if (!this.end.blank()) {\n                    this.traverser = this.traverser.clone(this.end);\n                    this.traverser.traverse($.proxy(this._detectStart, this));\n                    if (!this._isLinkDetected()) {\n                        var puntuationOptions = this.traverser.extendOptions(this.start);\n                        var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                        puntuationTraverser.traverse($.proxy(this._skipStartPuntuation, this));\n                        if (!this._isLinkDetected()) {\n                            this.start = DomPos();\n                        }\n                    }\n                }\n                if (this.start.blank()) {\n                    return null;\n                } else {\n                    return {\n                        start: this.start,\n                        end: this.end,\n                        text: this.text\n                    };\n                }\n            },\n            _isLinkDetected: function () {\n                return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n            },\n            _detectEnd: function (text, node) {\n                var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n                if (i > -1) {\n                    this.end.node = node;\n                    this.end.offset = i + 1;\n                    return false;\n                }\n            },\n            _detectStart: function (text, node) {\n                var i = lastIndexOfRegExp(text, /\\s/);\n                var ii = i + 1;\n                this.text = text.substring(ii) + this.text;\n                this.start.node = node;\n                this.start.offset = ii;\n                if (i > -1) {\n                    return false;\n                }\n            },\n            _skipStartPuntuation: function (text, node, offset) {\n                var i = indexOfRegExp(text, /\\w/);\n                var ii = i;\n                if (i === -1) {\n                    ii = text.length;\n                }\n                this.text = this.text.substring(ii);\n                this.start.node = node;\n                this.start.offset = ii + (offset | 0);\n                if (i > -1) {\n                    return false;\n                }\n            }\n        });\n        function lastIndexOfRegExp(str, search) {\n            var i = str.length;\n            while (i-- && !search.test(str[i])) {\n            }\n            return i;\n        }\n        function indexOfRegExp(str, search) {\n            var r = search.exec(str);\n            return r ? r.index : -1;\n        }\n        var DomPos = function () {\n            return {\n                node: null,\n                offset: null,\n                blank: function () {\n                    return this.node === null && this.offset === null;\n                }\n            };\n        };\n        var DomTextTraverser = Class.extend({\n            init: function (options) {\n                this.node = options.node;\n                this.offset = options.offset === undefined ? dom.isDataNode(this.node) && this.node.length || 0 : options.offset;\n                this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n            },\n            traverse: function (callback) {\n                if (!callback) {\n                    return;\n                }\n                this.cancel = false;\n                this._traverse(callback, this.node, this.offset);\n            },\n            _traverse: function (callback, node, offset) {\n                if (!node || this.cancel) {\n                    return;\n                }\n                if (node.nodeType === 3) {\n                    var text = node.data;\n                    if (offset !== undefined) {\n                        text = this.subText(text, offset);\n                    }\n                    this.cancel = callback(text, node, offset) === false;\n                } else {\n                    var edgeNode = this.edgeNode(node);\n                    this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n                    return this._traverse(callback, edgeNode);\n                }\n                var next = this.next(node);\n                if (!next) {\n                    var parent = node.parentNode;\n                    while (!next && dom.isInline(parent)) {\n                        next = this.next(parent);\n                        parent = parent.parentNode;\n                    }\n                }\n                this.cancel = this.cancel || this.cancelAtNode(next);\n                this._traverse(callback, next);\n            },\n            extendOptions: function (o) {\n                return $.extend({\n                    node: this.node,\n                    offset: this.offset,\n                    cancelAtNode: this.cancelAtNode\n                }, o || {});\n            },\n            edgeNode: function (node) {\n            },\n            next: function (node) {\n            },\n            subText: function (text, offset) {\n            }\n        });\n        var LeftDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(0, splitIndex);\n            },\n            next: function (node) {\n                return node.previousSibling;\n            },\n            edgeNode: function (node) {\n                return node.lastChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new LeftDomTextTraverser(o);\n            }\n        });\n        var RightDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(splitIndex);\n            },\n            next: function (node) {\n                return node.nextSibling;\n            },\n            edgeNode: function (node) {\n                return node.firstChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new RightDomTextTraverser(o);\n            }\n        });\n        extend(kendo.ui.editor, {\n            LinkFormatFinder: LinkFormatFinder,\n            LinkFormatter: LinkFormatter,\n            UnlinkCommand: UnlinkCommand,\n            LinkCommand: LinkCommand,\n            AutoLinkCommand: AutoLinkCommand,\n            UnlinkTool: UnlinkTool,\n            DomTextLinkDetection: DomTextLinkDetection,\n            LeftDomTextTraverser: LeftDomTextTraverser,\n            RightDomTextTraverser: RightDomTextTraverser\n        });\n        registerTool('createLink', new Tool({\n            key: 'K',\n            ctrl: true,\n            command: LinkCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Create Link'\n            })\n        }));\n        registerTool('unlink', new UnlinkTool({\n            key: 'K',\n            ctrl: true,\n            shift: true,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Remove Link'\n            })\n        }));\n        registerTool('autoLink', new Tool({\n            key: [\n                keys.ENTER,\n                keys.SPACEBAR\n            ],\n            keyPressCommand: true,\n            command: AutoLinkCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/formatblock', ['editor/plugins/format'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, dom = Editor.Dom, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, registerFormat = EditorUtils.registerFormat, RangeUtils = Editor.RangeUtils;\n        var BlockFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            contains: function (node, children) {\n                var i, len, child;\n                for (i = 0, len = children.length; i < len; i++) {\n                    child = children[i];\n                    if (!child || !dom.isAncestorOrSelf(node, child)) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var format = this.format, suitable = [], i, len, candidate;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    for (var f = format.length - 1; f >= 0; f--) {\n                        candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                        if (candidate) {\n                            break;\n                        }\n                    }\n                    if (!candidate || candidate.contentEditable === 'true') {\n                        return [];\n                    }\n                    if ($.inArray(candidate, suitable) < 0) {\n                        suitable.push(candidate);\n                    }\n                }\n                this._resolveListsItems(suitable);\n                for (i = 0, len = suitable.length; i < len; i++) {\n                    if (this.contains(suitable[i], suitable)) {\n                        return [suitable[i]];\n                    }\n                }\n                return suitable;\n            },\n            _resolveListsItems: function (nodes) {\n                var i, node, wrapper;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    wrapper = dom.is(node, 'li') ? node : dom.wrapper(node);\n                    wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n                    if (dom.is(wrapper, 'li')) {\n                        node = nodes[i] = wrapper;\n                    }\n                }\n            },\n            findFormat: function (sourceNode, until) {\n                var format = this.format, i, len, node, tags, attributes;\n                var editableParent = dom.editableParent(sourceNode);\n                var immutables = this.options && this.options.immutables;\n                var ImmutablesNS = Editor.Immutables;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (immutables && tags && tags[0] == 'immutable') {\n                        var immutable = ImmutablesNS.immutableParent(node);\n                        if (immutable && dom.attrEquals(immutable, attributes)) {\n                            return node;\n                        }\n                    }\n                    while (node && dom.isAncestorOf(editableParent, node)) {\n                        if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                            return node;\n                        }\n                        if (until && until(node)) {\n                            break;\n                        }\n                        node = node.parentNode;\n                    }\n                }\n                return null;\n            },\n            getFormat: function (nodes) {\n                var that = this, findFormat = function (node) {\n                        return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                    }, result = findFormat(nodes[0]), i, len;\n                if (!result) {\n                    return '';\n                }\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != findFormat(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result.nodeName.toLowerCase();\n            },\n            isFormatted: function (nodes, until) {\n                for (var i = 0, len = nodes.length; i < len; i++) {\n                    if (!this.findFormat(nodes[i], until)) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        });\n        var BlockFormatter = Class.extend({\n            init: function (format, values) {\n                this.format = format;\n                this.values = values;\n                this.finder = new BlockFormatFinder(format);\n            },\n            wrap: function (tag, attributes, nodes) {\n                var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n                if (dom.isInline(commonAncestor)) {\n                    commonAncestor = dom.blockParentOrBody(commonAncestor);\n                }\n                var ancestors = dom.significantChildNodes(commonAncestor), position = dom.findNodeIndex(ancestors[0]), wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes), i, ancestor;\n                for (i = 0; i < ancestors.length; i++) {\n                    ancestor = ancestors[i];\n                    if (dom.isBlock(ancestor)) {\n                        dom.attr(ancestor, attributes);\n                        if (wrapper.childNodes.length) {\n                            dom.insertBefore(wrapper, ancestor);\n                            wrapper = wrapper.cloneNode(false);\n                        }\n                        position = dom.findNodeIndex(ancestor) + 1;\n                        continue;\n                    }\n                    wrapper.appendChild(ancestor);\n                }\n                if (wrapper.firstChild) {\n                    dom.insertAt(commonAncestor, wrapper, position);\n                }\n            },\n            apply: function (nodes) {\n                var format, values = this.values;\n                function attributes(format) {\n                    return extend({}, format && format.attr, values);\n                }\n                this._handleImmutables(nodes, true);\n                var images = dom.filter('img', nodes);\n                var imageFormat = EditorUtils.formatByName('img', this.format);\n                var imageAttributes = attributes(imageFormat);\n                $.each(images, function () {\n                    dom.attr(this, imageAttributes);\n                });\n                if (images.length == nodes.length) {\n                    return;\n                }\n                var nonImages = dom.filter('img', nodes, true);\n                var formatNodes = this.finder.findSuitable(nonImages);\n                if (formatNodes.length) {\n                    for (var i = 0, len = formatNodes.length; i < len; i++) {\n                        format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                        dom.attr(formatNodes[i], attributes(format));\n                    }\n                } else {\n                    format = this.format[0];\n                    this.wrap(format.tags[0], attributes(format), nonImages);\n                }\n            },\n            _handleImmutables: function (nodes, applyFormatting) {\n                if (!this.immutables()) {\n                    return;\n                }\n                var immutableFormat = EditorUtils.formatByName('immutable', this.format);\n                if (!immutableFormat) {\n                    return;\n                }\n                var ImmutablesNS = Editor.Immutables;\n                var l = nodes.length - 1;\n                for (var i = l; i >= 0; i--) {\n                    var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n                    if (!immutableParent) {\n                        continue;\n                    }\n                    if (immutableParent !== nodes[i + 1]) {\n                        if (applyFormatting) {\n                            dom.attr(immutableParent, immutableFormat.attr);\n                        } else {\n                            dom.unstyle(immutableParent, immutableFormat.attr.style);\n                        }\n                    }\n                    nodes.splice(i, 1);\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            remove: function (nodes) {\n                var i, l, formatNode, namedFormat, name;\n                this._handleImmutables(nodes, false);\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        name = dom.name(formatNode);\n                        namedFormat = EditorUtils.formatByName(name, this.format);\n                        if (namedFormat.attr.style) {\n                            dom.unstyle(formatNode, namedFormat.attr.style);\n                        }\n                        if (namedFormat.attr.className) {\n                            dom.removeClass(formatNode, namedFormat.attr.className);\n                        }\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                if (that.finder.isFormatted(nodes)) {\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var GreedyBlockFormatter = Class.extend({\n            init: function (format, values) {\n                var that = this;\n                that.format = format;\n                that.values = values;\n                that.finder = new BlockFormatFinder(format);\n            },\n            apply: function (nodes) {\n                var format = this.format;\n                var blocks = dom.blockParents(nodes);\n                var formatTag = format[0].tags[0];\n                var i, len, list, formatter, range;\n                var element;\n                var tagName;\n                var block;\n                var immutalbeParent;\n                if (blocks.length) {\n                    for (i = 0, len = blocks.length; i < len; i++) {\n                        block = blocks[i];\n                        immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n                        if (!immutalbeParent) {\n                            tagName = dom.name(block);\n                            if (tagName == 'li') {\n                                list = block.parentNode;\n                                formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                                range = this.editor.createRange();\n                                range.selectNode(blocks[i]);\n                                formatter.toggle(range);\n                            } else if (formatTag && (tagName == 'td' || block.attributes.contentEditable)) {\n                                new BlockFormatter(format, this.values).apply(block.childNodes);\n                            } else {\n                                element = dom.changeTag(block, formatTag);\n                                dom.attr(element, format[0].attr);\n                            }\n                        }\n                    }\n                } else {\n                    var blockFormatter = new BlockFormatter(format, this.values);\n                    blockFormatter.editor = this.editor;\n                    blockFormatter.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                this.apply(nodes);\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            }\n        });\n        var BlockFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new BlockFormatFinder(options.format),\n                    formatter: function () {\n                        return new BlockFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        extend(Editor, {\n            BlockFormatFinder: BlockFormatFinder,\n            BlockFormatter: BlockFormatter,\n            GreedyBlockFormatter: GreedyBlockFormatter,\n            BlockFormatTool: BlockFormatTool\n        });\n        var listElements = [\n            'ul',\n            'ol',\n            'li'\n        ];\n        registerFormat('justifyLeft', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'left' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'left',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyLeft', new BlockFormatTool({\n            format: formats.justifyLeft,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Left'\n            })\n        }));\n        registerFormat('justifyCenter', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'center' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'center',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyCenter', new BlockFormatTool({\n            format: formats.justifyCenter,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Center'\n            })\n        }));\n        registerFormat('justifyRight', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'right' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'right',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyRight', new BlockFormatTool({\n            format: formats.justifyRight,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Right'\n            })\n        }));\n        registerFormat('justifyFull', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'justify' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'justify',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyFull', new BlockFormatTool({\n            format: formats.justifyFull,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Full'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/lists', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, BlockFormatFinder = Editor.BlockFormatFinder, textNodes = RangeUtils.textNodes, registerTool = Editor.EditorUtils.registerTool;\n        var ListFormatFinder = BlockFormatFinder.extend({\n            init: function (options) {\n                this.tag = options.tag;\n                this.attr = options.attr;\n                this.altAttr = options.altAttr;\n                var tags = this.tags = [\n                    this.tag == 'ul' ? 'ol' : 'ul',\n                    this.tag\n                ];\n                var format = [{\n                        tags: tags,\n                        attr: this.attr\n                    }];\n                if (this.altAttr) {\n                    format.push({\n                        tags: tags,\n                        attr: this.altAttr\n                    });\n                }\n                BlockFormatFinder.fn.init.call(this, format);\n            },\n            matchesType: function (node) {\n                return dom.attrEquals(node, this.attr) || this.altAttr && dom.attrEquals(node, this.altAttr);\n            },\n            isList: function (node) {\n                return dom.list(node);\n            },\n            isFormatted: function (nodes) {\n                var formatNodes = [];\n                var formatNode, i;\n                for (i = 0; i < nodes.length; i++) {\n                    formatNode = this.findFormat(nodes[i], this.isList);\n                    if (formatNode && dom.name(formatNode) == this.tag && this.matchesType(formatNode)) {\n                        formatNodes.push(formatNode);\n                    }\n                }\n                if (formatNodes.length < 1) {\n                    return false;\n                }\n                if (formatNodes.length != nodes.length) {\n                    return false;\n                }\n                for (i = 0; i < formatNodes.length; i++) {\n                    if (formatNodes[i].parentNode != formatNode.parentNode) {\n                        break;\n                    }\n                    if (formatNodes[i] != formatNode) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var candidate = this.findFormat(nodes[0], this.isList);\n                if (candidate && dom.name(candidate) == this.tag) {\n                    return candidate;\n                }\n                return null;\n            }\n        });\n        var ListFormatter = Class.extend({\n            init: function (options, unwrapTag) {\n                var that = this;\n                options = $.isPlainObject(options) ? options : {\n                    tag: options,\n                    attr: null\n                };\n                that.tag = options.tag;\n                that.attr = options.attr;\n                that.finder = new ListFormatFinder(options);\n                that.unwrapTag = unwrapTag;\n            },\n            isList: function (node) {\n                return dom.list(node);\n            },\n            immutables: function () {\n                return this.editor && !!this.editor.options.immutables;\n            },\n            wrap: function (list, nodes) {\n                var li = dom.create(list.ownerDocument, 'li'), i, node, isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    if (dom.is(node, 'li')) {\n                        list.appendChild(node);\n                        continue;\n                    }\n                    if (this.isList(node)) {\n                        while (node.firstChild) {\n                            list.appendChild(node.firstChild);\n                        }\n                        continue;\n                    }\n                    if (dom.is(node, 'td')) {\n                        while (node.firstChild) {\n                            li.appendChild(node.firstChild);\n                        }\n                        list.appendChild(li);\n                        node.appendChild(list);\n                        list = list.cloneNode(false);\n                        li = li.cloneNode(false);\n                        continue;\n                    }\n                    li.appendChild(node);\n                    if (dom.isBlock(node)) {\n                        list.appendChild(li);\n                        if (!isImmutable(node)) {\n                            dom.unwrap(node);\n                        }\n                        li = li.cloneNode(false);\n                    }\n                }\n                if (li.firstChild) {\n                    list.appendChild(li);\n                }\n            },\n            containsAny: function (parent, nodes) {\n                for (var i = 0; i < nodes.length; i++) {\n                    if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            suitable: function (candidate, nodes) {\n                if (candidate.className == 'k-marker') {\n                    var sibling = candidate.nextSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                    sibling = candidate.previousSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                }\n                return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n            },\n            _parentLists: function (node) {\n                var editable = dom.closestEditable(node);\n                return $(node).parentsUntil(editable, 'ul,ol');\n            },\n            split: function (range) {\n                var nodes = textNodes(range);\n                var start, end, parents;\n                if (nodes.length) {\n                    start = dom.parentOfType(nodes[0], ['li']);\n                    end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n                    range.setStartBefore(start);\n                    range.setEndAfter(end);\n                    for (var i = 0, l = nodes.length; i < l; i++) {\n                        var formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            parents = this._parentLists(formatNode);\n                            if (parents.length) {\n                                RangeUtils.split(range, parents.last()[0], true);\n                            } else {\n                                RangeUtils.split(range, formatNode, true);\n                            }\n                        }\n                    }\n                }\n            },\n            merge: function (tag, formatNode) {\n                var prev = formatNode.previousSibling, next;\n                while (prev && (prev.className == 'k-marker' || prev.nodeType == 3 && dom.isWhitespace(prev))) {\n                    prev = prev.previousSibling;\n                }\n                if (prev && dom.name(prev) == tag && this.finder.matchesType(prev)) {\n                    while (formatNode.firstChild) {\n                        prev.appendChild(formatNode.firstChild);\n                    }\n                    dom.remove(formatNode);\n                    formatNode = prev;\n                }\n                next = formatNode.nextSibling;\n                while (next && (next.className == 'k-marker' || next.nodeType == 3 && dom.isWhitespace(next))) {\n                    next = next.nextSibling;\n                }\n                if (next && dom.name(next) == tag && this.finder.matchesType(next)) {\n                    while (formatNode.lastChild) {\n                        next.insertBefore(formatNode.lastChild, next.firstChild);\n                    }\n                    dom.remove(formatNode);\n                }\n            },\n            breakable: function (node) {\n                return node != node.ownerDocument.body && !/table|tbody|thead|tr|td/.test(dom.name(node)) && !node.attributes.contentEditable;\n            },\n            findSuitableNode: function (nodes) {\n                var that = this, finder = that.finder, tag = that.tag, formatNode;\n                formatNode = finder.findSuitable(nodes);\n                if (!formatNode) {\n                    finder = new ListFormatFinder({ tag: tag == 'ul' ? 'ol' : 'ul' });\n                    formatNode = finder.findSuitable(nodes);\n                }\n                if (!formatNode) {\n                    finder = new ListFormatFinder({ tag: tag });\n                    formatNode = finder.findSuitable(nodes);\n                    formatNode = formatNode && that.finder.matchesType(formatNode) ? null : formatNode;\n                }\n                return formatNode;\n            },\n            applyOnSection: function (section, nodes) {\n                var tag = this.tag;\n                var attr = this.attr;\n                var commonAncestor = dom.closestSplittableParent(nodes);\n                var ancestors = [];\n                var formatNode = this.findSuitableNode(nodes);\n                var childNodes;\n                if (/table|tbody|thead/.test(dom.name(commonAncestor))) {\n                    childNodes = $.map(nodes, function (node) {\n                        return dom.parentOfType(node, ['td']);\n                    });\n                } else {\n                    childNodes = dom.significantChildNodes(commonAncestor);\n                    if ($.grep(childNodes, dom.isBlock).length) {\n                        childNodes = $.grep(childNodes, $.proxy(function (node) {\n                            return this.containsAny(node, nodes);\n                        }, this));\n                    }\n                    if (!childNodes.length) {\n                        childNodes = nodes;\n                    }\n                }\n                function pushAncestor() {\n                    ancestors.push(this);\n                }\n                for (var i = 0; i < childNodes.length; i++) {\n                    var child = childNodes[i];\n                    var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n                    if (!suitable) {\n                        continue;\n                    }\n                    if (formatNode && this.isList(child)) {\n                        $.each(child.children, pushAncestor);\n                        dom.remove(child);\n                    } else {\n                        ancestors.push(child);\n                    }\n                }\n                if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n                    ancestors = [commonAncestor];\n                }\n                if (!formatNode) {\n                    formatNode = dom.create(commonAncestor.ownerDocument, tag, attr);\n                    if (dom.isBlock(ancestors[0])) {\n                        dom.mergeAttributes(ancestors[0], formatNode);\n                    }\n                    dom.insertBefore(formatNode, ancestors[0]);\n                }\n                this.wrap(formatNode, ancestors);\n                while (dom.isBom(formatNode.nextSibling)) {\n                    dom.remove(formatNode.nextSibling);\n                }\n                if (!this.finder.matchesType(formatNode)) {\n                    formatNode.removeAttribute('type');\n                    formatNode.style.listStyleType = '';\n                    dom.mergeAttributes(dom.create(commonAncestor.ownerDocument, tag, attr), formatNode, true);\n                }\n                if (formatNode && formatNode.getAttribute('type') === '') {\n                    formatNode.removeAttribute('type');\n                }\n                if (!dom.is(formatNode, tag)) {\n                    dom.changeTag(formatNode, tag);\n                }\n                this.merge(tag, formatNode);\n            },\n            apply: function (nodes) {\n                var i = 0, sections = [], lastSection, lastNodes, section, node, l = nodes.length, immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n                function addLastSection() {\n                    if (lastSection) {\n                        sections.push({\n                            section: lastSection,\n                            nodes: lastNodes\n                        });\n                    }\n                }\n                for (i = 0; i < l; i++) {\n                    node = immutableParent(nodes[i]) || nodes[i];\n                    section = dom.closestEditable(node, [\n                        'td',\n                        'th',\n                        'body'\n                    ]);\n                    if (!lastSection || section != lastSection) {\n                        addLastSection();\n                        lastNodes = [node];\n                        lastSection = section;\n                    } else {\n                        lastNodes.push(node);\n                    }\n                }\n                addLastSection();\n                for (i = 0; i < sections.length; i++) {\n                    this.applyOnSection(sections[i].section, sections[i].nodes);\n                }\n            },\n            unwrap: function (ul) {\n                var fragment = ul.ownerDocument.createDocumentFragment(), unwrapTag = this.unwrapTag, parents, li, p, child;\n                for (li = ul.firstChild; li; li = li.nextSibling) {\n                    p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                    while (li.firstChild) {\n                        child = li.firstChild;\n                        if (dom.isBlock(child)) {\n                            if (p.firstChild) {\n                                fragment.appendChild(p);\n                                p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                            }\n                            fragment.appendChild(child);\n                        } else {\n                            p.appendChild(child);\n                        }\n                    }\n                    if (p.firstChild) {\n                        fragment.appendChild(p);\n                    }\n                }\n                parents = this._parentLists(ul);\n                if (parents[0]) {\n                    dom.insertAfter(fragment, parents.last()[0]);\n                    parents.last().remove();\n                } else {\n                    dom.insertAfter(fragment, ul);\n                }\n                dom.remove(ul);\n            },\n            remove: function (nodes) {\n                var formatNode;\n                for (var i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        this.unwrap(formatNode);\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = textNodes(range), ancestor = range.commonAncestorContainer;\n                if (!nodes.length) {\n                    range.selectNodeContents(ancestor);\n                    nodes = textNodes(range);\n                    if (!nodes.length) {\n                        var text = ancestor.ownerDocument.createTextNode('');\n                        range.startContainer.appendChild(text);\n                        nodes = [text];\n                        range.selectNode(text.parentNode);\n                    }\n                }\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                if (that.finder.isFormatted(nodes)) {\n                    that.split(range);\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var ListCommand = Command.extend({\n            init: function (options) {\n                options.formatter = new ListFormatter({\n                    tag: options.tag,\n                    attr: options.attr\n                });\n                Command.fn.init.call(this, options);\n            }\n        });\n        var ListTool = FormatTool.extend({\n            init: function (options) {\n                this.options = options;\n                FormatTool.fn.init.call(this, extend(options, { finder: new ListFormatFinder(options) }));\n            },\n            command: function (commandArguments) {\n                return new ListCommand(extend(commandArguments, {\n                    tag: this.options.tag,\n                    attr: this.options.attr\n                }));\n            }\n        });\n        extend(Editor, {\n            ListFormatFinder: ListFormatFinder,\n            ListFormatter: ListFormatter,\n            ListCommand: ListCommand,\n            ListTool: ListTool\n        });\n        registerTool('insertUnorderedList', new ListTool({\n            tag: 'ul',\n            attr: {\n                style: { listStyleType: '' },\n                type: ''\n            },\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert unordered list'\n            })\n        }));\n        registerTool('insertOrderedList', new ListTool({\n            tag: 'ol',\n            attr: {\n                style: { listStyleType: '' },\n                type: ''\n            },\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert ordered list'\n            })\n        }));\n        registerTool('insertUpperRomanList', new ListTool({\n            tag: 'ol',\n            attr: { style: { listStyleType: 'upper-roman' } },\n            altAttr: { type: 'I' },\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert upper roman list'\n            })\n        }));\n        registerTool('insertLowerRomanList', new ListTool({\n            tag: 'ol',\n            attr: { style: { listStyleType: 'lower-roman' } },\n            altAttr: { type: 'i' },\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert lower roman list'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/formatting', ['editor/plugins/inlineformat'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, DelayedExecutionTool = Editor.DelayedExecutionTool, Command = Editor.Command, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, registerTool = EditorUtils.registerTool;\n        var FormattingTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                var that = this;\n                Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n                that.type = 'kendoSelectBox';\n                that.finder = {\n                    getFormat: function () {\n                        return '';\n                    }\n                };\n            },\n            options: {\n                items: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                width: 110\n            },\n            toFormattingItem: function (item) {\n                var value = item.value;\n                if (!value) {\n                    return item;\n                }\n                if (item.tag || item.className) {\n                    return item;\n                }\n                var dot = value.indexOf('.');\n                if (dot === 0) {\n                    item.className = value.substring(1);\n                } else if (dot == -1) {\n                    item.tag = value;\n                } else {\n                    item.tag = value.substring(0, dot);\n                    item.className = value.substring(dot + 1);\n                }\n                return item;\n            },\n            command: function (args) {\n                var that = this;\n                var item = args.value;\n                item = this.toFormattingItem(item);\n                return new Editor.FormatCommand({\n                    range: args.range,\n                    formatter: function () {\n                        var formatter, tags = (item.tag || item.context || 'span').split(','), format = [{\n                                    tags: tags,\n                                    attr: { className: item.className || '' }\n                                }];\n                        if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                            formatter = new Editor.GreedyInlineFormatter(format);\n                        } else {\n                            formatter = new Editor.GreedyBlockFormatter(format);\n                        }\n                        formatter.editor = that.editor;\n                        return formatter;\n                    }\n                });\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor;\n                var options = this.options;\n                var toolName = options.name;\n                var that = this;\n                var selectBox;\n                that.editor = editor;\n                ui.width(options.width);\n                selectBox = ui.kendoSelectBox({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: options.items || editor.options[toolName],\n                    title: editor.options.messages[toolName],\n                    autoSize: true,\n                    change: function () {\n                        var dataItem = this.dataItem();\n                        if (dataItem) {\n                            Tool.exec(editor, toolName, dataItem.toJSON());\n                        }\n                    },\n                    dataBound: function () {\n                        var i, items = this.dataSource.data();\n                        for (i = 0; i < items.length; i++) {\n                            items[i] = that.toFormattingItem(items[i]);\n                        }\n                    },\n                    highlightFirst: false,\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>')\n                }).data('kendoSelectBox');\n                ui.attr('title', initOptions.title);\n                selectBox.wrapper.attr('title', initOptions.title);\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n            },\n            getFormattingValue: function (items, nodes) {\n                for (var i = 0; i < items.length; i++) {\n                    var item = items[i];\n                    var tag = item.tag || item.context || '';\n                    var className = item.className ? '.' + item.className : '';\n                    var selector = tag + className;\n                    var element = $(nodes[0]).closest(selector)[0];\n                    if (!element) {\n                        continue;\n                    }\n                    if (nodes.length == 1) {\n                        return item.value;\n                    }\n                    for (var n = 1; n < nodes.length; n++) {\n                        if (!$(nodes[n]).closest(selector)[0]) {\n                            break;\n                        } else if (n == nodes.length - 1) {\n                            return item.value;\n                        }\n                    }\n                }\n                return '';\n            },\n            update: function (ui, nodes) {\n                var selectBox = $(ui).data(this.type);\n                if (!selectBox) {\n                    return;\n                }\n                var dataSource = selectBox.dataSource, items = dataSource.data(), i, context, ancestor = dom.commonAncestor.apply(null, nodes);\n                if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n                    return;\n                } else {\n                    this._ancestor = ancestor;\n                }\n                for (i = 0; i < items.length; i++) {\n                    context = items[i].context;\n                    items[i].visible = !context || !!$(ancestor).closest(context).length;\n                }\n                dataSource.filter([{\n                        field: 'visible',\n                        operator: 'eq',\n                        value: true\n                    }]);\n                DelayedExecutionTool.fn.update.call(this, ui, nodes);\n                selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n                selectBox.wrapper.toggleClass('k-state-disabled', !dataSource.view().length);\n            },\n            destroy: function () {\n                this._ancestor = null;\n            }\n        });\n        var CleanFormatCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true);\n                this.tagsToClean = this.options.remove || 'strong,em,span,sup,sub,del,b,i,u,font'.split(',');\n                RangeUtils.wrapSelectedElements(range);\n                var nodes = RangeUtils.mapAll(range, function (node) {\n                    return node;\n                });\n                for (var c = nodes.length - 1; c >= 0; c--) {\n                    var node = nodes[c];\n                    if (!this.immutableParent(node)) {\n                        this.clean(node);\n                    }\n                }\n                this.releaseRange(range);\n            },\n            clean: function (node) {\n                if (!node || dom.isMarker(node)) {\n                    return;\n                }\n                var name = dom.name(node);\n                if (name == 'ul' || name == 'ol') {\n                    var listFormatter = new Editor.ListFormatter(name);\n                    var prev = node.previousSibling;\n                    var next = node.nextSibling;\n                    listFormatter.unwrap(node);\n                    for (; prev && prev != next; prev = prev.nextSibling) {\n                        this.clean(prev);\n                    }\n                } else if (name == 'blockquote') {\n                    dom.changeTag(node, 'p');\n                } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n                    for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                        this.clean(node.childNodes[i]);\n                    }\n                    node.removeAttribute('style');\n                    node.removeAttribute('class');\n                } else {\n                    unwrapListItem(node);\n                }\n                if ($.inArray(name, this.tagsToClean) > -1) {\n                    dom.unwrap(node);\n                }\n            },\n            immutableParent: function (node) {\n                return this.immutables() && Editor.Immutables.immutableParent(node);\n            }\n        });\n        function unwrapListItem(node) {\n            var li = dom.closestEditableOfType(node, ['li']);\n            if (li) {\n                var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n                var range = kendo.ui.editor.W3CRange.fromNode(node);\n                range.selectNode(li);\n                listFormatter.toggle(range);\n            }\n        }\n        $.extend(Editor, {\n            FormattingTool: FormattingTool,\n            CleanFormatCommand: CleanFormatCommand\n        });\n        registerTool('formatting', new FormattingTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Format'\n            })\n        }));\n        registerTool('cleanFormatting', new Tool({\n            command: CleanFormatCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Clean formatting'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/image', [\n        'kendo.imagebrowser',\n        'editor/command'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, keys = kendo.keys, KEDITORIMAGEURL = '#k-editor-image-url', KEDITORIMAGETITLE = '#k-editor-image-title', KEDITORIMAGEWIDTH = '#k-editor-image-width', KEDITORIMAGEHEIGHT = '#k-editor-image-height';\n        var ImageCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.async = true;\n                that.attributes = {};\n            },\n            insertImage: function (img, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.src && attributes.src != 'http://') {\n                    var removeIEAttributes = function () {\n                        setTimeout(function () {\n                            if (!attributes.width) {\n                                img.removeAttribute('width');\n                            }\n                            if (!attributes.height) {\n                                img.removeAttribute('height');\n                            }\n                            img.removeAttribute('complete');\n                        });\n                    };\n                    if (!img) {\n                        img = dom.create(doc, 'img', attributes);\n                        img.onload = img.onerror = removeIEAttributes;\n                        range.deleteContents();\n                        range.insertNode(img);\n                        if (!img.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), img);\n                        }\n                        removeIEAttributes();\n                        range.setStartAfter(img);\n                        range.setEndAfter(img);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        img.onload = img.onerror = removeIEAttributes;\n                        dom.attr(img, attributes);\n                        removeIEAttributes();\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\"k-edit-form-content\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser k-imagebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-url\">#: messages.imageWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-image-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-title\">#: messages.imageAltText #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-image-title\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-width\">#: messages.imageWidth #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-image-width\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-height\">#: messages.imageHeight #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-image-height\">' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                if (!that.insertImage(RangeUtils.image(range), range)) {\n                    that.releaseRange(range);\n                }\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), applied = false, img = RangeUtils.image(range), imageWidth = img && img.getAttribute('width') || '', imageHeight = img && img.getAttribute('height') || '', dialog, isIE = kendo.support.browser.msie, options = that.editor.options, messages = options.messages, imageBrowser = options.imageBrowser, showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertImage,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                this.expandImmutablesIn(range);\n                function apply(e) {\n                    var element = dialog.element, w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10), h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n                    that.attributes = {\n                        src: element.find(KEDITORIMAGEURL).val().replace(/ /g, '%20'),\n                        alt: element.find(KEDITORIMAGETITLE).val()\n                    };\n                    that.attributes.width = null;\n                    that.attributes.height = null;\n                    if (!isNaN(w) && w > 0) {\n                        that.attributes.width = w;\n                    }\n                    if (!isNaN(h) && h > 0) {\n                        that.attributes.height = h;\n                    }\n                    applied = that.insertImage(img, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORIMAGEURL).val(img ? img.getAttribute('src', 2) : 'http://').end().find(KEDITORIMAGETITLE).val(img ? img.alt : '').end().find(KEDITORIMAGEWIDTH).val(imageWidth).end().find(KEDITORIMAGEHEIGHT).val(imageHeight).end().data('kendoWindow');\n                var element = dialog.element;\n                if (showBrowser) {\n                    this._imageBrowser = new kendo.ui.ImageBrowser(element.find('.k-imagebrowser'), extend({}, imageBrowser));\n                    this._imageBrowser.bind('change', function (ev) {\n                        if (ev.selected.get('type') === 'f') {\n                            element.find(KEDITORIMAGEURL).val(this.value());\n                        }\n                    });\n                    this._imageBrowser.bind('apply', apply);\n                }\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n                dialog.center().open();\n                element.find(KEDITORIMAGEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.ImageCommand = ImageCommand;\n        registerTool('insertImage', new Editor.Tool({\n            command: ImageCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert Image'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/import', ['editor/main'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n        var ImportCommand = Command.extend({\n            exec: function () {\n                (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n            },\n            _initializeUploadWidget: function () {\n                var cmd = this;\n                var editor = cmd.editor;\n                var importOptions = editor.options['import'];\n                var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n                    success: proxy(cmd._onUploadSuccess, cmd),\n                    progress: proxy(cmd._onUploadProgress, cmd),\n                    select: proxy(cmd._onUploadSelect, cmd),\n                    error: proxy(cmd._onUploadError, cmd),\n                    complete: proxy(cmd._onUploadComplete, cmd),\n                    showFileList: false,\n                    multiple: false,\n                    async: {\n                        saveUrl: importOptions.proxyURL,\n                        autoUpload: true,\n                        saveField: 'file'\n                    },\n                    validation: {\n                        allowedExtensions: importOptions.allowedExtensions,\n                        maxFileSize: importOptions.maxFileSize\n                    }\n                }).getKendoUpload();\n                editor._uploadWidget = upload;\n                return upload;\n            },\n            _onUploadComplete: function (ev) {\n                this._trigger('complete', ev);\n                ev.sender.clearAllFiles();\n                this._removeLoadingOverlay();\n            },\n            _onUploadSuccess: function (ev) {\n                this.editor.value(ev.response.html.replace(/<\\/?body>/gi, ''));\n                this._trigger('success', ev);\n            },\n            _onUploadProgress: function (ev) {\n                this._trigger('progress', ev);\n            },\n            _onUploadSelect: function (ev) {\n                this._trigger('select', ev);\n                if (!ev.files[0].validationErrors) {\n                    this._initLoadingOverlay();\n                }\n            },\n            _onUploadError: function (ev) {\n                this._trigger('error', ev);\n            },\n            _trigger: function (eventType, uploadEvent) {\n                var editor = this.editor;\n                var importOptions = editor.options['import'];\n                if (typeof importOptions[eventType] === 'function') {\n                    importOptions[eventType].call(editor, uploadEvent);\n                }\n            },\n            _initLoadingOverlay: function () {\n                var editable = this.editor.body;\n                if (Editor.Dom.is(editable, 'body')) {\n                    this._iframeWrapper = this._container = this.editor.wrapper.find('iframe').parent().css({ position: 'relative' }).append(loadingOverlay);\n                } else {\n                    this._container = $(editable).append(loadingOverlay);\n                }\n                kendo.ui.progress(this._container, true);\n            },\n            _removeLoadingOverlay: function () {\n                kendo.ui.progress(this._container, false);\n                $(this._iframeWrapper).css({ position: '' });\n                delete this._container;\n                delete this._iframeWrapper;\n            }\n        });\n        extend(Editor, { ImportCommand: ImportCommand });\n        registerTool('import', new Tool({\n            command: ImportCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.iconTextButtonTemplate,\n                title: 'Import'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/insert', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, editorNS = kendo.ui.editor, Command = editorNS.Command, GenericCommand = editorNS.GenericCommand, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, RestorePoint = editorNS.RestorePoint, extend = $.extend;\n        var InsertHtmlCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                var options = this.options;\n                var range = options.range;\n                var body = editor.body;\n                var startRestorePoint = new RestorePoint(range, body);\n                var html = options.html || options.value || '';\n                editor.selectRange(range);\n                editor.clipboard.paste(html, options);\n                if (options.postProcess) {\n                    options.postProcess(editor, editor.getRange());\n                }\n                var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n                genericCommand.editor = editor;\n                editor.undoRedoStack.push(genericCommand);\n                editor.focus();\n            }\n        });\n        var InsertHtmlTool = Tool.extend({\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, dataSource = options.items ? options.items : editor.options.insertHtml;\n                this._selectBox = new editorNS.SelectBox(ui, {\n                    dataSource: dataSource,\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    change: function () {\n                        Tool.exec(editor, 'insertHtml', this.value());\n                    },\n                    title: editor.options.messages.insertHtml,\n                    highlightFirst: false\n                });\n                ui.attr('title', initOptions.title);\n                this._selectBox.wrapper.attr('title', initOptions.title);\n            },\n            command: function (commandArguments) {\n                return new InsertHtmlCommand(commandArguments);\n            },\n            update: function (ui) {\n                var selectbox = ui.data('kendoSelectBox') || ui.find('select').data('kendoSelectBox');\n                selectbox.close();\n                selectbox.value(selectbox.options.title);\n            }\n        });\n        extend(editorNS, {\n            InsertHtmlCommand: InsertHtmlCommand,\n            InsertHtmlTool: InsertHtmlTool\n        });\n        registerTool('insertHtml', new InsertHtmlTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Insert HTML',\n                initialValue: 'Insert HTML'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/export', ['editor/main'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, defaultExportAsItems = [\n                {\n                    text: 'Docx',\n                    value: 'docx'\n                },\n                {\n                    text: 'Rtf',\n                    value: 'rtf'\n                },\n                {\n                    text: 'Pdf',\n                    value: 'pdf'\n                },\n                {\n                    text: 'Html',\n                    value: 'html'\n                },\n                {\n                    text: 'Plain Text',\n                    value: 'txt'\n                }\n            ];\n        var ExportAsCommand = Command.extend({\n            init: function (options) {\n                var cmd = this;\n                cmd.options = options;\n                Command.fn.init.call(cmd, options);\n                cmd.attributes = null;\n                cmd.exportType = options.exportType;\n            },\n            exec: function () {\n                var cmd = this;\n                var range = this.lockRange(true);\n                cmd.postToProxy();\n                cmd.releaseRange(range);\n            },\n            postToProxy: function () {\n                this.generateForm().appendTo('body').submit().remove();\n            },\n            generateForm: function () {\n                var cmd = this;\n                var exportAsOptions = cmd.editor.options.exportAs;\n                var form = $('<form>').attr({\n                    action: exportAsOptions && exportAsOptions.proxyURL || '',\n                    method: 'POST'\n                });\n                form.append([\n                    cmd.valueInput(),\n                    cmd.exportTypeInput(),\n                    cmd.fileNameInput()\n                ]);\n                return form;\n            },\n            valueInput: function () {\n                var editor = this.editor;\n                return $('<input>').attr({\n                    value: editor.encodedValue(),\n                    name: 'value',\n                    type: 'hidden'\n                });\n            },\n            exportTypeInput: function () {\n                var cmd = this;\n                return $('<input>').attr({\n                    value: cmd.exportType,\n                    name: 'exportType',\n                    type: 'hidden'\n                });\n            },\n            fileNameInput: function () {\n                var editor = this.editor;\n                var exportAsOptions = editor.options.exportAs;\n                var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr('id') || 'editor';\n                return $('<input>').attr({\n                    value: fileName,\n                    name: 'fileName',\n                    type: 'hidden'\n                });\n            }\n        });\n        var ExportAsTool = Tool.extend({\n            init: function (options) {\n                var tool = this;\n                Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n                tool.type = 'kendoSelectBox';\n            },\n            options: {\n                items: defaultExportAsItems,\n                width: 140\n            },\n            command: function (args) {\n                var value = args.value;\n                return new Editor.ExportAsCommand({\n                    range: args.range,\n                    exportType: value.exportType\n                });\n            },\n            initialize: function (ui, initOptions) {\n                var tool = this;\n                var editor = initOptions.editor;\n                var options = tool.options;\n                var toolName = options.name;\n                var changeHandler = proxy(tool.changeHandler, tool);\n                var dataSource = options.items || editor.options[toolName];\n                var displayName = editor.options.messages[toolName];\n                var selectBox;\n                dataSource.unshift({\n                    text: displayName,\n                    value: ''\n                });\n                tool.editor = editor;\n                ui.width(options.width);\n                selectBox = ui.kendoSelectBox({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: dataSource,\n                    autoSize: true,\n                    change: changeHandler,\n                    open: function (e) {\n                        var sender = e.sender;\n                        sender.items()[0].style.display = 'none';\n                        sender.unbind('open');\n                    },\n                    highlightFirst: false,\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>'),\n                    valueTemplate: '<span class=\"k-editor-export\"><span class=\"k-icon k-i-export\"></span><span class=\"k-export-tool-text\">' + displayName + '</span></span>'\n                }).data('kendoSelectBox');\n                ui.attr('title', initOptions.title);\n                selectBox.wrapper.attr('title', initOptions.title);\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n            },\n            changeHandler: function (e) {\n                var sender = e.sender;\n                var dataItem = sender.dataItem();\n                var value = dataItem && dataItem.value;\n                this._exec(value);\n                sender.value('');\n            },\n            _exec: function (value) {\n                if (value) {\n                    Tool.exec(this.editor, this.options.name, { exportType: value });\n                }\n            },\n            destroy: function () {\n                this._ancestor = null;\n            }\n        });\n        extend(Editor, {\n            ExportAsTool: ExportAsTool,\n            ExportAsCommand: ExportAsCommand\n        });\n        registerTool('exportAs', new ExportAsTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Export As'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/indent', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, blockElements = dom.blockElements, BlockFormatFinder = Editor.BlockFormatFinder, BlockFormatter = Editor.BlockFormatter;\n        function indent(node, value) {\n            var isRtl = $(node).css('direction') == 'rtl', indentDirection = isRtl ? 'Right' : 'Left', property = dom.name(node) != 'td' ? 'margin' + indentDirection : 'padding' + indentDirection;\n            if (value === undefined) {\n                return node.style[property] || 0;\n            } else {\n                if (value > 0) {\n                    node.style[property] = value + 'px';\n                } else {\n                    node.style[property] = '';\n                    if (!node.style.cssText) {\n                        node.removeAttribute('style');\n                    }\n                }\n            }\n        }\n        var IndentFormatter = Class.extend({\n            init: function () {\n                this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n            },\n            apply: function (nodes) {\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                var formatNodes = this.finder.findSuitable(nodes), targets = [], i, len, formatNode, parentList, sibling;\n                formatNodes = this.mapImmutables(formatNodes);\n                if (formatNodes.length) {\n                    for (i = 0, len = formatNodes.length; i < len; i++) {\n                        if (dom.is(formatNodes[i], 'li')) {\n                            if (!$(formatNodes[i]).index()) {\n                                targets.push(formatNodes[i].parentNode);\n                            } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                                targets.push(formatNodes[i]);\n                            }\n                        } else {\n                            targets.push(formatNodes[i]);\n                        }\n                    }\n                    while (targets.length) {\n                        formatNode = targets.shift();\n                        if (dom.is(formatNode, 'li')) {\n                            parentList = formatNode.parentNode;\n                            sibling = $(formatNode).prev('li');\n                            var siblingList = sibling.find('ul,ol').last();\n                            var nestedList = $(formatNode).children('ul,ol')[0];\n                            if (nestedList && sibling[0]) {\n                                if (siblingList[0]) {\n                                    siblingList.append(formatNode);\n                                    siblingList.append($(nestedList).children());\n                                    dom.remove(nestedList);\n                                } else {\n                                    sibling.append(nestedList);\n                                    nestedList.insertBefore(formatNode, nestedList.firstChild);\n                                }\n                            } else {\n                                nestedList = sibling.children('ul,ol')[0];\n                                if (!nestedList) {\n                                    nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList), this.getListTypeAttr(parentList));\n                                    sibling.append(nestedList);\n                                }\n                                while (formatNode && formatNode.parentNode == parentList) {\n                                    nestedList.appendChild(formatNode);\n                                    formatNode = targets.shift();\n                                }\n                            }\n                        } else {\n                            var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                            indent(formatNode, marginLeft);\n                            for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                                if ($.contains(formatNode, targets[targetIndex])) {\n                                    targets.splice(targetIndex, 1);\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    var formatter = new BlockFormatter([{ tags: ['p'] }], { style: { marginLeft: 30 } });\n                    formatter.apply(nodes);\n                }\n            },\n            getListTypeAttr: function (list) {\n                var type = list.getAttribute('type');\n                var styleType = list.style.listStyleType;\n                return type ? { type: type } : { style: { listStyleType: styleType } };\n            },\n            mapImmutables: function (nodes) {\n                if (!this.immutables) {\n                    return nodes;\n                } else {\n                    var immutables = [];\n                    return $.map(nodes, function (node) {\n                        var immutable = Editor.Immutables.immutableParent(node);\n                        if (immutable) {\n                            if ($.inArray(immutable, immutables) === -1) {\n                                immutables.push(immutable);\n                            } else {\n                                return null;\n                            }\n                        }\n                        return immutable || node;\n                    });\n                }\n            },\n            remove: function (nodes) {\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                var formatNodes = this.finder.findSuitable(nodes), targetNode, i, len, list, listParent, siblings, formatNode, marginLeft;\n                formatNodes = this.mapImmutables(formatNodes);\n                for (i = 0, len = formatNodes.length; i < len; i++) {\n                    formatNode = $(formatNodes[i]);\n                    if (formatNode.is('li')) {\n                        list = formatNode.parent();\n                        listParent = list.parent();\n                        if (listParent.is('li,ul,ol') && !indent(list[0])) {\n                            if (targetNode && $.contains(targetNode, listParent[0])) {\n                                continue;\n                            }\n                            siblings = formatNode.nextAll('li');\n                            if (siblings.length) {\n                                $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                            }\n                            if (listParent.is('li')) {\n                                formatNode.insertAfter(listParent);\n                            } else {\n                                formatNode.appendTo(listParent);\n                            }\n                            if (!list.children('li').length) {\n                                list.remove();\n                            }\n                            continue;\n                        } else {\n                            if (targetNode == list[0]) {\n                                continue;\n                            }\n                            targetNode = list[0];\n                        }\n                    } else {\n                        targetNode = formatNodes[i];\n                    }\n                    marginLeft = parseInt(indent(targetNode), 10) - 30;\n                    indent(targetNode, marginLeft);\n                }\n            }\n        });\n        var IndentCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: $.proxy(function (range) {\n                        var indentFormatter = new IndentFormatter();\n                        indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                        indentFormatter.apply(RangeUtils.nodes(range));\n                    }, that)\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: $.proxy(function (range) {\n                        var indentFormatter = new IndentFormatter();\n                        indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                        indentFormatter.remove(RangeUtils.nodes(range));\n                    }, that)\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                $.extend(this.options, { immutables: options.editor && options.editor.options.immutables });\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                var suitableNodes = this.finder.findSuitable(nodes), isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n                for (i = 0, len = suitableNodes.length; i < len; i++) {\n                    suitable = suitableNodes[i];\n                    if (this.options.immutables) {\n                        immutableParent = Editor.Immutables.immutableParent(suitable);\n                        if (immutableParent) {\n                            suitable = immutableParent;\n                        }\n                    }\n                    isOutdentable = indent(suitable);\n                    if (!isOutdentable) {\n                        listParentsCount = $(suitable).parents('ul,ol').length;\n                        isOutdentable = dom.is(suitable, 'li') && (listParentsCount > 1 || indent(suitable.parentNode)) || dom.ofType(suitable, [\n                            'ul',\n                            'ol'\n                        ]) && listParentsCount > 0;\n                    }\n                    if (isOutdentable) {\n                        ui.removeClass('k-state-disabled');\n                        return;\n                    }\n                }\n                ui.addClass('k-state-disabled').removeClass('k-state-hover');\n            }\n        });\n        extend(Editor, {\n            IndentFormatter: IndentFormatter,\n            IndentCommand: IndentCommand,\n            OutdentCommand: OutdentCommand,\n            OutdentTool: OutdentTool\n        });\n        registerTool('indent', new Tool({\n            command: IndentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Indent'\n            })\n        }));\n        registerTool('outdent', new OutdentTool({\n            command: OutdentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Outdent'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/linebreak', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, extend = $.extend, editorNS = kendo.ui.editor, dom = editorNS.Dom, Command = editorNS.Command, Tool = editorNS.Tool, BlockFormatter = editorNS.BlockFormatter, normalize = dom.normalize, RangeUtils = editorNS.RangeUtils, registerTool = editorNS.EditorUtils.registerTool;\n        var ParagraphCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            _insertMarker: function (doc, range) {\n                var marker = dom.create(doc, 'a'), container;\n                marker.className = 'k-marker';\n                range.insertNode(marker);\n                if (!marker.parentNode) {\n                    container = range.commonAncestorContainer;\n                    container.innerHTML = '';\n                    container.appendChild(marker);\n                }\n                normalize(marker.parentNode);\n                return marker;\n            },\n            _moveFocus: function (range, candidate) {\n                if (dom.isEmpty(candidate)) {\n                    range.setStartBefore(candidate);\n                } else {\n                    range.selectNodeContents(candidate);\n                    var focusNode = RangeUtils.textNodes(range)[0];\n                    if (!focusNode) {\n                        while (candidate.childNodes.length && !dom.is(candidate.firstChild, 'br')) {\n                            candidate = candidate.firstChild;\n                        }\n                        focusNode = candidate;\n                    }\n                    if (dom.isEmpty(focusNode)) {\n                        range.setStartBefore(focusNode);\n                    } else {\n                        if (dom.emptyNode(focusNode)) {\n                            focusNode.innerHTML = '\\uFEFF';\n                        }\n                        var startNode = focusNode.firstChild || focusNode;\n                        if (dom.isDataNode(startNode)) {\n                            range.setStart(startNode, 0);\n                        } else {\n                            range.setStartBefore(startNode);\n                        }\n                    }\n                }\n            },\n            shouldTrim: function (range) {\n                var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','), startInBlock = dom.parentOfType(range.startContainer, blocks), endInBlock = dom.parentOfType(range.endContainer, blocks);\n                return startInBlock && !endInBlock || !startInBlock && endInBlock;\n            },\n            _blankAfter: function (node) {\n                while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === '')) {\n                    node = node.nextSibling;\n                }\n                return !node;\n            },\n            exec: function () {\n                var range = this.getRange(), doc = RangeUtils.documentFromRange(range), parent, previous, next, emptyParagraphContent = editorNS.emptyElementContent, paragraph, marker, li, heading, tableNode, rng, shouldTrim;\n                this.expandImmutablesIn(range);\n                shouldTrim = this.shouldTrim(range);\n                range.deleteContents();\n                marker = this._insertMarker(doc, range);\n                dom.stripBomNode(marker.previousSibling);\n                dom.stripBomNode(marker.nextSibling);\n                li = dom.closestEditableOfType(marker, ['li']);\n                heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n                tableNode = dom.is(marker.parentNode, 'table') && marker.parentNode;\n                if (li) {\n                    if (dom.emptyNode(li)) {\n                        paragraph = dom.create(doc, 'p');\n                        if (dom.next(li)) {\n                            rng = range.cloneRange();\n                            rng.selectNode(li);\n                            RangeUtils.split(rng, li.parentNode);\n                        }\n                        var br = $('br', li);\n                        if (br.length == 1) {\n                            br.remove();\n                        }\n                        var parentNode = li.parentNode;\n                        var parentChildrenLength = li.parentNode.children.length;\n                        var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n                        dom.insertAfter(paragraph, parentNode);\n                        dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n                        if (firstChild && firstChild !== marker) {\n                            paragraph.appendChild(firstChild);\n                            paragraph.appendChild(marker);\n                        } else {\n                            paragraph.innerHTML = emptyParagraphContent;\n                        }\n                        next = paragraph;\n                    }\n                } else if (heading && this._blankAfter(marker)) {\n                    paragraph = this._insertParagraphAfter(heading);\n                    dom.remove(marker);\n                    next = paragraph;\n                } else if (tableNode) {\n                    paragraph = this._insertParagraphAfter(tableNode);\n                    dom.remove(marker);\n                    next = paragraph;\n                }\n                if (!next) {\n                    if (!(li || heading)) {\n                        new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n                    }\n                    range.selectNode(marker);\n                    parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n                    RangeUtils.split(range, parent, shouldTrim);\n                    previous = parent.previousSibling;\n                    if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                        previous = previous.firstChild;\n                    }\n                    next = parent.nextSibling;\n                    this.clean(previous, { links: true });\n                    this.clean(next, { links: true });\n                    if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                        next = next.firstChild;\n                    }\n                    dom.remove(parent);\n                    normalize(previous);\n                }\n                normalize(next);\n                this._moveFocus(range, next);\n                range.collapse(true);\n                dom.scrollTo(next, true);\n                RangeUtils.selectRange(range);\n            },\n            _insertParagraphAfter: function (node) {\n                var range = this.getRange();\n                var doc = RangeUtils.documentFromRange(range);\n                var emptyElementContent = editorNS.emptyElementContent;\n                var paragraph = dom.create(doc, 'p');\n                dom.insertAfter(paragraph, node);\n                paragraph.innerHTML = emptyElementContent;\n                return paragraph;\n            },\n            clean: function (node, options) {\n                var root = node;\n                if (node.firstChild && dom.is(node.firstChild, 'br')) {\n                    dom.remove(node.firstChild);\n                }\n                if (dom.isDataNode(node) && !node.nodeValue) {\n                    node = node.parentNode;\n                }\n                if (node) {\n                    var siblings = false;\n                    while (node.firstChild && node.firstChild.nodeType == 1) {\n                        siblings = siblings || dom.significantNodes(node.childNodes).length > 1;\n                        node = node.firstChild;\n                    }\n                    if (!dom.isEmpty(node) && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                        $(root).find('.k-br').remove();\n                        node.innerHTML = editorNS.emptyElementContent;\n                    }\n                    if (options && options.links) {\n                        while (node != root) {\n                            if (dom.is(node, 'a') && dom.emptyNode(node)) {\n                                dom.unwrap(node);\n                                break;\n                            }\n                            node = node.parentNode;\n                        }\n                    }\n                }\n            }\n        });\n        var NewLineCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var range = this.getRange();\n                this.expandImmutablesIn(range);\n                var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n                var node = range.startContainer;\n                var filler;\n                var browser = kendo.support.browser;\n                var oldIE = browser.msie && browser.version < 11;\n                var tableNode = dom.is(node, 'table') && node;\n                range.deleteContents();\n                if (tableNode) {\n                    dom.insertAfter(br, tableNode);\n                } else {\n                    range.insertNode(br);\n                }\n                normalize(br.parentNode);\n                if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n                    if (!!br.nextSibling && dom.isWhitespace(br.nextSibling)) {\n                        br.nextSibling.remove();\n                    }\n                    filler = br.cloneNode(true);\n                    filler.className = 'k-br';\n                    dom.insertAfter(filler, br);\n                }\n                range.setStartAfter(br);\n                range.collapse(true);\n                dom.scrollTo(br.nextSibling || br, true);\n                RangeUtils.selectRange(range);\n            }\n        });\n        extend(editorNS, {\n            ParagraphCommand: ParagraphCommand,\n            NewLineCommand: NewLineCommand\n        });\n        registerTool('insertLineBreak', new Tool({\n            key: 13,\n            shift: true,\n            command: NewLineCommand\n        }));\n        registerTool('insertParagraph', new Tool({\n            key: 13,\n            command: ParagraphCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/file', [\n        'kendo.filebrowser',\n        'editor/plugins/link'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, LinkFormatter = Editor.LinkFormatter, textNodes = RangeUtils.textNodes, keys = kendo.keys, KEDITORFILEURL = '#k-editor-file-url', KEDITORFILETEXT = '#k-editor-file-text', KEDITORFILETITLE = '#k-editor-file-title';\n        var FileCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.formatter = new LinkFormatter();\n                that.async = true;\n                that.attributes = {};\n            },\n            insertFile: function (file, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.href && attributes.href != 'http://') {\n                    if (!file) {\n                        file = dom.create(doc, 'a', { href: attributes.href });\n                        file.innerHTML = attributes.innerHTML;\n                        file.title = attributes.title;\n                        range.deleteContents();\n                        range.insertNode(file);\n                        if (!file.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), file);\n                        }\n                        range.setStartAfter(file);\n                        range.setEndAfter(file);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        dom.attr(file, attributes);\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\"k-edit-form-content\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-url\">#: messages.fileWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-file-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-text\">#: messages.fileText #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-file-text\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-title\">#: messages.fileTitle #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-file-title\">' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                this.formatter.apply(range, this.attributes);\n                that.releaseRange(range);\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), nodes = textNodes(range), applied = false, file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null, dialog, isIE = kendo.support.browser.msie, options = that.editor.options, messages = options.messages, fileBrowser = options.fileBrowser, showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertFile,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                this.expandImmutablesIn(range);\n                function apply(e) {\n                    var element = dialog.element, href = element.find(KEDITORFILEURL).val().replace(/ /g, '%20'), innerHTML = element.find(KEDITORFILETEXT).val(), title = element.find(KEDITORFILETITLE).val();\n                    that.attributes = {\n                        href: href,\n                        innerHTML: innerHTML !== '' ? innerHTML : href,\n                        title: title\n                    };\n                    applied = that.insertFile(file, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORFILEURL).val(file ? file.getAttribute('href', 2) : 'http://').end().find(KEDITORFILETEXT).val(file ? file.innerText : '').end().find(KEDITORFILETITLE).val(file ? file.title : '').end().data('kendoWindow');\n                var element = dialog.element;\n                if (showBrowser) {\n                    that._fileBrowser = new kendo.ui.FileBrowser(element.find('.k-filebrowser'), extend({}, fileBrowser));\n                    that._fileBrowser.bind('change', function (ev) {\n                        if (ev.selected.get('type') === 'f') {\n                            element.find(KEDITORFILEURL).val(this.value());\n                        }\n                    });\n                    that._fileBrowser.bind('apply', apply);\n                }\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n                dialog.center().open();\n                element.find(KEDITORFILEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.FileCommand = FileCommand;\n        registerTool('insertFile', new Editor.Tool({\n            command: FileCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert File'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/tables', [\n        'editor/plugins/formatblock',\n        'editor/plugins/insert'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, Command = Editor.Command, NS = 'kendoEditor', ACTIVESTATE = 'k-state-active', SELECTEDSTATE = 'k-state-selected', SCOPE = 'scope', ROW = 'row', COL = 'col', ROWGROUP = 'rowgroup', COLGROUP = 'colgroup', COLSPAN = 'colspan', ROWSPAN = 'rowspan', TABLE = 'table', THEAD = 'thead', TBODY = 'tbody', TR = 'tr', TD = 'td', TH = 'th', Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InsertHtmlCommand = Editor.InsertHtmlCommand, BlockFormatFinder = Editor.BlockFormatFinder, BlockFormatTool = Editor.BlockFormatTool, FormatCommand = Editor.FormatCommand, registerTool = Editor.EditorUtils.registerTool, registerFormat = Editor.EditorUtils.registerFormat, formats = kendo.ui.Editor.fn.options.formats, getTouches = kendo.getTouches;\n        var template = kendo.template;\n        var columnTemplate = '<td style=\\'width:#=width#%;\\'>#=content#</td>';\n        var tableFormatFinder = new BlockFormatFinder([{ tags: [TABLE] }]);\n        var TableCommand = InsertHtmlCommand.extend({\n            init: function (options) {\n                var o = $.extend({\n                    postProcess: this.postProcess,\n                    skipCleaners: true\n                }, options || {});\n                InsertHtmlCommand.fn.init.call(this, o);\n            },\n            _tableHtml: function (rows, columns) {\n                rows = rows || 1;\n                columns = columns || 1;\n                var columnHtml = template(columnTemplate)({\n                    width: 100 / columns,\n                    content: Editor.emptyTableCellContent\n                });\n                var rowHeight = 100 / rows;\n                return '<table class=\\'k-table\\' data-last>' + new Array(rows + 1).join('<tr style=\\'height:' + rowHeight + '%;\\'>' + new Array(columns + 1).join(columnHtml) + '</tr>') + '</table>';\n            },\n            postProcess: function (editor, range) {\n                var insertedTable = $('table[data-last]', editor.document).removeAttr('data-last');\n                range.setStart(insertedTable.find(TD)[0], 0);\n                range.collapse(true);\n                editor.selectRange(range);\n            },\n            exec: function () {\n                var options = this.options;\n                options.html = this._tableHtml(options.rows, options.columns);\n                InsertHtmlCommand.fn.exec.call(this);\n            }\n        });\n        var PopupTool = Tool.extend({\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                var popup = $(this.options.popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    copyAnchorStyles: false,\n                    open: proxy(this._open, this),\n                    activate: proxy(this._activate, this),\n                    close: proxy(this._close, this)\n                }).data('kendoPopup');\n                ui.click(proxy(this._toggle, this)).keydown(proxy(this._keydown, this));\n                var editor = this._editor = options.editor;\n                this._popup = popup;\n                var tableWizard = new Editor.TableWizardTool({\n                    template: new ToolTemplate({\n                        template: EditorUtils.tableWizardButtonTemplate,\n                        title: editor.options.messages.tableWizard\n                    }),\n                    command: Editor.TableWizardCommand,\n                    insertNewTable: true\n                });\n                registerTool('tableWizardInsert', tableWizard);\n                var twTool = $('<div>' + tableWizard.options.template.getHtml() + '</div>');\n                twTool.appendTo(popup.element);\n                if (editor.toolbar) {\n                    editor.toolbar.attachToolsEvents(twTool);\n                }\n            },\n            popup: function () {\n                return this._popup;\n            },\n            _activate: $.noop,\n            _open: function () {\n                this._popup.options.anchor.addClass(ACTIVESTATE);\n            },\n            _close: function () {\n                this._popup.options.anchor.removeClass(ACTIVESTATE);\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                if (key == keys.DOWN && e.altKey) {\n                    this._popup.open();\n                } else if (key == keys.ESC) {\n                    this._popup.close();\n                }\n            },\n            _toggle: function (e) {\n                var button = $(e.target).closest('.k-tool');\n                if (!button.hasClass('k-state-disabled')) {\n                    this.popup().toggle();\n                }\n            },\n            update: function (ui) {\n                var popup = this.popup();\n                if (popup.wrapper && popup.wrapper.css('display') == 'block') {\n                    popup.close();\n                }\n                ui.removeClass('k-state-hover');\n            },\n            destroy: function () {\n                this._popup.destroy();\n            }\n        });\n        var InsertTableTool = PopupTool.extend({\n            init: function (options) {\n                this.cols = 8;\n                this.rows = 6;\n                PopupTool.fn.init.call(this, $.extend(options, {\n                    command: TableCommand,\n                    popupTemplate: '<div class=\\'k-ct-popup\\'>' + '<div>' + new Array(this.cols * this.rows + 1).join('<span class=\\'k-ct-cell k-state-disabled\\'></span>') + '</div>' + '<div class=\\'k-status\\'></div>' + '</div>'\n                }));\n            },\n            _activate: function () {\n                var that = this, element = that._popup.element, cells = element.find('.k-ct-cell'), firstCell = cells.eq(0), lastCell = cells.eq(cells.length - 1), start = kendo.getOffset(firstCell), end = kendo.getOffset(lastCell), cols = that.cols, rows = that.rows, cellWidth, cellHeight;\n                element.find('*').addBack().attr('unselectable', 'on');\n                end.left += lastCell[0].offsetWidth;\n                end.top += lastCell[0].offsetHeight;\n                cellWidth = (end.left - start.left) / cols;\n                cellHeight = (end.top - start.top) / rows;\n                function tableFromLocation(e) {\n                    var w = $(window);\n                    return {\n                        row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                        col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n                    };\n                }\n                element.autoApplyNS(NS).on('mousemove', '.k-ct-cell', function (e) {\n                    that._setTableSize(tableFromLocation(e));\n                }).on('mouseleave', '.k-ct-cell', function () {\n                    that._setTableSize();\n                }).on('down', '.k-ct-cell', function (e) {\n                    e.preventDefault();\n                    var touch = getTouches(e)[0];\n                    that._exec(tableFromLocation(touch.location));\n                });\n            },\n            _valid: function (size) {\n                return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n            },\n            _exec: function (size) {\n                if (this._valid(size)) {\n                    this._editor.exec('createTable', {\n                        rows: size.row,\n                        columns: size.col\n                    });\n                    this._popup.close();\n                }\n            },\n            _setTableSize: function (size) {\n                var element = this._popup.element;\n                var status = element.find('.k-status');\n                var cells = element.find('.k-ct-cell');\n                var cols = this.cols;\n                var messages = this._editor.options.messages;\n                if (this._valid(size)) {\n                    status.text(kendo.format(messages.createTableHint, size.row, size.col));\n                    cells.each(function (i) {\n                        $(this).toggleClass(SELECTEDSTATE, i % cols < size.col && i / cols < size.row);\n                    });\n                } else {\n                    status.text(messages.createTable);\n                    cells.removeClass(SELECTEDSTATE);\n                }\n            },\n            _keydown: function (e) {\n                PopupTool.fn._keydown.call(this, e);\n                if (!this._popup.visible()) {\n                    return;\n                }\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                var cells = this._popup.element.find('.k-ct-cell');\n                var focus = Math.max(cells.filter('.k-state-selected').last().index(), 0);\n                var selectedRows = Math.floor(focus / this.cols);\n                var selectedColumns = focus % this.cols;\n                var changed = false;\n                if (key == keys.DOWN && !e.altKey) {\n                    changed = true;\n                    selectedRows++;\n                } else if (key == keys.UP) {\n                    changed = true;\n                    selectedRows--;\n                } else if (key == keys.RIGHT) {\n                    changed = true;\n                    selectedColumns++;\n                } else if (key == keys.LEFT) {\n                    changed = true;\n                    selectedColumns--;\n                }\n                var tableSize = {\n                    row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n                    col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n                };\n                if (key == keys.ENTER) {\n                    this._exec(tableSize);\n                } else {\n                    this._setTableSize(tableSize);\n                }\n                if (changed) {\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                }\n            },\n            _open: function () {\n                var messages = this._editor.options.messages;\n                PopupTool.fn._open.call(this);\n                this.popup().element.find('.k-status').text(messages.createTable).end().find('.k-ct-cell').removeClass(SELECTEDSTATE);\n            },\n            _close: function () {\n                PopupTool.fn._close.call(this);\n                this.popup().element.off('.' + NS);\n            }\n        });\n        var TableModificationCommand = Command.extend({\n            undo: function () {\n                var point = this.restorePoint;\n                point.restoreHtml();\n                $(this.editor.body).find('.k-table-resize-handle-wrapper').each(function (index, el) {\n                    el.remove();\n                });\n                this.editor.selectRange(point.toRange());\n            },\n            _clearColIndexAttr: function (table) {\n                dom.clearTableMappings(table, 'col-index');\n            },\n            _mapColIndices: function (table) {\n                dom.reMapTableColumns(table, 'col-index');\n            },\n            _findRowSpanCell: function (parent, rowIndex, colIndex) {\n                var row, cell;\n                for (var i = rowIndex; i >= 0; i--) {\n                    row = parent.rows[i];\n                    cell = $(row).find('[col-index=' + colIndex + ']');\n                    if (cell.length) {\n                        return cell;\n                    }\n                }\n            },\n            _resetTableResizing: function (editor) {\n                editor._destroyResizings();\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeTableResizing();\n            },\n            _findNextTdInRow: function (row, colIndex) {\n                var lastTd = row.find('td:last-child'), lastIndex = parseInt(lastTd.attr('col-index'), 10) + lastTd.prop('colSpan') - 1, td;\n                for (var i = colIndex; i <= lastIndex; i++) {\n                    td = row.find('[col-index=' + i + ']');\n                    if (td.length) {\n                        return td;\n                    }\n                }\n            },\n            _adjustColgroups: function (row, table) {\n                var colElements = table.getElementsByTagName(COL), colgroupElements = table.getElementsByTagName(COLGROUP), cells = row.cells, numberOfCells = cells.length, i, colgroup, cell;\n                while (colElements.length > 0) {\n                    colElements[0].remove();\n                }\n                while (colgroupElements.length > 0) {\n                    colgroupElements[0].remove();\n                }\n                for (i = numberOfCells - 1; i >= 0; i--) {\n                    cell = cells[i];\n                    if (cell.getAttribute(SCOPE) === COLGROUP) {\n                        colgroup = dom.createEmptyNode(this.editor.document, COLGROUP);\n                        colgroup.setAttribute('span', cell.getAttribute(COLSPAN));\n                        table.prepend(colgroup);\n                    } else {\n                        table.prepend(dom.createEmptyNode(this.editor.document, COL));\n                    }\n                }\n            },\n            _associateHeaderIds: function (table) {\n                dom.clearTableMappings(table, 'col-index');\n                dom.reMapTableColumns(table, 'col-index');\n                $(table).find('th, td').removeAttr('id headers');\n                dom.associateWithIds(table);\n            },\n            _getNumberOfColumns: function (table) {\n                return dom._getNumberOfColumns(table, 'td, th');\n            }\n        });\n        var InsertRowCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = dom.closest(range.endContainer, [\n                        TD,\n                        TH\n                    ]), table = dom.closest(td, TABLE), position = this.options.position || 'after', cellCount, row, cell, newRow, rowIndex, rowSpanIndex, createdCell;\n                if (!table || this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n                this._mapColIndices(table);\n                row = td.parentNode;\n                rowIndex = dom.findNodeIndex(row, true);\n                if (td.rowSpan > 1 && position === 'after') {\n                    row = table.rows[rowIndex + td.rowSpan - 1];\n                }\n                cellCount = this._getNumberOfColumns(table);\n                newRow = row.cloneNode(true);\n                $(newRow).empty();\n                for (var i = 0; i < cellCount; i = i + cell.prop('colSpan')) {\n                    cell = $(row).find('[col-index=' + i + ']');\n                    if (cell.length) {\n                        if (cell.prop('rowSpan') > 1 && position === 'after' && cell) {\n                            cell.attr(ROWSPAN, cell.prop('rowSpan') + 1);\n                        } else {\n                            this._appendCell(newRow, cell);\n                        }\n                    } else {\n                        rowIndex = dom.findNodeIndex(row, true);\n                        cell = this._findRowSpanCell(row.parentElement, rowIndex, i);\n                        rowSpanIndex = cell.closest(TR).index();\n                        if (rowSpanIndex + cell.prop('rowSpan') - 1 === rowIndex && position === 'after') {\n                            this._appendCell(newRow, cell);\n                        } else {\n                            cell.attr(ROWSPAN, cell.prop('rowSpan') + 1);\n                        }\n                    }\n                    createdCell = $(newRow).find('[col-index=' + i + ']');\n                    if (createdCell.attr(SCOPE) === ROWGROUP && !createdCell.attr(ROWSPAN)) {\n                        createdCell.attr(SCOPE, ROW);\n                    }\n                }\n                if (position == 'before') {\n                    dom.insertBefore(newRow, row);\n                } else {\n                    dom.insertAfter(newRow, row);\n                }\n                if ($(table).find('[headers]').length > 0) {\n                    this._associateHeaderIds(table);\n                }\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                this._resetTableResizing(this.editor);\n            },\n            _appendCell: function (row, cell) {\n                var newCell;\n                newCell = cell.clone();\n                newCell.html(Editor.emptyTableCellContent);\n                newCell.removeAttr(ROWSPAN);\n                newCell.appendTo(row);\n            }\n        });\n        var InsertColumnCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = dom.closest(range.endContainer, [\n                        TD,\n                        TH\n                    ]), table = dom.closest(td, TABLE), colElements = table.getElementsByTagName(COL), colgroupElements = table.getElementsByTagName(COLGROUP), columnIndex, i, rows = table && table.rows, cell, newCell, position = this.options.position || 'after';\n                if (!td || this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n                this._mapColIndices(table);\n                columnIndex = parseInt(td.getAttribute('col-index'), 10);\n                if (td.colSpan > 1 && position === 'after') {\n                    td.setAttribute('col-index', columnIndex + td.colSpan - 1);\n                    columnIndex = columnIndex + td.colSpan - 1;\n                }\n                for (i = 0; i < rows.length; i++) {\n                    cell = this._processForColSpan(rows[i], columnIndex, position, td);\n                    if (!cell) {\n                        continue;\n                    }\n                    newCell = cell.cloneNode();\n                    newCell.innerHTML = Editor.emptyTableCellContent;\n                    newCell.removeAttribute(COLSPAN);\n                    if (newCell.getAttribute(SCOPE) && newCell.getAttribute(SCOPE) === COLGROUP) {\n                        newCell.setAttribute(SCOPE, COL);\n                    }\n                    if (position == 'before') {\n                        dom.insertBefore(newCell, cell);\n                    } else {\n                        dom.insertAfter(newCell, cell);\n                    }\n                    this._resizeCells(newCell, cell);\n                }\n                if (colElements.length > 0 || colgroupElements.length > 0) {\n                    this._adjustColgroups(rows[0], table);\n                }\n                if ($(table).find('[headers]').length > 0) {\n                    this._associateHeaderIds(table);\n                }\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                this._resetTableResizing(this.editor);\n            },\n            _processForColSpan: function (row, columnIndex, position, selectedCell) {\n                var cell, colSpanEffect, index = columnIndex - 1;\n                cell = $(row).find('[col-index=' + columnIndex + ']')[0];\n                if (cell && cell.colSpan > 1 && position === 'after' && cell !== selectedCell) {\n                    cell.colSpan += 1;\n                    return;\n                }\n                if (cell) {\n                    return cell;\n                }\n                for (index; index >= 0; index--) {\n                    cell = $(row).find('[col-index=' + index + ']')[0];\n                    if (cell && cell.colSpan > 1) {\n                        break;\n                    }\n                }\n                if (!cell) {\n                    return;\n                }\n                colSpanEffect = parseInt(cell.getAttribute('col-index'), 10) + cell.colSpan - 1;\n                if (colSpanEffect === columnIndex && position === 'after') {\n                    return cell;\n                } else if (columnIndex <= colSpanEffect) {\n                    cell.setAttribute(COLSPAN, cell.colSpan + 1);\n                }\n            },\n            _resizeCells: function (newCell, cell) {\n                var width = newCell.style.width, parsedWidth, unit, calculatedWidth;\n                if (!width) {\n                    return;\n                }\n                parsedWidth = parseFloat(width);\n                unit = width.slice(parsedWidth.toString().length);\n                calculatedWidth = parsedWidth / 2 + unit;\n                newCell.style.width = calculatedWidth;\n                cell.style.width = calculatedWidth;\n            }\n        });\n        var DeleteRowCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange();\n                var rows = RangeUtils.mapAll(range, function (node) {\n                    return $(node).closest(TR)[0];\n                });\n                var td = dom.closest(range.endContainer, [\n                    TD,\n                    TH\n                ]);\n                var row = rows[0];\n                var rowSpan = td ? td.rowSpan : 1;\n                var rowIndex = $(rows[0]).index();\n                var table = dom.closest(row, TABLE);\n                var rowParent = row.parentElement;\n                var focusElement;\n                if (!table || this.immutables() && Editor.Immutables.immutableParent(row)) {\n                    this.releaseRange(range);\n                    return;\n                }\n                for (var x = 0; x < rowSpan; x++) {\n                    if (rows.indexOf(rowParent.rows[rowIndex + x]) < 0) {\n                        rows.push(rowParent.rows[rowIndex + x]);\n                    }\n                }\n                if (table.rows.length <= rows.length) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    if (focusElement && focusElement.rows) {\n                        focusElement = focusElement.rows[0].cells[0];\n                    }\n                    dom.remove(table);\n                    this._resetTableResizing(this.editor);\n                } else if (rowParent.rows.length <= rows.length) {\n                    focusElement = rowParent.nextSibling;\n                    if (!focusElement) {\n                        focusElement = rowParent.previousSibling;\n                    }\n                    dom.remove(rowParent);\n                } else {\n                    this._mapColIndices(table);\n                    for (var i = 0; i < rows.length; i++) {\n                        row = rows[i];\n                        dom.removeTextSiblings(row);\n                        focusElement = dom.next(row) || dom.prev(row);\n                        focusElement = focusElement.cells[0];\n                        this._focusElement(range, focusElement);\n                        focusElement = null;\n                        this._handleRowSpanCells(table, row);\n                        dom.remove(row);\n                    }\n                    this._clearColIndexAttr(table);\n                }\n                if ($(table).find('[headers]').length > 0) {\n                    this._associateHeaderIds(table);\n                } else if (dom.is(rowParent, THEAD) && $(table).find('[scope]').length > 0) {\n                    this._adjustColgroups(rowParent.rows[0], table);\n                }\n                if (focusElement) {\n                    this._focusElement(range, focusElement);\n                }\n                this._resetTableResizing(this.editor);\n            },\n            _focusElement: function (range, node) {\n                range.setStart(node, 0);\n                range.collapse(true);\n                this.editor.selectRange(range);\n            },\n            _handleRowSpanCells: function (table, row) {\n                var index, cell, adjacentCell, nextRow, rowIndex = dom.findNodeIndex(row, true), firstRow = table.rows[0], lastCell = firstRow.cells[firstRow.cells.length - 1], lastIndex = parseInt(lastCell.getAttribute('col-index'), 10) + lastCell.colSpan - 1;\n                for (index = 0; index <= lastIndex; index = index + cell.prop('colSpan')) {\n                    cell = $(row).find('[col-index=' + index + ']');\n                    if (cell.length && cell.prop('rowSpan') > 1) {\n                        nextRow = table.rows[rowIndex + 1];\n                        adjacentCell = $(nextRow).find('[col-index=' + (index + 1) + ']');\n                        if (adjacentCell.length) {\n                            adjacentCell.before(cell);\n                        } else {\n                            $(nextRow).append(cell);\n                        }\n                        this._reduceRowSpan(cell);\n                    }\n                    if (!cell.length) {\n                        cell = this._findRowSpanCell(row.parentElement, rowIndex, index);\n                        this._reduceRowSpan(cell);\n                    }\n                }\n            },\n            _reduceRowSpan: function (td) {\n                var rowSpanValue = td.prop('rowSpan') - 1;\n                if (rowSpanValue <= 1) {\n                    td.removeAttr(ROWSPAN);\n                    if (td.attr(SCOPE) === ROWGROUP) {\n                        td.attr(SCOPE, ROW);\n                    }\n                } else {\n                    td.attr(ROWSPAN, rowSpanValue);\n                }\n            }\n        });\n        var DeleteColumnCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(), td = dom.closest(range.endContainer, [\n                        TD,\n                        TH\n                    ]), table = dom.closest(td, TABLE), rows = table && table.rows, columnIndex = dom.findNodeIndex(td, true), columnCount = rows && rows[0].cells.length, colElements = table.getElementsByTagName(COL), colgroupElements = table.getElementsByTagName(COLGROUP), focusElement, i, cell, x;\n                if (!td || this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n                if (columnCount == 1 || td.colSpan == columnCount) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    if (focusElement && focusElement.rows) {\n                        focusElement = focusElement.rows[0].cells[0];\n                    }\n                    dom.remove(table);\n                    this._resetTableResizing(this.editor);\n                } else {\n                    dom.removeTextSiblings(td);\n                    focusElement = dom.next(td) || dom.prev(td);\n                    this._mapColIndices(table);\n                    columnIndex = parseInt(td.getAttribute('col-index'), 10);\n                    for (x = 0; x < td.colSpan; x++) {\n                        for (i = 0; i < rows.length; i = i + (cell.prop('rowSpan') || 1)) {\n                            cell = $(rows[i]).find('[col-index=' + (columnIndex + x) + ']');\n                            if (cell.length && cell.prop('colSpan') <= 1) {\n                                cell.remove();\n                            } else {\n                                this._handleColSpanCells(rows[i], columnIndex + x);\n                            }\n                        }\n                    }\n                    this._clearColIndexAttr(table);\n                }\n                if (colElements.length > 0 || colgroupElements.length > 0) {\n                    this._adjustColgroups(rows[0], table);\n                }\n                if ($(table).find('[headers]').length > 0) {\n                    this._associateHeaderIds(table);\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n                this._resetTableResizing(this.editor);\n            },\n            _handleColSpanCells: function (row, colIndex) {\n                var cell = $(row).find('[col-index=' + colIndex + ']');\n                if (cell.length && cell.prop('colSpan') > 1) {\n                    var clone = cell.clone(true);\n                    cell.after(clone);\n                    this._reduceColSpan(clone);\n                    clone.attr('col-index', parseInt(cell.attr('col-index'), 10) + 1);\n                    cell.remove();\n                    return;\n                }\n                for (var i = colIndex; i >= 0; i--) {\n                    cell = $(row).find('[col-index=' + i + ']');\n                    if (cell.length) {\n                        this._reduceColSpan(cell);\n                        cell.attr('col-index', parseInt(cell.attr('col-index'), 10) + 1);\n                        return;\n                    }\n                }\n            },\n            _reduceColSpan: function (td) {\n                var colSpanValue = td.prop('colSpan') - 1;\n                if (colSpanValue <= 1) {\n                    td.removeAttr(COLSPAN);\n                    if (td.attr(SCOPE) === COLGROUP) {\n                        td.attr(SCOPE, COL);\n                    }\n                } else {\n                    td.attr(COLSPAN, colSpanValue);\n                }\n            }\n        });\n        var MergeCellsHorizontallyCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(), td = dom.closest(range.endContainer, [\n                        TD,\n                        TH\n                    ]), table, row, columnIndex, nextTd, colspan;\n                if (!td) {\n                    this.releaseRange(range);\n                    return;\n                }\n                table = dom.closest(td, TABLE);\n                row = td.parentNode;\n                columnIndex = dom.findNodeIndex(td, true);\n                nextTd = row.children[columnIndex + 1];\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n                this._mapColIndices(table);\n                columnIndex = parseInt($(td).attr('col-index'), 10);\n                nextTd = $(row).find('[col-index=' + (columnIndex + 1 + this._getColspan(td) - 1) + ']').get(0);\n                if (!nextTd || nextTd.rowSpan !== td.rowSpan || td.tagName !== nextTd.tagName) {\n                    this._clearColIndexAttr(table);\n                    this.releaseRange(range);\n                    return;\n                }\n                colspan = this._getColspan(td) + this._getColspan(nextTd);\n                $(td).prop(COLSPAN, colspan).append(dom.emptyNode(nextTd) ? '' : '<br/>' + nextTd.innerHTML);\n                $(td).width(td.offsetWidth);\n                $(nextTd).remove();\n                if (td.getAttribute(SCOPE) === COL) {\n                    td.setAttribute(SCOPE, COLGROUP);\n                }\n                if (td.getAttribute(SCOPE) === COLGROUP) {\n                    this._adjustColgroups(row, table);\n                }\n                if ($(table).find('[headers]').length > 0) {\n                    this._associateHeaderIds(table);\n                }\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                this._resetTableResizing(this.editor);\n            },\n            _getColspan: function (td) {\n                return parseInt(td.getAttribute(COLSPAN), 10) || 1;\n            }\n        });\n        var MergeCellsVerticallyCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(), td = dom.closest(range.endContainer, [\n                        TD,\n                        TH\n                    ]), tr, parent, table, columnIndex, rowIndex, targetRow, bottomTd;\n                if (!td) {\n                    this.releaseRange(range);\n                    return;\n                }\n                tr = dom.closest(td, TR);\n                parent = dom.closest(td, [\n                    THEAD,\n                    TBODY\n                ]);\n                table = dom.closest(td, TABLE);\n                columnIndex = dom.findNodeIndex(td, true);\n                rowIndex = dom.findNodeIndex(tr, true);\n                if (rowIndex + 1 === parent.rows.length) {\n                    this.releaseRange(range);\n                    return;\n                }\n                targetRow = parent.rows[rowIndex + this._getRowspan(td)];\n                bottomTd = targetRow && targetRow.children[columnIndex];\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n                this._mapColIndices(table);\n                columnIndex = $(td).attr('col-index');\n                bottomTd = $(targetRow).find('[col-index=' + columnIndex + ']').get(0);\n                if (!bottomTd || bottomTd.colSpan !== td.colSpan || td.tagName !== bottomTd.tagName) {\n                    this._clearColIndexAttr(table);\n                    this.releaseRange(range);\n                    return;\n                }\n                $(td).prop(ROWSPAN, this._getRowspan(td) + this._getRowspan(bottomTd)).append(dom.emptyNode(bottomTd) ? '' : '<br/>' + bottomTd.innerHTML);\n                if (td.getAttribute(SCOPE) === ROW) {\n                    td.setAttribute(SCOPE, ROWGROUP);\n                }\n                $(bottomTd).remove();\n                if ($(table).find('[headers]').length > 0) {\n                    this._associateHeaderIds(table);\n                }\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n            },\n            _getRowspan: function (td) {\n                return parseInt(td.getAttribute(ROWSPAN), 10) || 1;\n            }\n        });\n        var SplitCellCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(), type = this.options.type, attr = type === 'row' ? COLSPAN : ROWSPAN, td = dom.closest(range.endContainer, [\n                        TD,\n                        TH\n                    ]), parent = dom.closest(td, [\n                        THEAD,\n                        TBODY\n                    ]), table = dom.closest(td, TABLE), emptyTd = dom.createEmptyNode(this.editor.document, td.nodeName.toLowerCase());\n                if (!td || this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n                this._mapColIndices(table);\n                if (type === 'row' && $(td).is('[' + attr + ']')) {\n                    this._splitCellHorizontally(td, parent, attr, emptyTd);\n                } else if (type === 'column' && $(td).is('[' + attr + ']')) {\n                    this._splitCellVertically(td, parent, attr, emptyTd);\n                }\n                if ($(td).prop(attr.toLowerCase()) <= 1) {\n                    $(td).removeAttr(attr);\n                }\n                if ($(table).find('[headers]').length > 0) {\n                    this._associateHeaderIds(table);\n                }\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n            },\n            _getRowspanValue: function (td) {\n                return parseInt(td.getAttribute(ROWSPAN), 10);\n            },\n            _getColspanValue: function (td) {\n                return parseInt(td.getAttribute(COLSPAN), 10);\n            },\n            _splitCellHorizontally: function (td, parent, attr, emptyTd) {\n                var rowSpan = td.rowSpan, colSpan = td.colSpan, tdToAdd = $(emptyTd), colSpanResult = Math.floor(colSpan / 2);\n                if (colSpanResult > 1) {\n                    tdToAdd.attr(COLSPAN, colSpanResult);\n                }\n                if (rowSpan > 1) {\n                    tdToAdd.attr(ROWSPAN, rowSpan);\n                }\n                $(td).prop(attr, colSpan - colSpanResult).after(tdToAdd);\n                $(td).width(td.offsetWidth);\n                tdToAdd.width(tdToAdd[0].offsetWidth);\n                if (td.hasAttribute(SCOPE)) {\n                    if (td.getAttribute(SCOPE) === COLGROUP) {\n                        tdToAdd.attr(SCOPE, COL);\n                        if (!td.getAttribute(COLSPAN) || td.getAttribute(COLSPAN) === '1') {\n                            td.setAttribute(SCOPE, COL);\n                        }\n                        this._adjustColgroups(td.parentNode, parent.parentNode);\n                    } else {\n                        tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                    }\n                }\n            },\n            _splitCellVertically: function (td, parent, attr, emptyTd) {\n                var tr = dom.closest(td, TR), columnIndex = parseInt($(td).attr('col-index'), 10), rowIndex = dom.findNodeIndex(tr, true), rowSpan = td.rowSpan, colSpan = td.colSpan, rowSpanResult = Math.floor(rowSpan / 2), targetRow = $(parent).find(TR).eq(rowIndex + rowSpan - rowSpanResult), nextTd = this._findNextTdInRow(targetRow, columnIndex + colSpan), tdToAdd = $(emptyTd);\n                if (rowSpanResult > 1) {\n                    tdToAdd.attr(ROWSPAN, rowSpanResult);\n                }\n                if (colSpan > 1) {\n                    tdToAdd.attr(COLSPAN, colSpan);\n                }\n                if (nextTd && nextTd.length) {\n                    nextTd.before(tdToAdd);\n                } else {\n                    targetRow.append(tdToAdd);\n                }\n                $(td).prop(attr, rowSpan - rowSpanResult);\n                if (td.hasAttribute(SCOPE)) {\n                    if (td.getAttribute(SCOPE) === ROWGROUP) {\n                        tdToAdd.attr(SCOPE, ROW);\n                        if (!td.getAttribute(ROWSPAN) || td.getAttribute(ROWSPAN) === '1') {\n                            td.setAttribute(SCOPE, ROW);\n                        }\n                    } else {\n                        tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                    }\n                }\n            }\n        });\n        var TableModificationTool = Tool.extend({\n            command: function (options) {\n                var commandsMap = {\n                    row: {\n                        insert: InsertRowCommand,\n                        'delete': DeleteRowCommand,\n                        merge: MergeCellsHorizontallyCommand,\n                        split: SplitCellCommand\n                    },\n                    column: {\n                        insert: InsertColumnCommand,\n                        'delete': DeleteColumnCommand,\n                        merge: MergeCellsVerticallyCommand,\n                        split: SplitCellCommand\n                    }\n                };\n                options = extend(options, this.options);\n                options.action = options.action || 'insert';\n                return new commandsMap[options.type][options.action](options);\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n                ui.attr('disabled', 'disabled');\n            },\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                if (isFormatted === true) {\n                    ui.parent().addClass('k-hidden k-state-disabled');\n                    ui.attr('disabled', 'disabled');\n                    ui.addClass('k-state-disabled');\n                } else {\n                    ui.parent().removeClass('k-hidden k-state-disabled');\n                    ui.removeAttr('disabled');\n                    ui.removeClass('k-state-disabled');\n                }\n            }\n        });\n        var TableFormatCommand = FormatCommand.extend({\n            exec: function () {\n                var that = this;\n                var editor = that.editor;\n                FormatCommand.fn.exec.call(this);\n                if (editor.tableResizing) {\n                    editor.tableResizing._showResizeHandles();\n                }\n            }\n        });\n        var TableFormatTool = BlockFormatTool.extend({\n            initialize: function (ui, options) {\n                BlockFormatTool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n                ui.attr('disabled', 'disabled');\n            },\n            update: function (ui, nodes) {\n                var isTable = !tableFormatFinder.isFormatted(nodes);\n                var isFormatted = this.options.finder.isFormatted(nodes, this.isTable);\n                if (isTable === true) {\n                    ui.parent().addClass('k-hidden k-state-disabled');\n                    ui.attr('disabled', 'disabled');\n                    ui.addClass('k-state-disabled');\n                } else {\n                    ui.parent().removeClass('k-hidden k-state-disabled');\n                    ui.removeAttr('disabled');\n                    ui.removeClass('k-state-disabled');\n                }\n                ui.toggleClass('k-state-selected', isFormatted);\n                ui.attr('aria-pressed', isFormatted);\n            },\n            command: function (commandArguments) {\n                var that = this;\n                return new TableFormatCommand(extend(commandArguments, { formatter: that.options.formatter }));\n            },\n            isTable: function (node) {\n                return dom.is(node, 'table');\n            }\n        });\n        extend(kendo.ui.editor, {\n            PopupTool: PopupTool,\n            TableCommand: TableCommand,\n            InsertTableTool: InsertTableTool,\n            TableFormatTool: TableFormatTool,\n            TableFormatCommand: TableFormatCommand,\n            TableModificationTool: TableModificationTool,\n            InsertRowCommand: InsertRowCommand,\n            InsertColumnCommand: InsertColumnCommand,\n            DeleteRowCommand: DeleteRowCommand,\n            DeleteColumnCommand: DeleteColumnCommand,\n            MergeCellsHorizontallyCommand: MergeCellsHorizontallyCommand,\n            MergeCellsVerticallyCommand: MergeCellsVerticallyCommand,\n            SplitCellCommand: SplitCellCommand\n        });\n        registerTool('createTable', new InsertTableTool({\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                popup: true,\n                title: 'Create table'\n            })\n        }));\n        registerTool('addColumnLeft', new TableModificationTool({\n            type: 'column',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the left'\n            })\n        }));\n        registerTool('addColumnRight', new TableModificationTool({\n            type: 'column',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the right'\n            })\n        }));\n        registerTool('addRowAbove', new TableModificationTool({\n            type: 'row',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row above'\n            })\n        }));\n        registerTool('addRowBelow', new TableModificationTool({\n            type: 'row',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row below'\n            })\n        }));\n        registerTool('deleteRow', new TableModificationTool({\n            type: 'row',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete row'\n            })\n        }));\n        registerTool('deleteColumn', new TableModificationTool({\n            type: 'column',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete column'\n            })\n        }));\n        registerTool('mergeCellsHorizontally', new TableModificationTool({\n            type: 'row',\n            action: 'merge',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Merge Cell Right'\n            })\n        }));\n        registerTool('mergeCellsVertically', new TableModificationTool({\n            type: 'column',\n            action: 'merge',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Merge Cell Down'\n            })\n        }));\n        registerTool('splitCellHorizontally', new TableModificationTool({\n            type: 'row',\n            action: 'split',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Split Cell'\n            })\n        }));\n        registerTool('splitCellVertically', new TableModificationTool({\n            type: 'column',\n            action: 'split',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Split Cell'\n            })\n        }));\n        registerFormat('tableAlignLeft', [\n            {\n                tags: ['table'],\n                attr: {\n                    style: {\n                        marginLeft: '',\n                        marginRight: 'auto'\n                    }\n                }\n            },\n            {\n                tags: ['table'],\n                attr: { align: 'left' }\n            }\n        ]);\n        registerTool('tableAlignLeft', new TableFormatTool({\n            format: formats.tableAlignLeft,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Table Align Left'\n            })\n        }));\n        registerFormat('tableAlignCenter', [\n            {\n                tags: ['table'],\n                attr: {\n                    style: {\n                        marginLeft: 'auto',\n                        marginRight: 'auto'\n                    }\n                }\n            },\n            {\n                tags: ['table'],\n                attr: { align: 'center' }\n            }\n        ]);\n        registerTool('tableAlignCenter', new TableFormatTool({\n            format: formats.tableAlignCenter,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Table Align Center'\n            })\n        }));\n        registerFormat('tableAlignRight', [\n            {\n                tags: ['table'],\n                attr: {\n                    style: {\n                        marginLeft: 'auto',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['table'],\n                attr: { align: 'right' }\n            }\n        ]);\n        registerTool('tableAlignRight', new TableFormatTool({\n            format: formats.tableAlignRight,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Table Align Left'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/clipboard', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, RangeUtils = editorNS.RangeUtils, dom = editorNS.Dom, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, browser = kendo.support.browser, extend = $.extend;\n        var Clipboard = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                var pasteCleanup = editor.options.pasteCleanup;\n                this.cleaners = [\n                    new ScriptCleaner(pasteCleanup),\n                    new TabCleaner(pasteCleanup),\n                    new MSWordFormatCleaner(pasteCleanup),\n                    new WebkitFormatCleaner(pasteCleanup),\n                    new HtmlTagsCleaner(pasteCleanup),\n                    new HtmlAttrCleaner(pasteCleanup),\n                    new HtmlContentCleaner(pasteCleanup),\n                    new CustomCleaner(pasteCleanup)\n                ];\n            },\n            htmlToFragment: function (html) {\n                var editor = this.editor, doc = editor.document, container = dom.create(doc, 'div'), fragment = doc.createDocumentFragment();\n                container.innerHTML = html;\n                while (container.firstChild) {\n                    fragment.appendChild(container.firstChild);\n                }\n                return fragment;\n            },\n            isBlock: function (html) {\n                return /<(div|p|ul|ol|table|h[1-6])/i.test(html);\n            },\n            _startModification: function () {\n                var range;\n                var restorePoint;\n                var editor = this.editor;\n                if (this._inProgress) {\n                    return;\n                }\n                this._inProgress = true;\n                range = editor.getRange();\n                restorePoint = new RestorePoint(range, editor.body);\n                dom.persistScrollTop(editor.document);\n                return {\n                    range: range,\n                    restorePoint: restorePoint\n                };\n            },\n            _endModification: function (modificationInfo) {\n                editorNS._finishUpdate(this.editor, modificationInfo.restorePoint);\n                this.editor._selectionChange();\n                this._inProgress = false;\n            },\n            _contentModification: function (before, after) {\n                var that = this;\n                var editor = that.editor;\n                var modificationInfo = that._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                before.call(that, editor, modificationInfo.range);\n                setTimeout(function () {\n                    after.call(that, editor, modificationInfo.range);\n                    that._endModification(modificationInfo);\n                });\n            },\n            _removeBomNodes: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                for (var i = 0; i < nodes.length; i++) {\n                    nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue) || nodes[i].nodeValue;\n                }\n            },\n            _onBeforeCopy: function (range) {\n                var marker = new Marker();\n                marker.add(range);\n                this._removeBomNodes(range);\n                marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            oncopy: function () {\n                this._onBeforeCopy(this.editor.getRange());\n            },\n            oncut: function () {\n                this._onBeforeCopy(this.editor.getRange());\n                this._contentModification($.noop, $.noop);\n            },\n            _fileToDataURL: function (blob) {\n                var deferred = $.Deferred();\n                var reader = new FileReader();\n                if (!(blob instanceof window.File) && blob.getAsFile) {\n                    blob = blob.getAsFile();\n                }\n                reader.onload = $.proxy(deferred.resolve, deferred);\n                reader.readAsDataURL(blob);\n                return deferred.promise();\n            },\n            _triggerPaste: function (html, options) {\n                var args = { html: html || '' };\n                args.html = args.html.replace(/\\ufeff/g, '');\n                this.editor.trigger('paste', args);\n                this.paste(args.html, options || {});\n            },\n            _handleImagePaste: function (e) {\n                if (!('FileReader' in window) || browser.msie && browser.version > 10) {\n                    return;\n                }\n                var clipboardData = e.clipboardData || e.originalEvent.clipboardData || window.clipboardData || {};\n                var items = clipboardData.items || clipboardData.files;\n                return this._insertImages(items);\n            },\n            _insertImages: function (items) {\n                if (!items) {\n                    return;\n                }\n                var images = $.grep(items, function (item) {\n                    return /^image\\//i.test(item.type);\n                });\n                var html = $.grep(items, function (item) {\n                    return /^text\\/html/i.test(item.type);\n                });\n                if (html.length || !images.length) {\n                    return;\n                }\n                var modificationInfo = this._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                $.when.apply($, $.map(images, this._fileToDataURL)).done($.proxy(function () {\n                    var results = Array.prototype.slice.call(arguments);\n                    var html = $.map(results, function (e) {\n                        return '<img src=\"' + e.target.result + '\" />';\n                    }).join('');\n                    this._triggerPaste(html);\n                    this._endModification(modificationInfo);\n                }, this));\n                return true;\n            },\n            onpaste: function (e) {\n                if (this.editor.body.contentEditable === 'false') {\n                    return;\n                }\n                if (this._handleImagePaste(e)) {\n                    e.preventDefault();\n                    return;\n                }\n                this.expandImmutablesIn();\n                this._contentModification(function beforePaste(editor, range) {\n                    var clipboardNode = dom.create(editor.document, 'div', {\n                        className: 'k-paste-container',\n                        innerHTML: '\\uFEFF'\n                    });\n                    var browser = kendo.support.browser;\n                    var body = editor.body;\n                    this._decoreateClipboardNode(clipboardNode, body);\n                    body.appendChild(clipboardNode);\n                    if (browser.webkit) {\n                        this._moveToCaretPosition(clipboardNode, range);\n                    }\n                    if (browser.msie && browser.version < 11) {\n                        e.preventDefault();\n                        var r = editor.createRange();\n                        r.selectNodeContents(clipboardNode);\n                        editor.selectRange(r);\n                        var textRange = editor.document.body.createTextRange();\n                        textRange.moveToElementText(clipboardNode);\n                        $(body).unbind('paste');\n                        textRange.execCommand('Paste');\n                        $(body).bind('paste', $.proxy(this.onpaste, this));\n                    } else {\n                        var clipboardRange = editor.createRange();\n                        clipboardRange.selectNodeContents(clipboardNode);\n                        editor.selectRange(clipboardRange);\n                    }\n                    range.deleteContents();\n                }, function afterPaste(editor, range) {\n                    var html = '', containers;\n                    editor.selectRange(range);\n                    containers = $(editor.body).children('.k-paste-container');\n                    containers.each(function () {\n                        var lastChild = this.lastChild;\n                        if (lastChild && dom.is(lastChild, 'br')) {\n                            dom.remove(lastChild);\n                        }\n                        html += this.innerHTML;\n                    });\n                    containers.remove();\n                    this._triggerPaste(html, { clean: true });\n                });\n            },\n            ondragover: function (e) {\n                if (browser.msie || browser.edge) {\n                    e.stopPropagation();\n                    e.preventDefault();\n                }\n            },\n            ondrop: function (e) {\n                if (!('FileReader' in window)) {\n                    return;\n                }\n                var dataTransfer = (e.originalEvent || e).dataTransfer || {};\n                var items = dataTransfer.items || dataTransfer.files;\n                if (this._insertImages(items)) {\n                    e.preventDefault();\n                }\n            },\n            _decoreateClipboardNode: function (node, body) {\n                if (!browser.msie && !browser.webkit) {\n                    return;\n                }\n                node = $(node);\n                node.css({\n                    borderWidth: '0px',\n                    width: '0px',\n                    height: '0px',\n                    overflow: 'hidden',\n                    margin: '0',\n                    padding: '0'\n                });\n                if (browser.msie) {\n                    var documentElement = $(body.ownerDocument.documentElement);\n                    node.css({\n                        fontVariant: 'normal',\n                        fontWeight: 'normal',\n                        lineSpacing: 'normal',\n                        lineHeight: 'normal',\n                        textDecoration: 'none'\n                    });\n                    var color = documentElement.css('color');\n                    if (color) {\n                        node.css('color', color);\n                    }\n                    var fontFamily = documentElement.css('fontFamily');\n                    if (fontFamily) {\n                        node.css('fontFamily', fontFamily);\n                    }\n                    var fontSize = documentElement.css('fontSize');\n                    if (fontSize) {\n                        node.css('fontSize', fontSize);\n                    }\n                }\n            },\n            _moveToCaretPosition: function (node, range) {\n                var that = this;\n                var body = that.editor.body;\n                var nodeOffset = dom.offset(node, body);\n                var caretOffset = that._caretOffset(range, body);\n                var translateX = caretOffset.left - nodeOffset.left;\n                var translateY = caretOffset.top - nodeOffset.top;\n                var translate = 'translate(' + translateX + 'px,' + translateY + 'px)';\n                $(node).css({\n                    '-webkit-transform': translate,\n                    'transform': translate\n                });\n            },\n            _caretOffset: function (range, body) {\n                var editor = this.editor;\n                var caret = dom.create(editor.document, 'span', { innerHTML: '\\uFEFF' });\n                var startContainer = range.startContainer;\n                var rangeChanged;\n                if (range.collapsed) {\n                    var isStartTextNode = dom.isDataNode(startContainer);\n                    if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                        dom.insertBefore(caret, startContainer);\n                    } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                        dom.insertAfter(caret, startContainer);\n                    } else {\n                        range.insertNode(caret);\n                        rangeChanged = true;\n                    }\n                } else {\n                    startContainer = startContainer === body ? startContainer.childNodes[range.startOffset] : startContainer;\n                    dom.insertBefore(caret, startContainer);\n                }\n                var offset = dom.offset(caret, body);\n                var prev = caret.previousSibling;\n                var next = caret.nextSibling;\n                dom.remove(caret);\n                if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n                    var prevLength = prev.length;\n                    next.data = prev.data + next.data;\n                    range.setStart(next, prevLength);\n                    dom.remove(prev);\n                    range.collapse(true);\n                    editor.selectRange(range);\n                }\n                return offset;\n            },\n            expandImmutablesIn: function (range) {\n                var editor = this.editor;\n                if (editor && editor.options.immutables) {\n                    var body = editor.body;\n                    range = range || editor.getRange();\n                    kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                    if (range.startContainer === body && range.startOffset === 0) {\n                        var doc = body.ownerDocument;\n                        var bomNode = doc.createTextNode('\\uFEFF');\n                        body.insertBefore(bomNode, body.childNodes[0]);\n                        range.setStartBefore(bomNode);\n                    }\n                    editor.selectRange(range);\n                }\n            },\n            splittableParent: function (block, node) {\n                var parentNode, body;\n                if (block) {\n                    return dom.closestEditableOfType(node, [\n                        'p',\n                        'ul',\n                        'ol'\n                    ]) || node.parentNode;\n                }\n                parentNode = node.parentNode;\n                body = node.ownerDocument.body;\n                if (dom.isInline(parentNode)) {\n                    while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                        parentNode = parentNode.parentNode;\n                    }\n                }\n                return parentNode;\n            },\n            paste: function (html, options) {\n                var editor = this.editor, i, l, childNodes;\n                this.expandImmutablesIn();\n                options = extend({\n                    clean: false,\n                    split: true\n                }, options);\n                if (!options.skipCleaners) {\n                    for (i = 0, l = this.cleaners.length; i < l; i++) {\n                        if (this.cleaners[i].applicable(html)) {\n                            html = this.cleaners[i].clean(html);\n                        }\n                    }\n                }\n                if (options.clean) {\n                    html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/gi, '$3');\n                    html = html.replace(/<(a|span)[^>]*><\\/\\1>/gi, '');\n                }\n                html = html.replace(/<(a|span|font)([^>]*)> <\\/\\1>/gi, '<$1$2>&nbsp;</$1>');\n                html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n                var block = this.isBlock(html);\n                editor.focus();\n                var range = editor.getRange();\n                range.deleteContents();\n                if (range.startContainer == editor.document) {\n                    range.selectNodeContents(editor.body);\n                }\n                var marker = new Marker();\n                var caret = marker.addCaret(range);\n                var parent = this.splittableParent(block, caret);\n                var unwrap = false;\n                var splittable = parent != editor.body && !dom.is(parent, 'td');\n                if (options.split && splittable && (block || dom.isInline(parent))) {\n                    range.selectNode(caret);\n                    RangeUtils.split(range, parent, true);\n                    unwrap = true;\n                }\n                var fragment = this.htmlToFragment(html);\n                if (fragment.firstChild && fragment.firstChild.className === 'k-paste-container') {\n                    var fragmentsHtml = [];\n                    for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                        fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n                    }\n                    fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n                }\n                childNodes = fragment.childNodes;\n                $(childNodes).filter('table').addClass('k-table').end().find('table').addClass('k-table');\n                $(childNodes).each(function (index, elm) {\n                    if (dom.isBlock(elm) && !dom.isSelfClosing(elm) && elm.innerHTML === '') {\n                        elm.appendChild(editor.document.createTextNode('\\uFEFF'));\n                    }\n                });\n                range.insertNode(fragment);\n                parent = this.splittableParent(block, caret);\n                if (unwrap) {\n                    while (caret.parentNode != parent) {\n                        dom.unwrap(caret.parentNode);\n                    }\n                    dom.unwrap(caret.parentNode);\n                }\n                dom.normalize(range.commonAncestorContainer);\n                caret.style.display = 'inline';\n                dom.restoreScrollTop(editor.document);\n                dom.scrollTo(caret);\n                marker.removeCaret(range);\n                var rangeEnd = range.commonAncestorContainer.parentNode;\n                if (range.collapsed && dom.name(rangeEnd) == 'tbody' || range.collapsed && dom.name(rangeEnd) == 'thead') {\n                    range.setStartAfter($(rangeEnd).closest('table')[0]);\n                    range.collapse(true);\n                }\n                var focusedTable = $(range.commonAncestorContainer.parentNode).closest('table');\n                if (focusedTable.get(0)) {\n                    var siblingNodes = focusedTable.parent().contents();\n                    var lastSiblingIndex = siblingNodes.length - 1;\n                    var lastSibling = siblingNodes.get(lastSiblingIndex);\n                    while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === ' ' || lastSibling.nodeValue === '')) {\n                        lastSiblingIndex -= 1;\n                        lastSibling = siblingNodes.get(lastSiblingIndex);\n                    }\n                    if (lastSibling === focusedTable.get(0) && !focusedTable.parents('table').length) {\n                        dom.insertAfter(dom.createEmptyNode(editor.document, 'p'), focusedTable[0]);\n                    }\n                }\n                editor.selectRange(range);\n            }\n        });\n        var Cleaner = Class.extend({\n            init: function (options) {\n                this.options = options || {};\n                this.replacements = [];\n            },\n            clean: function (html, customReplacements) {\n                var that = this, replacements = customReplacements || that.replacements, i, l;\n                for (i = 0, l = replacements.length; i < l; i += 2) {\n                    html = html.replace(replacements[i], replacements[i + 1]);\n                }\n                return html;\n            }\n        });\n        var ScriptCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /<(\\/?)script([^>]*)>/i,\n                    '<$1telerik:script$2>'\n                ];\n            },\n            applicable: function (html) {\n                return !this.options.none && /<script[^>]*>/i.test(html);\n            }\n        });\n        var TabCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                var replacement = ' ';\n                this.replacements = [\n                    /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi,\n                    replacement,\n                    /\\t/gi,\n                    replacement,\n                    /&nbsp;&nbsp; &nbsp;/gi,\n                    replacement\n                ];\n            },\n            applicable: function (html) {\n                return /&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i.test(html);\n            }\n        });\n        var MSWordFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.junkReplacements = [\n                    /<\\?xml[^>]*>/gi,\n                    '',\n                    /<!--(.|\\n)*?-->/g,\n                    '',\n                    /&quot;/g,\n                    '\\'',\n                    /<o:p>&nbsp;<\\/o:p>/gi,\n                    '&nbsp;',\n                    /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,\n                    '',\n                    /<\\/o>/g,\n                    ''\n                ];\n                this.replacements = this.junkReplacements.concat([\n                    /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g,\n                    '$1',\n                    /<br><br>/g,\n                    '<BR><BR>',\n                    /<br>(?!\\n)/g,\n                    ' ',\n                    /<table([^>]*)>(\\s|&nbsp;)+<t/gi,\n                    '<table$1><t',\n                    /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi,\n                    '',\n                    /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi,\n                    '',\n                    /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi,\n                    '',\n                    /<BR><BR>/g,\n                    '<br>',\n                    /^\\s*(&nbsp;)+/gi,\n                    '',\n                    /(&nbsp;|<br[^>]*>)+\\s*$/gi,\n                    '',\n                    /mso-[^;\"]*;?/gi,\n                    '',\n                    /<(\\/?)b(\\s[^>]*)?>/gi,\n                    '<$1strong$2>',\n                    /<(\\/?)font(\\s[^>]*)?>/gi,\n                    this.convertFontMatch,\n                    /<(\\/?)i(\\s[^>]*)?>/gi,\n                    '<$1em$2>',\n                    /style=([\"|'])\\s*\\1/g,\n                    '',\n                    /(<br[^>]*>)?\\n/g,\n                    function ($0, $1) {\n                        return $1 ? $0 : ' ';\n                    }\n                ]);\n            },\n            convertFontMatch: function (match, closing, args) {\n                var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n                var face = faceRe.exec(args);\n                var family = args && face && face[1];\n                if (closing) {\n                    return '</span>';\n                } else if (family) {\n                    return '<span style=\"font-family:' + family + '\">';\n                } else {\n                    return '<span>';\n                }\n            },\n            applicable: function (html) {\n                return /class=\"?Mso/i.test(html) || /style=\"[^\"]*mso-/i.test(html) || /urn:schemas-microsoft-com:office/.test(html);\n            },\n            stripEmptyAnchors: function (html) {\n                return html.replace(/<a([^>]*)>\\s*<\\/a>/gi, function (a, attributes) {\n                    if (!attributes || attributes.indexOf('href') < 0) {\n                        return '';\n                    }\n                    return a;\n                });\n            },\n            listType: function (p, listData) {\n                var html = p.innerHTML;\n                var text = dom.innerText(p);\n                var startingSymbol;\n                var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n                var symbol = matchSymbol && matchSymbol[1];\n                var isNumber = /^[a-z\\d]/i.test(symbol);\n                var trimStartText = function (text) {\n                    return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n                };\n                if (matchSymbol) {\n                    startingSymbol = true;\n                }\n                html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\xA0');\n                if (!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html) || startingSymbol && /^.\\u00a0+/.test(html) || symbol && !isNumber && listData) {\n                    return {\n                        tag: 'ul',\n                        style: this._guessUnorderedListStyle(trimStartText(text))\n                    };\n                }\n                if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n                    return {\n                        tag: 'ol',\n                        style: this._guessOrderedListStyle(trimStartText(text))\n                    };\n                }\n            },\n            _convertToLi: function (p) {\n                var content;\n                if (p.childNodes.length == 1) {\n                    content = p.firstChild.nodeType === dom.nodeTypes.TEXT_NODE ? dom.innerText(p) : p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, '');\n                    content = this._checkForBullet(content);\n                } else {\n                    content = this._getHtmlNoBullet(p);\n                }\n                dom.remove(p);\n                return dom.create(document, 'li', { innerHTML: content });\n            },\n            _checkForBullet: function (html) {\n                var p = dom.create(document, 'p', { innerHTML: html });\n                var bulletRgx = /^\\s*\\w+[\\.\\)]\\s+/;\n                if (bulletRgx.test(p.innerText)) {\n                    return this._getHtmlNoBullet(p);\n                }\n                return html;\n            },\n            _getHtmlNoBullet: function (element) {\n                var content, name = dom.name(element);\n                dom.remove(element.firstChild);\n                if (element.firstChild.nodeType == 3) {\n                    if (/^[ivxlcdm]+\\.$/i.test(element.firstChild.nodeValue)) {\n                        dom.remove(element.firstChild);\n                    }\n                }\n                if (/^(&nbsp;|\\s)+$/i.test(element.firstChild.innerHTML)) {\n                    dom.remove(element.firstChild);\n                }\n                if (name != 'p') {\n                    content = '<' + name + '>' + element.innerHTML + '</' + name + '>';\n                } else {\n                    content = element.innerHTML;\n                }\n                return content;\n            },\n            _guessUnorderedListStyle: function (symbol) {\n                if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n                    return null;\n                } else if (/^o/.test(symbol)) {\n                    return 'circle';\n                } else {\n                    return 'square';\n                }\n            },\n            _guessOrderedListStyle: function (symbol) {\n                var listType = null;\n                if (!/^\\d/.test(symbol)) {\n                    listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') + (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n                }\n                return listType;\n            },\n            extractListLevels: function (html) {\n                var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n                html = html.replace(msoListRegExp, function (match, list, level) {\n                    return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n                });\n                return html;\n            },\n            _createList: function (type, styleType) {\n                return dom.create(document, type, { style: { listStyleType: styleType } });\n            },\n            lists: function (placeholder) {\n                var blockChildren = $(placeholder).find(dom.blockElements.join(',')), lastMargin = -1, name, levels = {}, li, rootMargin, rootIndex, lastRootLi, isLastRootLi, rootList, i, p, type, margin, list, listData, acceptedNameTags = [\n                        'p',\n                        'h1',\n                        'h2',\n                        'h3',\n                        'h4',\n                        'h5',\n                        'h6'\n                    ], isParentTable = false;\n                for (i = 0; i < blockChildren.length; i++) {\n                    p = blockChildren[i];\n                    listData = $(p).data();\n                    var listIndex = listData.list;\n                    name = dom.name(p);\n                    isParentTable = !!$(p).parents('table').length;\n                    if (isParentTable) {\n                        continue;\n                    }\n                    var listType = this.listType(p, listData);\n                    type = listType && listType.tag;\n                    if (!type || acceptedNameTags.indexOf(name) < 0) {\n                        if (!p.innerHTML) {\n                            dom.remove(p);\n                        } else if (li && !isLastRootLi) {\n                            li.appendChild(p);\n                        }\n                        continue;\n                    }\n                    if (browser.msie) {\n                        continue;\n                    }\n                    margin = listData.level || parseFloat(p.style.marginLeft || 0);\n                    var levelType = type + listIndex;\n                    if (!levels[margin]) {\n                        levels[margin] = {};\n                    }\n                    if (!rootMargin || rootMargin < 0) {\n                        rootMargin = margin;\n                        rootIndex = listIndex;\n                        lastRootLi = $(placeholder).find('[data-list=\\'' + rootIndex + '\\']:last')[0];\n                        rootList = this._createList(type, listType.style);\n                        dom.insertBefore(rootList, p);\n                        lastMargin = margin;\n                        levels[margin][levelType] = rootList;\n                    }\n                    isLastRootLi = lastRootLi === p;\n                    list = levels[margin][levelType];\n                    if (margin > lastMargin || !list) {\n                        list = this._createList(type, listType.style);\n                        levels[margin][levelType] = list;\n                        li.appendChild(list);\n                    }\n                    li = this._convertToLi(p);\n                    list.appendChild(li);\n                    if (isLastRootLi) {\n                        rootMargin = lastMargin = -1;\n                    } else {\n                        lastMargin = margin;\n                    }\n                }\n            },\n            removeAttributes: function (element) {\n                var attributes = element.attributes, i = attributes.length;\n                while (i--) {\n                    if (dom.name(attributes[i]) != 'colspan') {\n                        element.removeAttributeNode(attributes[i]);\n                    }\n                }\n            },\n            createColGroup: function (row) {\n                var cells = row.cells;\n                var table = $(row).closest('table');\n                var colgroup = table.children('colgroup');\n                if (cells.length < 2) {\n                    return;\n                } else if (colgroup.length) {\n                    cells = colgroup.children();\n                    colgroup[0].parentNode.removeChild(colgroup[0]);\n                }\n                colgroup = $($.map(cells, function (cell) {\n                    var width = cell.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                    }\n                    return '<col />';\n                }).join(''));\n                if (!colgroup.is('colgroup')) {\n                    colgroup = $('<colgroup/>').append(colgroup);\n                }\n                colgroup.prependTo(table);\n            },\n            convertHeaders: function (row) {\n                var cells = row.cells, i, boldedCells = $.map(cells, function (cell) {\n                        var child = $(cell).children('p').children('strong')[0];\n                        if (child && dom.name(child) == 'strong') {\n                            return child;\n                        }\n                    });\n                if (boldedCells.length == cells.length) {\n                    for (i = 0; i < boldedCells.length; i++) {\n                        dom.unwrap(boldedCells[i]);\n                    }\n                    $(row).closest('table').find('colgroup').after('<thead></thead>').end().find('thead').append(row);\n                    for (i = 0; i < cells.length; i++) {\n                        dom.changeTag(cells[i], 'th');\n                    }\n                }\n            },\n            removeParagraphs: function (cells) {\n                var i, j, len, cell, paragraphs;\n                for (i = 0; i < cells.length; i++) {\n                    this.removeAttributes(cells[i]);\n                    cell = $(cells[i]);\n                    paragraphs = cell.children('p');\n                    for (j = 0, len = paragraphs.length; j < len; j++) {\n                        if (j < len - 1) {\n                            dom.insertAfter(dom.create(document, 'br'), paragraphs[j]);\n                        }\n                        dom.unwrap(paragraphs[j]);\n                    }\n                }\n            },\n            removeDefaultColors: function (spans) {\n                for (var i = 0; i < spans.length; i++) {\n                    if (/^\\s*color:\\s*[^;]*;?$/i.test(spans[i].style.cssText)) {\n                        dom.unwrap(spans[i]);\n                    }\n                }\n            },\n            removeTextNodes: function (trs) {\n                var i, j, childNodes, currentNode;\n                for (i = 0; i < trs.length; i++) {\n                    childNodes = trs[i].childNodes;\n                    for (j = 0; j < childNodes.length; j++) {\n                        currentNode = childNodes[j];\n                        if (currentNode.nodeType === dom.nodeTypes.TEXT_NODE) {\n                            currentNode.remove();\n                        }\n                    }\n                }\n            },\n            tables: function (placeholder) {\n                var tables = $(placeholder).find('table'), that = this, rows, firstRow, longestRow, i, j;\n                for (i = 0; i < tables.length; i++) {\n                    rows = tables[i].rows;\n                    longestRow = firstRow = rows[0];\n                    for (j = 1; j < rows.length; j++) {\n                        if (rows[j].cells.length > longestRow.cells.length) {\n                            longestRow = rows[j];\n                        }\n                    }\n                    that.createColGroup(longestRow);\n                    that.convertHeaders(firstRow);\n                    that.removeAttributes(tables[i]);\n                    that.removeParagraphs(tables.eq(i).find('td,th'));\n                    that.removeDefaultColors(tables.eq(i).find('span'));\n                    that.removeTextNodes(tables.eq(i).find('tr'));\n                }\n            },\n            headers: function (placeholder) {\n                var titles = $(placeholder).find('p.MsoTitle');\n                for (var i = 0; i < titles.length; i++) {\n                    dom.changeTag(titles[i], 'h1');\n                }\n            },\n            removeFormatting: function (placeholder) {\n                $(placeholder).find('*').each(function () {\n                    $(this).css({\n                        fontSize: '',\n                        fontFamily: ''\n                    });\n                    if (!this.getAttribute('style') && !this.style.cssText) {\n                        this.removeAttribute('style');\n                    }\n                });\n            },\n            clean: function (html) {\n                var that = this, placeholder;\n                var filters = this.options;\n                if (filters.none) {\n                    html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n                    html = that.stripEmptyAnchors(html);\n                } else {\n                    html = filters.msConvertLists ? this.extractListLevels(html) : html;\n                    html = Cleaner.fn.clean.call(that, html);\n                    html = that.stripEmptyAnchors(html);\n                    placeholder = dom.create(document, 'div', { innerHTML: html });\n                    that.headers(placeholder);\n                    if (filters.msConvertLists) {\n                        that.lists(placeholder);\n                    }\n                    that.tables(placeholder);\n                    if (filters.msAllFormatting) {\n                        that.removeFormatting(placeholder);\n                    }\n                    html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/gi, '$1');\n                }\n                return html;\n            }\n        });\n        var WebkitFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /\\s+class=\"Apple-style-span[^\"]*\"/gi,\n                    '',\n                    /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi,\n                    '<$1',\n                    /^<div>(.*)<\\/div>$/,\n                    '$1'\n                ];\n            },\n            applicable: function (html) {\n                return /class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i.test(html);\n            }\n        });\n        var DomCleaner = Cleaner.extend({\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                container = this.cleanDom(container);\n                return container.innerHTML;\n            },\n            cleanDom: function (container) {\n                return container;\n            }\n        });\n        var HtmlTagsCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var tags = this.collectTags();\n                $(container).find(tags).each(function () {\n                    dom.unwrap(this);\n                });\n                return container;\n            },\n            collectTags: function () {\n                if (this.options.span) {\n                    return 'span';\n                }\n            },\n            applicable: function () {\n                return this.options.span;\n            }\n        });\n        var HtmlAttrCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var attributes = this.collectAttr();\n                var nodes = $(container).find('[' + attributes.join('],[') + ']');\n                nodes.removeAttr(attributes.join(' '));\n                return container;\n            },\n            collectAttr: function () {\n                if (this.options.css) {\n                    return [\n                        'class',\n                        'style'\n                    ];\n                }\n                return [];\n            },\n            applicable: function () {\n                return this.options.css;\n            }\n        });\n        var TextContainer = function () {\n            this.text = '';\n            this.add = function (text) {\n                this.text += text;\n            };\n        };\n        var HtmlTextLines = Class.extend({\n            init: function (separators) {\n                this.separators = separators || {\n                    text: ' ',\n                    line: '<br/>'\n                };\n                this.lines = [];\n                this.inlineBlockText = [];\n                this.resetLine();\n            },\n            appendText: function (text) {\n                if (text.nodeType === 3) {\n                    text = text.nodeValue;\n                }\n                this.textContainer.add(text);\n            },\n            appendInlineBlockText: function (text) {\n                this.inlineBlockText.push(text);\n            },\n            flashInlineBlockText: function () {\n                if (this.inlineBlockText.length) {\n                    this.appendText(this.inlineBlockText.join(' '));\n                    this.inlineBlockText = [];\n                }\n            },\n            endLine: function () {\n                this.flashInlineBlockText();\n                this.resetLine();\n            },\n            html: function () {\n                var separators = this.separators;\n                var result = '';\n                var lines = this.lines;\n                this.flashInlineBlockText();\n                for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n                    var line = lines[i];\n                    for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                        var text = line[j].text;\n                        result += text;\n                        if (j !== jl1) {\n                            result += separators.text;\n                        }\n                    }\n                    if (i !== il1) {\n                        result += separators.line;\n                    }\n                }\n                return result;\n            },\n            resetLine: function () {\n                this.textContainer = new TextContainer();\n                this.line = [];\n                this.line.push(this.textContainer);\n                this.lines.push(this.line);\n            }\n        });\n        var DomEnumerator = Class.extend({\n            init: function (callback) {\n                this.callback = callback;\n            },\n            enumerate: function (node) {\n                if (!node) {\n                    return;\n                }\n                var preventDown = this.callback(node);\n                var child = node.firstChild;\n                if (!preventDown && child) {\n                    this.enumerate(child);\n                }\n                this.enumerate(node.nextSibling);\n            }\n        });\n        var HtmlContentCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.hasText = false;\n                this.enumerator = new DomEnumerator($.proxy(this.buildText, this));\n            },\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                return this.cleanDom(container);\n            },\n            cleanDom: function (container) {\n                this.separators = this.getDefaultSeparators();\n                this.htmlLines = new HtmlTextLines(this.separators);\n                this.enumerator.enumerate(container.firstChild);\n                this.hasText = false;\n                return this.htmlLines.html();\n            },\n            buildText: function (node) {\n                if (dom.isDataNode(node)) {\n                    if (dom.isEmptyspace(node)) {\n                        return;\n                    }\n                    this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n                    this.hasText = true;\n                } else if (dom.isBlock(node) && this.hasText) {\n                    var action = this.actions[dom.name(node)] || this.actions.block;\n                    return action(this, node);\n                } else if (dom.isBr(node)) {\n                    this.htmlLines.appendText(this.separators.line);\n                }\n            },\n            applicable: function () {\n                var o = this.options;\n                return o.all || o.keepNewLines;\n            },\n            getDefaultSeparators: function () {\n                if (this.options.all) {\n                    return {\n                        text: ' ',\n                        line: ' '\n                    };\n                } else {\n                    return {\n                        text: ' ',\n                        line: '<br/>'\n                    };\n                }\n            },\n            actions: {\n                ul: $.noop,\n                ol: $.noop,\n                table: $.noop,\n                thead: $.noop,\n                tbody: $.noop,\n                td: function (cleaner, node) {\n                    var tdCleaner = new HtmlContentCleaner({ all: true });\n                    var cellText = tdCleaner.cleanDom(node);\n                    cleaner.htmlLines.appendInlineBlockText(cellText);\n                    return true;\n                },\n                block: function (cleaner) {\n                    cleaner.htmlLines.endLine();\n                }\n            }\n        });\n        var CustomCleaner = Cleaner.extend({\n            clean: function (html) {\n                return this.options.custom(html);\n            },\n            applicable: function () {\n                return typeof this.options.custom === 'function';\n            }\n        });\n        extend(editorNS, {\n            Clipboard: Clipboard,\n            Cleaner: Cleaner,\n            ScriptCleaner: ScriptCleaner,\n            TabCleaner: TabCleaner,\n            MSWordFormatCleaner: MSWordFormatCleaner,\n            WebkitFormatCleaner: WebkitFormatCleaner,\n            HtmlTagsCleaner: HtmlTagsCleaner,\n            HtmlAttrCleaner: HtmlAttrCleaner,\n            HtmlContentCleaner: HtmlContentCleaner,\n            HtmlTextLines: HtmlTextLines,\n            CustomCleaner: CustomCleaner\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/keyboard', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, RangeUtils = editorNS.RangeUtils, dom = editorNS.Dom, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, browser = kendo.support.browser, bomSpan = '<span  class=\\'k-br\\'>\\uFEFF</span>', extend = $.extend;\n        var nodeTypes = dom.nodeTypes;\n        var PREVIOUS_SIBLING = 'previousSibling';\n        function selected(node, range) {\n            return range.startContainer === node && range.endContainer === node && range.startOffset === 0 && range.endOffset == node.childNodes.length;\n        }\n        function getSibling(node, direction, condition) {\n            var sibling = node ? node[direction] : null;\n            while (sibling && !condition(sibling)) {\n                sibling = sibling[direction];\n            }\n            return sibling;\n        }\n        var tableCells = 'td,th,caption';\n        var tableCellsWrappers = 'table,tbody,thead,tfoot,tr';\n        var tableElements = tableCellsWrappers + ',' + tableCells;\n        var inTable = function (range) {\n            return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers);\n        };\n        var RemoveTableContent = Class.extend({\n            remove: function (range) {\n                var that = this;\n                var marker = new Marker();\n                marker.add(range, false);\n                var nodes = RangeUtils.getAll(range, function (node) {\n                    return $(node).is(tableElements);\n                });\n                var doc = RangeUtils.documentFromRange(range);\n                var start = marker.start;\n                var end = marker.end;\n                var cellsTypes = tableCells.split(',');\n                var startCell = dom.parentOfType(start, cellsTypes);\n                var endCell = dom.parentOfType(end, cellsTypes);\n                that._removeContent(start, startCell, true);\n                that._removeContent(end, endCell, false);\n                $(nodes).each(function (i, node) {\n                    node = $(node);\n                    (node.is(tableCells) ? node : node.find(tableCells)).each(function (j, cell) {\n                        cell.innerHTML = '&#65279;';\n                    });\n                });\n                if (startCell && !start.previousSibling) {\n                    dom.insertBefore(doc.createTextNode('\\uFEFF'), start);\n                }\n                if (endCell && !end.nextSibling) {\n                    dom.insertAfter(doc.createTextNode('\\uFEFF'), end);\n                }\n                if (startCell) {\n                    range.setStartBefore(start);\n                } else if (nodes[0]) {\n                    startCell = $(nodes[0]);\n                    startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n                    if (startCell.length) {\n                        range.setStart(startCell.get(0), 0);\n                    }\n                }\n                range.collapse(true);\n                dom.remove(start);\n                dom.remove(end);\n            },\n            _removeContent: function (start, top, forwards) {\n                if (top) {\n                    var sibling = forwards ? 'nextSibling' : 'previousSibling', next, getNext = function (node) {\n                            while (node && !node[sibling]) {\n                                node = node.parentNode;\n                            }\n                            return node && $.contains(top, node) ? node[sibling] : null;\n                        };\n                    start = getNext(start);\n                    while (start) {\n                        next = getNext(start);\n                        dom.remove(start);\n                        start = next;\n                    }\n                }\n            }\n        });\n        var TypingHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard, isTypingKey = keyboard.isTypingKey(e), evt = extend($.Event(), e);\n                that.editor.trigger('keydown', evt);\n                if (evt.isDefaultPrevented()) {\n                    e.preventDefault();\n                    return true;\n                }\n                if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n                    var range = editor.getRange();\n                    var body = editor.body;\n                    that.startRestorePoint = new RestorePoint(range, body);\n                    if (inTable(range)) {\n                        var removeTableContent = new RemoveTableContent(editor);\n                        removeTableContent.remove(range);\n                        editor.selectRange(range);\n                    }\n                    if (browser.webkit && !range.collapsed && selected(body, range)) {\n                        body.innerHTML = '';\n                    }\n                    if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                        var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                        backspaceHandler.deleteSelection(range);\n                    }\n                    keyboard.startTyping(function () {\n                        that.endRestorePoint = editorNS._finishUpdate(editor, that.startRestorePoint);\n                    });\n                    return true;\n                }\n                return false;\n            },\n            keyup: function (e) {\n                var keyboard = this.editor.keyboard;\n                this.editor.trigger('keyup', e);\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var BackspaceHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            _addCaret: function (container) {\n                var caret = dom.create(this.editor.document, 'a');\n                if (!kendo.support.browser.chrome && container.firstChild && container.firstChild.nodeType === nodeTypes.ELEMENT_NODE) {\n                    container = container.firstChild;\n                }\n                dom.insertAt(container, caret, 0);\n                dom.stripBomNode(caret.previousSibling);\n                dom.stripBomNode(caret.nextSibling);\n                return caret;\n            },\n            _restoreCaret: function (caret) {\n                var range = this.editor.createRange();\n                if (!caret.nextSibling && dom.isDataNode(caret.previousSibling)) {\n                    range.setStart(caret.previousSibling, caret.previousSibling.length);\n                } else {\n                    range.setStartAfter(caret);\n                }\n                range.collapse(true);\n                this.editor.selectRange(range);\n                dom.remove(caret);\n            },\n            _handleDelete: function (range) {\n                var node = range.endContainer;\n                var block = dom.closestEditableOfType(node, dom.blockElements);\n                if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n                    var next = dom.next(block);\n                    if (!next || dom.name(next) != 'p') {\n                        return false;\n                    }\n                    var caret = this._addCaret(next);\n                    this._merge(block, next);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                return false;\n            },\n            _cleanBomBefore: function (range) {\n                var offset = range.startOffset;\n                var node = range.startContainer;\n                var text = node.nodeValue;\n                var count = 0;\n                while (offset - count >= 0 && text[offset - count - 1] == '\\uFEFF') {\n                    count++;\n                }\n                if (count > 0) {\n                    node.deleteData(offset - count, count);\n                    range.setStart(node, Math.max(0, offset - count));\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            },\n            _handleBackspace: function (range) {\n                var node = range.startContainer;\n                var li = dom.closestEditableOfType(node, ['li']);\n                var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n                var editor = this.editor;\n                var previousSibling;\n                if (dom.isDataNode(node)) {\n                    if (range.collapsed && /^\\s[\\ufeff]+$/.test(node.nodeValue)) {\n                        range.setStart(node, 0);\n                        range.setEnd(node, node.length);\n                        editor.selectRange(range);\n                        return false;\n                    }\n                    this._cleanBomBefore(range);\n                }\n                previousSibling = getSibling(block, PREVIOUS_SIBLING, function (sibling) {\n                    return !dom.htmlIndentSpace(sibling);\n                });\n                if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n                    range.startOffset = 0;\n                    range.endOffset = 0;\n                    editor.selectRange(range);\n                }\n                var startAtLi = li && editorNS.RangeUtils.isStartOf(range, li);\n                var liIndex = li && $(li).index();\n                var startAtNonFirstLi = startAtLi && liIndex > 0;\n                if (startAtNonFirstLi) {\n                    block = li;\n                    previousSibling = dom.prev(li);\n                }\n                if (block && previousSibling && dom.is(previousSibling, 'table') && editorNS.RangeUtils.isStartOf(range, block)) {\n                    if (block.innerText === '') {\n                        block.innerHTML = '\\uFEFF';\n                    }\n                    return true;\n                }\n                if (editorNS.RangeUtils.isStartOf(range, block) && parseInt(block.style.marginLeft, 10) > 0) {\n                    editor.exec('outdent');\n                    return true;\n                }\n                if (block && previousSibling && editorNS.RangeUtils.isStartOf(range, block) || startAtNonFirstLi) {\n                    var caret = this._addCaret(block);\n                    this._merge(previousSibling, block);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                if (startAtLi && liIndex === 0) {\n                    var child = li.firstChild;\n                    if (!child) {\n                        li.innerHTML = editorNS.emptyElementContent;\n                        child = li.firstChild;\n                    }\n                    var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), 'p');\n                    range.selectNodeContents(li);\n                    formatter.toggle(range);\n                    if (dom.insignificant(child)) {\n                        range.setStartBefore(child);\n                    } else {\n                        range.setStart(child, 0);\n                    }\n                    editor.selectRange(range);\n                    return true;\n                }\n                var rangeStartNode = node.childNodes[range.startOffset - 1];\n                var linkRange = range;\n                var anchor = rangeStartNode && dom.closestEditableOfType(rangeStartNode, ['a']);\n                var previousNode = getSibling(rangeStartNode || node, PREVIOUS_SIBLING, function (sibling) {\n                    return !dom.isDataNode(sibling) || !dom.isBom(sibling) && sibling.length > 0;\n                });\n                if (anchor || (range.startOffset === 0 || rangeStartNode) && dom.is(previousNode, 'a')) {\n                    anchor = anchor || previousNode;\n                    linkRange = editor.createRange();\n                    linkRange.setStart(anchor, anchor.childNodes.length);\n                    linkRange.collapse(true);\n                }\n                anchor = anchor || dom.closestEditableOfType(rangeStartNode || linkRange.startContainer, ['a']);\n                var isEndOfLink = anchor && editorNS.RangeUtils.isEndOf(linkRange, anchor);\n                if (isEndOfLink) {\n                    var command = new editorNS.UnlinkCommand({\n                        range: linkRange,\n                        body: editor.body,\n                        immutables: !!editor.immutables\n                    });\n                    editor.execCommand(command);\n                    editor._selectionChange();\n                }\n                return false;\n            },\n            _handleSelection: function (range) {\n                var ancestor = range.commonAncestorContainer;\n                var table = dom.closest(ancestor, 'table');\n                var emptyParagraphContent = editorNS.emptyElementContent;\n                var editor = this.editor;\n                var parentElementOrNode;\n                if (inTable(range)) {\n                    var removeTableContent = new RemoveTableContent(editor);\n                    removeTableContent.remove(range);\n                    editor.selectRange(range);\n                    return true;\n                }\n                var marker = new Marker();\n                marker.add(range, false);\n                if (range.commonAncestorContainer === editor.body) {\n                    this._surroundFullyContent(marker, range);\n                }\n                if (editor.immutables) {\n                    this._handleImmutables(marker);\n                }\n                this._surroundFullySelectedAnchor(marker, range);\n                range.setStartAfter(marker.start);\n                range.setEndBefore(marker.end);\n                var start = range.startContainer;\n                var end = range.endContainer;\n                range.deleteContents();\n                if (end.tagName.toLocaleLowerCase() === 'li' && dom.emptyNode(end)) {\n                    range.selectNode(end);\n                    range.deleteContents();\n                }\n                if (table && $(table).text() === '') {\n                    range.selectNode(table);\n                    range.deleteContents();\n                }\n                ancestor = range.commonAncestorContainer;\n                if (dom.name(ancestor) === 'p' && ancestor.innerHTML === '') {\n                    ancestor.innerHTML = emptyParagraphContent;\n                    range.setStart(ancestor, 0);\n                }\n                this._join(start, end);\n                dom.insertAfter(editor.document.createTextNode('\\uFEFF'), marker.start);\n                marker.remove(range);\n                start = range.startContainer;\n                if (dom.name(start) == 'tr') {\n                    start = start.childNodes[Math.max(0, range.startOffset - 1)];\n                    range.setStart(start, dom.getNodeLength(start));\n                }\n                range.collapse(true);\n                editor.selectRange(range);\n                parentElementOrNode = start.parentElement || start.parentNode;\n                if (dom.isDataNode(start) && !dom.emptyNode(parentElementOrNode)) {\n                    this._cleanBomBefore(range);\n                }\n                return true;\n            },\n            _handleImmutables: function (marker) {\n                var immutableParent = editorNS.Immutables.immutableParent;\n                var startImmutable = immutableParent(marker.start);\n                var endImmutable = immutableParent(marker.start);\n                if (startImmutable) {\n                    dom.insertBefore(marker.start, startImmutable);\n                }\n                if (endImmutable) {\n                    dom.insertAfter(marker.end, endImmutable);\n                }\n                if (startImmutable) {\n                    dom.remove(startImmutable);\n                }\n                if (endImmutable && endImmutable.parentNode) {\n                    dom.remove(endImmutable);\n                }\n            },\n            _surroundFullyContent: function (marker, range) {\n                var children = range.commonAncestorContainer.children, startParent = children[0], endParent = children[children.length - 1];\n                this._moveMarker(marker, range, startParent, endParent);\n            },\n            _surroundFullySelectedAnchor: function (marker, range) {\n                var start = marker.start, startParent = $(start).closest('a').get(0), end = marker.end, endParent = $(end).closest('a').get(0);\n                this._moveMarker(marker, range, startParent, endParent);\n            },\n            _moveMarker: function (marker, range, startParent, endParent) {\n                var start = marker.start, end = marker.end;\n                if (startParent && RangeUtils.isStartOf(range, startParent)) {\n                    dom.insertBefore(start, startParent);\n                }\n                if (endParent && RangeUtils.isEndOf(range, endParent)) {\n                    dom.insertAfter(end, endParent);\n                }\n            },\n            _root: function (node) {\n                while (node && dom.name(node) != 'body' && node.parentNode && dom.name(node.parentNode) != 'body') {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            _join: function (start, end) {\n                start = this._root(start);\n                end = this._root(end);\n                if (start != end && dom.is(end, 'p')) {\n                    this._merge(start, end);\n                }\n            },\n            _merge: function (dest, src) {\n                dom.removeTrailingBreak(dest);\n                while (dest && src.firstChild) {\n                    if (dest.nodeType == 1) {\n                        dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n                        if (dest) {\n                            dest.appendChild(src.firstChild);\n                        }\n                    } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                        this._mergeWithTextNode(dest, src.firstChild);\n                    } else {\n                        dest.parentNode.appendChild(src.firstChild);\n                    }\n                }\n                dom.remove(src);\n            },\n            _mergeWithTextNode: function (textNode, appendedNode) {\n                if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n                    if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                        dom.insertAfter(appendedNode, textNode.nextSibling);\n                    } else {\n                        dom.insertAfter(appendedNode, textNode);\n                    }\n                }\n            },\n            _isCaret: function (element) {\n                return $(element).is('a');\n            },\n            keydown: function (e) {\n                var method, startRestorePoint;\n                var editor = this.editor;\n                var range = editor.getRange();\n                var keyCode = e.keyCode;\n                var keys = kendo.keys;\n                var backspace = keyCode === keys.BACKSPACE;\n                var del = keyCode == keys.DELETE;\n                if (editor.immutables && editor.immutables.keydown(e, range)) {\n                    return;\n                }\n                if ((backspace || del) && !range.collapsed) {\n                    method = '_handleSelection';\n                } else if (backspace) {\n                    method = '_handleBackspace';\n                } else if (del) {\n                    method = '_handleDelete';\n                }\n                if (!method) {\n                    return;\n                }\n                startRestorePoint = new RestorePoint(range, editor.body);\n                if (this[method](range)) {\n                    e.preventDefault();\n                    editorNS._finishUpdate(editor, startRestorePoint);\n                }\n            },\n            deleteSelection: function (range) {\n                this._handleSelection(range);\n            },\n            keyup: $.noop\n        });\n        var SystemHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.systemCommandIsInProgress = false;\n            },\n            createUndoCommand: function () {\n                this.startRestorePoint = this.endRestorePoint = editorNS._finishUpdate(this.editor, this.startRestorePoint);\n            },\n            changed: function () {\n                if (this.startRestorePoint) {\n                    return this.startRestorePoint.html != this.editor.body.innerHTML;\n                }\n                return false;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard;\n                if (keyboard.isModifierKey(e)) {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                    }\n                    that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n                    return true;\n                }\n                if (keyboard.isSystem(e)) {\n                    that.systemCommandIsInProgress = true;\n                    if (that.changed()) {\n                        that.systemCommandIsInProgress = false;\n                        that.createUndoCommand();\n                    }\n                    return true;\n                }\n                return false;\n            },\n            keyup: function () {\n                var that = this;\n                if (that.systemCommandIsInProgress && that.changed()) {\n                    that.systemCommandIsInProgress = false;\n                    that.createUndoCommand();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var SelectAllHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                if (!browser.webkit || e.isDefaultPrevented() || !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n                    return;\n                }\n                if (this.editor.options.immutables) {\n                    this._toSelectableImmutables();\n                }\n                this._selectEditorBody();\n            },\n            _selectEditorBody: function () {\n                var editor = this.editor;\n                var range = editor.getRange();\n                range.selectNodeContents(editor.body);\n                setTimeout(function () {\n                    editor.selectRange(range);\n                });\n            },\n            _toSelectableImmutables: function () {\n                var editor = this.editor, body = editor.body, immutable = editorNS.Immutables.immutable, emptyTextNode = dom.emptyTextNode, first = body.firstChild, last = body.lastChild;\n                while (emptyTextNode(first)) {\n                    first = first.nextSibling;\n                }\n                while (emptyTextNode(last)) {\n                    last = last.previousSibling;\n                }\n                if (first && immutable(first)) {\n                    $(bomSpan).prependTo(body);\n                }\n                if (last && immutable(last)) {\n                    $(bomSpan).appendTo(body);\n                }\n            },\n            keyup: $.noop\n        });\n        var Keyboard = Class.extend({\n            init: function (handlers) {\n                this.handlers = handlers;\n                this.typingInProgress = false;\n            },\n            isCharacter: function (keyCode) {\n                return keyCode >= 48 && keyCode <= 90 || keyCode >= 96 && keyCode <= 111 || keyCode >= 186 && keyCode <= 192 || keyCode >= 219 && keyCode <= 222 || keyCode == 229;\n            },\n            toolFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, toolOptions, modifier = this._getShortcutModifier(e, navigator.platform);\n                for (toolName in tools) {\n                    toolOptions = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    if ((toolOptions.key == key || toolOptions.key == e.keyCode) && toolOptions.ctrl == modifier && toolOptions.alt == e.altKey && toolOptions.shift == e.shiftKey) {\n                        return toolName;\n                    }\n                }\n            },\n            _getShortcutModifier: function (e, platform) {\n                var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n                return mac ? e.metaKey : e.ctrlKey;\n            },\n            toolsFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, o, matchesKey, found = [];\n                var matchKey = function (toolKey) {\n                    return toolKey == key || toolKey == e.keyCode || toolKey == e.charCode;\n                };\n                for (toolName in tools) {\n                    o = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    matchesKey = $.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n                    if (matchesKey && o.ctrl == e.ctrlKey && o.alt == e.altKey && o.shift == e.shiftKey) {\n                        found.push(tools[toolName]);\n                    }\n                }\n                return found;\n            },\n            isTypingKey: function (e) {\n                var keyCode = e.keyCode;\n                return this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey || keyCode == 32 || keyCode == 13 || keyCode == 8 || keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey;\n            },\n            isModifierKey: function (e) {\n                var keyCode = e.keyCode;\n                return keyCode == 17 && !e.shiftKey && !e.altKey || keyCode == 16 && !e.ctrlKey && !e.altKey || keyCode == 18 && !e.ctrlKey && !e.shiftKey;\n            },\n            isSystem: function (e) {\n                return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n            },\n            startTyping: function (callback) {\n                this.onEndTyping = callback;\n                this.typingInProgress = true;\n            },\n            stopTyping: function () {\n                if (this.typingInProgress && this.onEndTyping) {\n                    this.onEndTyping();\n                }\n                this.typingInProgress = false;\n            },\n            endTyping: function (force) {\n                var that = this;\n                that.clearTimeout();\n                if (force) {\n                    that.stopTyping();\n                } else {\n                    that.timeout = window.setTimeout($.proxy(that.stopTyping, that), 1000);\n                }\n            },\n            isTypingInProgress: function () {\n                return this.typingInProgress;\n            },\n            clearTimeout: function () {\n                window.clearTimeout(this.timeout);\n            },\n            notify: function (e, what) {\n                var i, handlers = this.handlers;\n                for (i = 0; i < handlers.length; i++) {\n                    if (handlers[i][what](e)) {\n                        break;\n                    }\n                }\n            },\n            keydown: function (e) {\n                this.notify(e, 'keydown');\n            },\n            keyup: function (e) {\n                this.notify(e, 'keyup');\n            }\n        });\n        extend(editorNS, {\n            TypingHandler: TypingHandler,\n            SystemHandler: SystemHandler,\n            BackspaceHandler: BackspaceHandler,\n            SelectAllHandler: SelectAllHandler,\n            Keyboard: Keyboard\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/exportpdf', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, editorNS = kendo.ui.editor, Command = editorNS.Command, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, extend = $.extend;\n        var ExportPdfCommand = Command.extend({\n            init: function (options) {\n                this.async = true;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var that = this;\n                var range = that.lockRange(true);\n                var editor = that.editor;\n                editor._destroyResizings();\n                editor.saveAsPDF().then(function () {\n                    that.releaseRange(range);\n                    editor._initializeColumnResizing();\n                    editor._initializeRowResizing();\n                    editor._initializeTableResizing();\n                });\n            }\n        });\n        extend(editorNS, { ExportPdfCommand: ExportPdfCommand });\n        registerTool('pdf', new Tool({\n            command: ExportPdfCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Export PDF'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/print', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, editorNS = kendo.ui.editor, Command = editorNS.Command, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, extend = $.extend;\n        var PrintCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                if (kendo.support.browser.msie) {\n                    editor.document.execCommand('print', false, null);\n                } else if (editor.window.print) {\n                    editor.window.print();\n                }\n            }\n        });\n        extend(editorNS, { PrintCommand: PrintCommand });\n        registerTool('print', new Tool({\n            command: PrintCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Print'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/formatpainter', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, Tool = Editor.Tool, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, registerTool = EditorUtils.registerTool;\n        var CopyFormatCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var range = this.lockRange(true);\n                this.inlineStyles = [];\n                this.blockStyles = [];\n                this.collectStyles(range);\n                this.editor.inlineStyles = this.inlineStyles;\n                this.editor.blockStyles = this.blockStyles;\n                this.releaseRange(range);\n            },\n            collectStyles: function (range) {\n                var rangeNodes = RangeUtils.nodes(range);\n                var node;\n                if (rangeNodes.length === 1) {\n                    node = rangeNodes[0].parentNode;\n                } else {\n                    node = range.startContainer;\n                }\n                while (node && !dom.is(node, 'body') && node.getAttribute('data-role') !== 'editor') {\n                    if (dom.isBlock(node)) {\n                        this.populateStyles(node, 'blockStyles');\n                        if (dom.is(node, 'li')) {\n                            node = node.parentNode;\n                        } else {\n                            node = null;\n                        }\n                    } else {\n                        this.populateStyles(node, 'inlineStyles');\n                        node = node.parentNode;\n                    }\n                }\n            },\n            populateStyles: function (node, destination) {\n                var styles = node.style;\n                var attributes = node.attributes;\n                var nodeStyles = {\n                    tags: [node.tagName],\n                    attr: { style: {} }\n                };\n                var styleValue, styleKey, attributeKey, attributeValue, i;\n                for (i = 0; styles && i < styles.length; i++) {\n                    styleKey = styles[i];\n                    styleValue = styles[styleKey];\n                    nodeStyles.attr.style[styleKey] = styleValue;\n                }\n                for (i = 0; attributes && i < attributes.length; i++) {\n                    attributeKey = attributes[i].nodeName;\n                    attributeValue = attributes[i].nodeValue;\n                    if (attributeKey === 'style') {\n                        continue;\n                    } else if (attributeKey === 'class') {\n                        nodeStyles.attr.className = attributeValue;\n                    } else {\n                        nodeStyles.attr[attributeKey] = attributeValue;\n                    }\n                }\n                this[destination].push(nodeStyles);\n            }\n        });\n        var ApplyFormatCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var range = this.lockRange(true);\n                var markers = RangeUtils.getMarkers(range);\n                var editor = this.editor;\n                var inlineStyles = editor.inlineStyles;\n                var blockStyles = editor.blockStyles;\n                var nodes;\n                if ((!inlineStyles || inlineStyles.length === 0) && (!blockStyles || blockStyles.length === 0)) {\n                    return;\n                }\n                if (markers.length === 3) {\n                    this.marker.removeCaret(range);\n                    this.marker.caret = null;\n                }\n                this.removeEmptyElementsFromRange(range);\n                nodes = RangeUtils.nodes(range);\n                this.cleanInlineParents(nodes);\n                dom.normalize(range.commonAncestorContainer);\n                if (markers.length === 2) {\n                    range.setStartAfter(markers[0]);\n                    range.setEndBefore(markers[1]);\n                } else {\n                    range.setStartBefore(nodes[0]);\n                    range.setEndAfter(nodes[0]);\n                }\n                nodes = RangeUtils.nodes(range);\n                if (nodes && blockStyles && blockStyles.length) {\n                    this.applyBlockStyles(nodes, blockStyles);\n                }\n                if (nodes && inlineStyles && inlineStyles.length) {\n                    this.applyInlineStyles(nodes, inlineStyles);\n                }\n                this.releaseRange(range);\n            },\n            removeEmptyElementsFromRange: function (range) {\n                var isEmptyInline = function (node) {\n                    return dom.isInline(node) && !node.firstChild && !dom.isMarker(node);\n                };\n                var emptyElements, i;\n                emptyElements = RangeUtils.getAll(range, isEmptyInline);\n                if (emptyElements && emptyElements.length > 0) {\n                    for (i = 0; i < emptyElements.length; i++) {\n                        emptyElements[i].parentNode.removeChild(emptyElements[i]);\n                    }\n                }\n            },\n            cleanInlineParents: function (nodes) {\n                var i, node, parent, children, j, child, newNode;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    parent = node.parentNode;\n                    if (this.immutableParent(node)) {\n                        continue;\n                    }\n                    while (parent && dom.isInline(parent)) {\n                        children = parent.childNodes;\n                        for (j = 0; j < children.length; j++) {\n                            child = children[j];\n                            if (!dom.isMarker(child) && child !== node) {\n                                newNode = parent.cloneNode(true);\n                                newNode.innerHTML = '';\n                                dom.wrap(child, newNode);\n                            }\n                        }\n                        dom.unwrap(parent);\n                        parent = node.parentNode;\n                    }\n                }\n            },\n            applyBlockStyles: function (nodes, blockStyles) {\n                var formatTag = blockStyles[0].tags[0];\n                var attr = blockStyles[0].attr;\n                var document = this.editor.document;\n                var i, len, node, wrapper, blockParent, outerWrapper;\n                var previousNodes, nextNodes, previous, next, prevWrapper, nextWrapper, child, j, listItems;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    node = nodes[i];\n                    if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                        continue;\n                    }\n                    blockParent = dom.blockParentOrBody(node);\n                    if (blockParent.tagName !== 'BODY' && blockParent.tagName !== formatTag) {\n                        if (blockParent.tagName !== 'LI' && blockParent.tagName !== 'TD' && blockParent.tagName !== 'TH') {\n                            previousNodes = [];\n                            nextNodes = [];\n                            previous = node.previousSibling;\n                            next = node.nextSibling;\n                            while (previous) {\n                                if (!dom.isMarker(previous)) {\n                                    previousNodes.push(previous);\n                                }\n                                previous = previous.previousSibling;\n                            }\n                            if (previousNodes.length) {\n                                prevWrapper = blockParent.cloneNode(true);\n                                prevWrapper.innerHTML = '';\n                                dom.insertBefore(prevWrapper, previousNodes[0]);\n                                for (j = 0; j < previousNodes.length; j++) {\n                                    child = previousNodes[j];\n                                    dom.insertAt(prevWrapper, child, 0);\n                                }\n                            }\n                            while (next) {\n                                if (!dom.isMarker(next)) {\n                                    nextNodes.push(next);\n                                }\n                                next = next.nextSibling;\n                            }\n                            if (nextNodes.length) {\n                                nextWrapper = blockParent.cloneNode(true);\n                                nextWrapper.innerHTML = '';\n                                dom.insertBefore(nextWrapper, nextNodes[0]);\n                                for (j = 0; j < nextNodes.length; j++) {\n                                    child = nextNodes[j];\n                                    nextWrapper.appendChild(child);\n                                }\n                            }\n                            dom.unwrap(blockParent);\n                        }\n                        wrapper = dom.create(document, formatTag, attr);\n                        dom.wrap(node, wrapper);\n                    } else if (blockParent.tagName === formatTag) {\n                        dom.attr(blockParent, attr);\n                    }\n                }\n                if (blockParent && blockStyles.length === 2 && blockParent.tagName !== 'LI' && formatTag === 'LI') {\n                    listItems = [];\n                    while (dom.is(wrapper, 'li')) {\n                        listItems.push(wrapper);\n                        wrapper = dom.prev(wrapper);\n                    }\n                    outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n                    dom.insertBefore(outerWrapper, listItems[listItems.length - 1]);\n                    outerWrapper.appendChild(listItems[0]);\n                    for (i = 1, len = listItems.length; i < len; i++) {\n                        dom.insertBefore(listItems[i], outerWrapper.firstChild);\n                    }\n                } else if (blockParent && blockStyles.length === 2 && blockParent.tagName !== 'LI') {\n                    outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n                    dom.wrap(wrapper, outerWrapper);\n                }\n            },\n            applyInlineStyles: function (nodes, inlineStyles) {\n                var document = this.editor.document;\n                var currentStyle, createdNode, topNode, i, newNode, node;\n                for (i = 0; i < inlineStyles.length; i++) {\n                    currentStyle = inlineStyles[i];\n                    createdNode = dom.create(document, currentStyle.tags[0], currentStyle.attr);\n                    if (topNode) {\n                        createdNode.appendChild(topNode);\n                    }\n                    topNode = createdNode;\n                }\n                if (topNode) {\n                    for (i = 0; i < nodes.length; i++) {\n                        node = nodes[i];\n                        if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                            continue;\n                        }\n                        newNode = topNode.cloneNode(true);\n                        dom.insertBefore(newNode, node);\n                        while (newNode.children && newNode.children.length) {\n                            newNode = newNode.children[0];\n                        }\n                        newNode.appendChild(node);\n                    }\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            immutableParent: function (node) {\n                return this.immutables() && Editor.Immutables.immutableParent(node);\n            }\n        });\n        var CopyFormatTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n            },\n            command: function (commandArguments) {\n                return new CopyFormatCommand(commandArguments);\n            }\n        });\n        var ApplyFormatTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n            },\n            command: function (commandArguments) {\n                return new ApplyFormatCommand(commandArguments);\n            }\n        });\n        $.extend(Editor, {\n            CopyFormatCommand: CopyFormatCommand,\n            ApplyFormatCommand: ApplyFormatCommand,\n            CopyFormatTool: CopyFormatTool,\n            ApplyFormatTool: ApplyFormatTool\n        });\n        registerTool('copyFormat', new CopyFormatTool({\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Copy format'\n            })\n        }));\n        registerTool('applyFormat', new ApplyFormatTool({\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Apply format'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/resizing-utils', ['editor/main'], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var parseFloat = global.parseFloat;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var PERCENTAGE = '%';\n        var PIXEL = 'px';\n        var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n        var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n        var STRING = 'string';\n        function constrain(options) {\n            var value = options.value;\n            var lowerBound = options.min;\n            var upperBound = options.max;\n            return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n        }\n        function getScrollBarWidth(element) {\n            if (element && !$(element).is('body') && element.scrollHeight > element.clientHeight) {\n                return kendo.support.scrollbar();\n            }\n            return 0;\n        }\n        function calculatePercentageRatio(value, total) {\n            if (inPercentages(value)) {\n                return parseFloat(value);\n            } else {\n                return parseFloat(value) / total * 100;\n            }\n        }\n        function inPercentages(value) {\n            return typeof value === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value);\n        }\n        function inPixels(value) {\n            return typeof value === STRING && REGEX_NUMBER_IN_PIXELS.test(value);\n        }\n        function toPercentages(value) {\n            return parseFloat(value) + PERCENTAGE;\n        }\n        function toPixels(value) {\n            return parseFloat(value) + PIXEL;\n        }\n        var ResizingUtils = {\n            constrain: constrain,\n            getScrollBarWidth: getScrollBarWidth,\n            calculatePercentageRatio: calculatePercentageRatio,\n            inPercentages: inPercentages,\n            inPixels: inPixels,\n            toPercentages: toPercentages,\n            toPixels: toPixels\n        };\n        extend(Editor, { ResizingUtils: ResizingUtils });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-element-resizing', [\n        'editor/main',\n        'kendo.resizable',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n        var proxy = $.proxy;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var KEY_DOWN = 'keydown';\n        var MOUSE_DOWN = 'mousedown';\n        var MOUSE_ENTER = 'mouseenter';\n        var MOUSE_LEAVE = 'mouseleave';\n        var MOUSE_MOVE = 'mousemove';\n        var MOUSE_UP = 'mouseup';\n        var COMMA = ',';\n        var DOT = '.';\n        var LAST_CHILD = ':last-child';\n        var TABLE = 'table';\n        var TableElementResizing = Class.extend({\n            init: function (element, options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.options.tags = $.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                    that._attachEventHandlers();\n                }\n            },\n            destroy: function () {\n                var that = this;\n                var eventNamespace = that.options.eventNamespace;\n                if (that.element) {\n                    $(that.element).off(eventNamespace);\n                    that.element = null;\n                }\n                $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n                that._destroyResizeHandle();\n            },\n            options: {\n                tags: [],\n                min: 0,\n                rootElement: null,\n                eventNamespace: '',\n                rtl: false,\n                handle: {\n                    dataAttribute: '',\n                    height: 0,\n                    width: 0,\n                    classNames: {},\n                    template: ''\n                }\n            },\n            _attachEventHandlers: function () {\n                var that = this;\n                var options = that.options;\n                $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), proxy(that.detectElementBorderHovering, that));\n            },\n            resizingInProgress: function () {\n                var that = this;\n                var resizable = that._resizable;\n                if (resizable) {\n                    return !!resizable.resizing;\n                }\n                return false;\n            },\n            resize: noop,\n            detectElementBorderHovering: function (e) {\n                var that = this;\n                var options = that.options;\n                var handleOptions = options.handle;\n                var tableElement = $(e.currentTarget);\n                var resizeHandle = that.resizeHandle;\n                var dataAttribute = handleOptions.dataAttribute;\n                if (!that.resizingInProgress()) {\n                    if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                        if (resizeHandle) {\n                            if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                                that.showResizeHandle(tableElement, e);\n                            }\n                        } else {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    } else {\n                        if (resizeHandle) {\n                            that._destroyResizeHandle();\n                        }\n                    }\n                }\n            },\n            elementBorderHovered: noop,\n            showResizeHandle: function (tableElement, e) {\n                var that = this;\n                if (e.buttons !== 0) {\n                    return;\n                }\n                that._initResizeHandle();\n                that.setResizeHandlePosition(tableElement);\n                that.setResizeHandleDimensions();\n                that.setResizeHandleDataAttributes(tableElement[0]);\n                that._attachResizeHandleEventHandlers();\n                that._initResizable(tableElement);\n                that._hideResizeMarker();\n                that.resizeHandle.show();\n            },\n            _initResizeHandle: function () {\n                var that = this;\n                var options = that.options;\n                that._destroyResizeHandle();\n                that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n            },\n            setResizeHandlePosition: noop,\n            setResizeHandleDimensions: noop,\n            setResizeHandleDataAttributes: function (tableElement) {\n                var that = this;\n                that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n            },\n            _attachResizeHandleEventHandlers: function () {\n                var that = this;\n                var options = that.options;\n                var eventNamespace = options.eventNamespace;\n                var markerClass = options.handle.classNames.marker;\n                var resizeHandle = that.resizeHandle;\n                that.resizeHandle.on(MOUSE_DOWN + eventNamespace, function () {\n                    resizeHandle.find(DOT + markerClass).show();\n                }).on(MOUSE_UP + eventNamespace, function () {\n                    resizeHandle.find(DOT + markerClass).hide();\n                });\n            },\n            _hideResizeMarker: function () {\n                var that = this;\n                that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n            },\n            _destroyResizeHandle: function () {\n                var that = this;\n                if (that.resizeHandle) {\n                    that._destroyResizable();\n                    that.resizeHandle.off(that.options.eventNamespace).remove();\n                    that.resizeHandle = null;\n                }\n            },\n            _initResizable: function (tableElement) {\n                var that = this;\n                if (!that.resizeHandle) {\n                    return;\n                }\n                that._destroyResizable();\n                that._resizable = new kendo.ui.Resizable(tableElement, {\n                    draggableElement: that.resizeHandle[0],\n                    start: proxy(that.onResizeStart, that),\n                    resize: proxy(that.onResize, that),\n                    resizeend: proxy(that.onResizeEnd, that)\n                });\n            },\n            _destroyResizable: function () {\n                var that = this;\n                if (that._resizable) {\n                    that._resizable.destroy();\n                    that._resizable = null;\n                }\n            },\n            onResizeStart: function () {\n                this._disableKeyboard();\n            },\n            onResize: function (e) {\n                this.setResizeHandleDragPosition(e);\n            },\n            setResizeHandleDragPosition: noop,\n            onResizeEnd: function (e) {\n                var that = this;\n                that.resize(e);\n                that._destroyResizeHandle();\n                that._enableKeyboard();\n            },\n            _enableKeyboard: function () {\n                var options = this.options;\n                $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n            },\n            _disableKeyboard: function () {\n                var options = this.options;\n                $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _forceResizing: function (e) {\n                var resizable = this._resizable;\n                if (resizable && resizable.userEvents) {\n                    resizable.userEvents._end(e);\n                }\n            }\n        });\n        var ResizingFactory = Class.extend({\n            create: function (editor, options) {\n                var that = this;\n                var resizingName = options.name;\n                var NS = options.eventNamespace;\n                $(editor.body).on(MOUSE_ENTER + NS, TABLE, function (e) {\n                    var table = e.currentTarget;\n                    var resizing = editor[resizingName];\n                    e.stopPropagation();\n                    if (resizing) {\n                        if (resizing.element !== table && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, table, options);\n                        }\n                    } else {\n                        that._initResizing(editor, table, options);\n                    }\n                }).on(MOUSE_LEAVE + NS, TABLE, function (e) {\n                    var parentTable;\n                    var resizing = editor[resizingName];\n                    e.stopPropagation();\n                    if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                        parentTable = $(resizing.element).parents(TABLE)[0];\n                        if (parentTable) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                }).on(MOUSE_LEAVE + NS, function () {\n                    var resizing = editor[resizingName];\n                    if (resizing && !resizing.resizingInProgress()) {\n                        that._destroyResizing(editor, options);\n                    }\n                }).on(MOUSE_UP + NS, function (e) {\n                    var resizing = editor[resizingName];\n                    var parentTable;\n                    if (resizing && resizing.resizingInProgress()) {\n                        parentTable = $(e.target).parents(TABLE)[0];\n                        if (parentTable) {\n                            resizing._forceResizing(e);\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                });\n            },\n            dispose: function (editor, options) {\n                $(editor.body).off(options.eventNamespace);\n            },\n            _initResizing: function (editor, tableElement, options) {\n                var resizingName = options.name;\n                var resizingType = options.type;\n                editor[resizingName] = new resizingType(tableElement, {\n                    rtl: kendo.support.isRtl(editor.element),\n                    rootElement: editor.body\n                });\n            },\n            _destroyResizing: function (editor, options) {\n                var resizingName = options.name;\n                if (editor[resizingName]) {\n                    editor[resizingName].destroy();\n                    editor[resizingName] = null;\n                }\n            }\n        });\n        ResizingFactory.current = new ResizingFactory();\n        TableElementResizing.create = function (editor, options) {\n            ResizingFactory.current.create(editor, options);\n        };\n        TableElementResizing.dispose = function (editor, options) {\n            ResizingFactory.current.dispose(editor, options);\n        };\n        extend(Editor, { TableElementResizing: TableElementResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/column-resizing', [\n        'editor/main',\n        'editor/resizing/resizing-utils',\n        'editor/resizing/table-element-resizing',\n        'editor/dom'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var abs = math.abs;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var dom = Editor.Dom;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var NS = '.kendoEditorColumnResizing';\n        var RESIZE_HANDLE_CLASS = 'k-column-resize-handle';\n        var RESIZE_MARKER_CLASS = 'k-column-resize-marker';\n        var BODY = 'body';\n        var TBODY = 'tbody';\n        var THEAD = 'thead';\n        var TD = 'td';\n        var TH = 'th';\n        var TR = 'tr';\n        var COLATTR = 'col-index';\n        var COMMA = ',';\n        var WIDTH = 'width';\n        var ColumnResizing = TableElementResizing.extend({\n            options: {\n                tags: [\n                    TD,\n                    TH\n                ],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: 'column',\n                    width: 10,\n                    height: 0,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template: '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' + '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' + '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' + '</div>' + '</div>'\n                }\n            },\n            elementBorderHovered: function (column, e) {\n                var that = this;\n                var options = that.options;\n                var handleWidth = options.handle.width;\n                var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n                var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n                if (mousePosition > borderOffset - handleWidth && mousePosition < borderOffset + handleWidth) {\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            setResizeHandlePosition: function (column) {\n                var that = this;\n                var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n                var options = that.options;\n                var rtl = options.rtl;\n                var handleWidth = options.handle.width;\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n                var columnWidthOffset = rtl ? 0 : outerWidth(column);\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var columnOffsetLeft = column.offset().left - (rootElement.offset().left + parseFloat(rootElement.css('borderLeftWidth'))) - parseFloat(column.css('marginLeft'));\n                var innerElementOffsetTop = tableInnerElement.offset().top - (rootElement.offset().top + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat(tableInnerElement.css('marginTop'));\n                var browser = kendo.support.browser;\n                if (rtl && (browser.mozilla || browser.webkit && browser.version >= 85)) {\n                    scrollLeftOffset = scrollLeftOffset * -1;\n                }\n                that.resizeHandle.css({\n                    top: innerElementOffsetTop + scrollTopOffset,\n                    left: columnOffsetLeft + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - handleWidth / 2,\n                    position: 'absolute'\n                });\n            },\n            setResizeHandleDimensions: function () {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableBody = $(that.element).children(TBODY);\n                var fullHeight = tableHead.length > 0 ? tableHead.height() + tableBody.height() : tableBody.height();\n                that.resizeHandle.css({\n                    width: that.options.handle.width,\n                    height: fullHeight\n                });\n            },\n            setResizeHandleDragPosition: function (e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rootElement = $(options.rootElement);\n                var handleWidth = options.handle ? options.handle.width : 0;\n                var min = options.min;\n                var rtl = options.rtl;\n                var columnWidth = outerWidth(column);\n                var columnLeftOffset = column.offset().left - (rootElement.offset().left + parseFloat(rootElement.css('borderLeftWidth'))) - parseFloat(column.css('marginLeft'));\n                var adjacentColumnWidth = outerWidth(column.next());\n                var resizeHandle = $(that.resizeHandle);\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var resizeHandleOffsetLeft = resizeHandle.offset().left - (rootElement.offset().left + parseFloat(rootElement.css('borderLeftWidth'))) - parseFloat(resizeHandle.css('marginLeft'));\n                var browser = kendo.support.browser;\n                if (rtl && (browser.mozilla || browser.webkit && browser.version >= 85)) {\n                    scrollLeftOffset = scrollLeftOffset * -1;\n                }\n                var handleOffset = constrain({\n                    value: resizeHandleOffsetLeft + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                    min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                    max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n                });\n                resizeHandle.css({ left: handleOffset });\n            },\n            resize: function (e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rtlModifier = options.rtl ? -1 : 1;\n                var min = options.min;\n                var initialDeltaX = rtlModifier * e.x.initialDelta;\n                var newWidth;\n                var initialAdjacentColumnWidth;\n                var initialColumnWidth;\n                var colIndex;\n                var nextColumn;\n                dom.reMapTableColumns(that.element, COLATTR);\n                colIndex = parseInt(column.attr(COLATTR), 10);\n                if (column.prop('colSpan') > 1) {\n                    column = $(that.element).find('[' + COLATTR + '=' + (colIndex + column.prop('colSpan') - 1) + ']').eq(0);\n                    colIndex = parseInt(column.attr(COLATTR), 10);\n                }\n                nextColumn = $(that.element).find('[' + COLATTR + '=' + (colIndex + 1) + ']:not([colspan])');\n                that._setTableComputedWidth();\n                that._setColumnsComputedWidth();\n                initialColumnWidth = outerWidth(column);\n                initialAdjacentColumnWidth = outerWidth(nextColumn);\n                newWidth = constrain({\n                    value: initialColumnWidth + initialDeltaX,\n                    min: min,\n                    max: initialColumnWidth + initialAdjacentColumnWidth - min\n                });\n                that._resizeColumn(column[0], newWidth);\n                that._resizeTopAndBottomColumns(column[0], newWidth);\n                that._resizeAdjacentColumns(parseInt(column.attr(COLATTR), 10), initialAdjacentColumnWidth, initialColumnWidth, initialColumnWidth - newWidth);\n                dom.clearTableMappings(that.element, COLATTR);\n            },\n            _setTableComputedWidth: function () {\n                var element = this.element;\n                if (element.style[WIDTH] === '') {\n                    element.style[WIDTH] = toPixels(outerWidth($(element)));\n                }\n            },\n            _setColumnsComputedWidth: function () {\n                var that = this;\n                var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n                var innerElementWidth = outerWidth(tableInnerElement);\n                var columns = tableInnerElement.children(TR).children(TD);\n                var length = columns.length;\n                var currentColumnsWidths = columns.map(function () {\n                    return outerWidth($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    if (inPercentages(columns[i].style[WIDTH])) {\n                        columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], innerElementWidth));\n                    } else {\n                        columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                    }\n                }\n            },\n            _resizeTopAndBottomColumns: function (column, newWidth) {\n                var that = this;\n                var columnIndex = $(column).attr(COLATTR);\n                var topAndBottomColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA)).filter(function () {\n                    var cell = this;\n                    return $(cell).attr(COLATTR) === columnIndex && cell !== column;\n                });\n                var length = topAndBottomColumns.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that._resizeColumn(topAndBottomColumns[i], newWidth);\n                }\n            },\n            _resizeColumn: function (column, newWidth) {\n                var innerTableElement = $(this.element.tHead || this.element.tBodies[0]);\n                if (inPercentages(column.style[WIDTH])) {\n                    column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth(innerTableElement)));\n                } else {\n                    column.style[WIDTH] = toPixels(newWidth);\n                }\n            },\n            _resizeAdjacentColumns: function (columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var adjacentColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA)).filter(function () {\n                    return parseInt($(this).attr(COLATTR), 10) === columnIndex + 1;\n                });\n                var length = adjacentColumns.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n                }\n            },\n            _resizeAdjacentColumn: function (adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var min = that.options.min;\n                var newWidth;\n                newWidth = constrain({\n                    value: initialAdjacentColumnWidth + deltaWidth,\n                    min: min,\n                    max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n                });\n                that._resizeColumn(adjacentColumn, newWidth);\n            }\n        });\n        ColumnResizing.create = function (editor) {\n            TableElementResizing.create(editor, {\n                name: 'columnResizing',\n                type: ColumnResizing,\n                eventNamespace: NS\n            });\n        };\n        ColumnResizing.dispose = function (editor) {\n            TableElementResizing.dispose(editor, { eventNamespace: NS });\n        };\n        extend(Editor, { ColumnResizing: ColumnResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/row-resizing', [\n        'editor/main',\n        'editor/resizing/resizing-utils',\n        'editor/resizing/table-element-resizing'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var math = window.Math;\n        var abs = math.abs;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorRowResizing';\n        var RESIZE_HANDLE_CLASS = 'k-row-resize-handle';\n        var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = 'k-row-resize-marker-wrapper';\n        var RESIZE_MARKER_CLASS = 'k-row-resize-marker';\n        var BODY = 'body';\n        var TR = 'tr';\n        var TBODY = 'tbody';\n        var THEAD = 'thead';\n        var COMMA = ',';\n        var HEIGHT = 'height';\n        var RowResizing = TableElementResizing.extend({\n            options: {\n                tags: [TR],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: 'row',\n                    width: 0,\n                    height: 10,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template: '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' + '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' + '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' + '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' + '</div>' + '</div>' + '</div>'\n                }\n            },\n            elementBorderHovered: function (tableElement, e) {\n                var that = this;\n                var handleHeight = that.options.handle[HEIGHT];\n                var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n                var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n                if (mousePosition > borderOffset - handleHeight && mousePosition < borderOffset + handleHeight) {\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            setResizeHandlePosition: function (row) {\n                var that = this;\n                var options = that.options;\n                var handleHeight = options.handle[HEIGHT];\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var rowOffsetLeft = row.offset().left - (rootElement.offset().left + parseFloat(rootElement.css('borderLeftWidth'))) - parseFloat(row.css('marginLeft'));\n                var rowOffsetTop = row.offset().top - (rootElement.offset().top + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat(row.css('marginTop'));\n                var browser = kendo.support.browser;\n                if (options.rtl && (browser.mozilla || browser.webkit && browser.version >= 85)) {\n                    scrollLeftOffset = scrollLeftOffset * -1;\n                }\n                that.resizeHandle.css({\n                    top: rowOffsetTop + outerHeight(row) + scrollTopOffset - handleHeight / 2,\n                    left: rowOffsetLeft + (scrollLeftOffset - scrollBarWidth),\n                    position: 'absolute'\n                });\n            },\n            setResizeHandleDimensions: function () {\n                var that = this;\n                var innerTableElement = $(that.element.tHead || that.element.tBodies[0]);\n                that.resizeHandle.css({\n                    width: innerTableElement.width(),\n                    height: that.options.handle[HEIGHT]\n                });\n            },\n            setResizeHandleDragPosition: function (e) {\n                var that = this;\n                var options = that.options;\n                var min = options.min;\n                var tableHead = $(that.element).children(THEAD);\n                var tableBody = $(that.element).children(TBODY);\n                var topInnerTableElement = tableHead.length > 0 ? tableHead : tableBody;\n                var resizeHandle = $(that.resizeHandle);\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var $row = $(row);\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var tableTopOffset = topInnerTableElement.offset().top - (rootElement.offset().top + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat(topInnerTableElement.css('marginTop'));\n                var rowOffsetTop = $row.offset().top - (rootElement.offset().top + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat($row.css('marginTop'));\n                var resizeHandleOffsetTop = resizeHandle.offset().top - (Math.max(0, rootElement.offset().top) + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat(resizeHandle.css('marginTop'));\n                var handleOffset = constrain({\n                    value: resizeHandleOffsetTop + scrollTopOffset + e.y.delta,\n                    min: rowOffsetTop + scrollTopOffset + min,\n                    max: tableTopOffset + outerHeight(tableHead) + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n                });\n                resizeHandle.css({ top: handleOffset });\n            },\n            resize: function (e) {\n                var that = this;\n                var options = that.options;\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var currentRowHeight = outerHeight($(row));\n                var element = $(that.element);\n                var initialTableHeight = outerHeight(element);\n                var tableHead = element.children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = element.children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var initialStyleHeight = row.style[HEIGHT];\n                var newRowHeight = constrain({\n                    value: currentRowHeight + e.y.initialDelta,\n                    min: options.min,\n                    max: abs(tableHeadHeight + tableBodyHeight - options.min)\n                });\n                that._setRowsHeightInPixels();\n                row.style[HEIGHT] = toPixels(newRowHeight);\n                that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n                if (inPercentages(initialStyleHeight)) {\n                    that._setRowsHeightInPercentages();\n                }\n            },\n            _setRowsHeightInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY + COMMA + THEAD).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n            _setRowsHeightInPercentages: function () {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n                }\n            },\n            _setTableHeight: function (newHeight) {\n                var element = this.element;\n                if (inPercentages(element.style[HEIGHT])) {\n                    element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n                } else {\n                    element.style[HEIGHT] = toPixels(newHeight);\n                }\n            }\n        });\n        RowResizing.create = function (editor) {\n            TableElementResizing.create(editor, {\n                name: 'rowResizing',\n                type: RowResizing,\n                eventNamespace: NS\n            });\n        };\n        RowResizing.dispose = function (editor) {\n            TableElementResizing.dispose(editor, { eventNamespace: NS });\n        };\n        extend(Editor, { RowResizing: RowResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-resize-handle', [\n        'editor/main',\n        'kendo.draganddrop',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n        var proxy = $.proxy;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var Draggable = kendo.ui.Draggable;\n        var Observable = kendo.Observable;\n        var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorTableResizeHandle';\n        var RESIZE_HANDLE_CLASS = 'k-table-resize-handle';\n        var DRAG_START = 'dragStart';\n        var DRAG = 'drag';\n        var DRAG_END = 'dragEnd';\n        var HALF_INSIDE = 'halfInside';\n        var MOUSE_OVER = 'mouseover';\n        var MOUSE_OUT = 'mouseout';\n        var BODY = 'body';\n        var TABLE = 'table';\n        var EAST = 'east';\n        var NORTH = 'north';\n        var NORTHEAST = 'northeast';\n        var NORTHWEST = 'northwest';\n        var SOUTH = 'south';\n        var SOUTHEAST = 'southeast';\n        var SOUTHWEST = 'southwest';\n        var WEST = 'west';\n        var DOT = '.';\n        var TableResizeHandle = Observable.extend({\n            init: function (options) {\n                var that = this;\n                Observable.fn.init.call(that);\n                that.options = extend({}, that.options, options);\n                that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n                that._attachEventHandlers();\n                that._addStyles();\n                that._initDraggable();\n                that._initPositioningStrategy();\n                that._initDraggingStrategy();\n                $(that.element).data(TABLE, that.options.resizableElement);\n            },\n            destroy: function () {\n                var that = this;\n                $(that.element).off(NS).remove();\n                that.element = null;\n                that._destroyDraggable();\n                that.unbind();\n            },\n            options: {\n                appendTo: null,\n                direction: SOUTHEAST,\n                resizableElement: null,\n                rtl: false,\n                template: '<div class=\\'k-table-resize-handle-wrapper\\' unselectable=\\'on\\' contenteditable=\\'false\\'>' + '<div class=\\'' + RESIZE_HANDLE_CLASS + '\\'></div>' + '</div>'\n            },\n            events: [\n                DRAG_START,\n                DRAG,\n                DRAG_END,\n                MOUSE_OVER,\n                MOUSE_OUT\n            ],\n            show: function () {\n                this._setPosition();\n            },\n            _setPosition: function () {\n                var that = this;\n                var position = that._positioningStrategy.getPosition();\n                $(that.element).css({\n                    top: position.top,\n                    left: position.left,\n                    position: 'absolute'\n                });\n            },\n            _attachEventHandlers: function () {\n                var that = this;\n                $(that.element).on(MOUSE_OVER + NS, proxy(that._onMouseOver, that)).on(MOUSE_OUT + NS, proxy(that._onMouseOut, that));\n            },\n            _onMouseOver: function () {\n                this.trigger(MOUSE_OVER);\n            },\n            _onMouseOut: function () {\n                this.trigger(MOUSE_OUT);\n            },\n            _addStyles: function () {\n                var that = this;\n                $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass('k-resize-' + that.options.direction);\n            },\n            _initPositioningStrategy: function () {\n                var that = this;\n                var options = that.options;\n                that._positioningStrategy = HandlePositioningStrategy.create({\n                    name: options.direction,\n                    handle: that.element,\n                    resizableElement: options.resizableElement,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                });\n            },\n            _initDraggable: function () {\n                var that = this;\n                var element = that.element;\n                if (that._draggable || !element) {\n                    return;\n                }\n                that._draggable = new Draggable(element, {\n                    dragstart: proxy(that._onDragStart, that),\n                    drag: proxy(that._onDrag, that),\n                    dragend: proxy(that._onDragEnd, that)\n                });\n            },\n            _onDragStart: function () {\n                this.trigger(DRAG_START);\n            },\n            _onDrag: function (e) {\n                var that = this;\n                that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                    deltaX: e.x.delta,\n                    deltaY: e.y.delta,\n                    initialDeltaX: e.x.initialDelta,\n                    initialDeltaY: e.y.initialDelta\n                }));\n            },\n            _onDragEnd: function () {\n                this.trigger(DRAG_END);\n            },\n            _destroyDraggable: function () {\n                var that = this;\n                if (that._draggable) {\n                    that._draggable.destroy();\n                    that._draggable = null;\n                }\n            },\n            _initDraggingStrategy: function () {\n                var that = this;\n                that._draggingStrategy = HandleDraggingStrategy.create({ name: that.options.direction });\n            }\n        });\n        var StrategyFactory = Class.extend({\n            init: function () {\n                this._items = [];\n            },\n            register: function (name, type) {\n                this._items.push({\n                    name: name,\n                    type: type\n                });\n            },\n            create: function (options) {\n                var items = this._items;\n                var itemsLength = items.length;\n                var name = options.name ? options.name.toLowerCase() : '';\n                var match;\n                var item;\n                var i;\n                for (i = 0; i < itemsLength; i++) {\n                    item = items[i];\n                    if (item.name.toLowerCase() === name) {\n                        match = item;\n                        break;\n                    }\n                }\n                if (match) {\n                    return new match.type(options);\n                }\n            }\n        });\n        var PositioningStrategyFactory = StrategyFactory.extend({});\n        PositioningStrategyFactory.current = new PositioningStrategyFactory();\n        var HandlePositioningStrategy = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n            options: {\n                handle: null,\n                offset: HALF_INSIDE,\n                resizableElement: null,\n                rootElement: null,\n                rtl: false\n            },\n            getPosition: function () {\n                var that = this;\n                var position = that.calculatePosition();\n                var handleOffsetPosition = that.applyHandleOffset(position);\n                var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n                return scrollOffsetPosition;\n            },\n            calculatePosition: noop,\n            applyHandleOffset: function (position) {\n                var options = this.options;\n                var handle = $(options.handle);\n                if (options.offset === HALF_INSIDE) {\n                    return {\n                        top: position.top - outerHeight(handle) / 2,\n                        left: position.left - outerWidth(handle) / 2\n                    };\n                }\n                return position;\n            },\n            applyScrollOffset: function (position) {\n                var options = this.options;\n                var rootElement = $(options.rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var browser = kendo.support.browser;\n                var rootLeft;\n                if (!rootElement.is(BODY)) {\n                    rootLeft = kendo.scrollLeft(rootElement) || 0;\n                    if (options.rtl && (browser.mozilla || browser.webkit && browser.version >= 85)) {\n                        rootLeft = rootLeft * -1;\n                    }\n                    return {\n                        top: position.top + (rootElement.scrollTop() || 0),\n                        left: position.left + rootLeft - scrollBarWidth\n                    };\n                }\n                return position;\n            }\n        });\n        HandlePositioningStrategy.create = function (options) {\n            return PositioningStrategyFactory.current.create(options);\n        };\n        var EastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css('marginLeft'), 10);\n                return {\n                    top: offset.top + outerHeight(resizableElement) / 2,\n                    left: offset.left + outerWidth(resizableElement) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n        var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css('marginLeft'), 10);\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement) / 2 + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n        var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css('marginLeft'), 10);\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n        var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css('marginLeft'), 10);\n                return {\n                    top: offset.top,\n                    left: offset.left + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n        var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css('marginLeft'), 10);\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement) / 2 + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n        var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css('marginLeft'), 10);\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n        var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css('marginLeft'), 10);\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n        var WestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css('marginLeft'), 10);\n                return {\n                    top: offset.top + outerHeight(resizableElement) / 2,\n                    left: offset.left + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n        var DraggingStrategyFactory = StrategyFactory.extend({});\n        DraggingStrategyFactory.current = new DraggingStrategyFactory();\n        var HandleDraggingStrategy = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n            options: {\n                deltaX: {\n                    adjustment: null,\n                    modifier: null\n                },\n                deltaY: {\n                    adjustment: null,\n                    modifier: null\n                }\n            },\n            adjustDragDelta: function (deltas) {\n                var options = this.options;\n                var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n                var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n                return {\n                    deltaX: deltas.deltaX * xAxisAdjustment,\n                    deltaY: deltas.deltaY * yAxisAdjustment,\n                    initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                    initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n                };\n            }\n        });\n        HandleDraggingStrategy.create = function (options) {\n            return DraggingStrategyFactory.current.create(options);\n        };\n        var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 0,\n                    modifier: 0\n                }\n            }\n        });\n        var EastDraggingStrategy = HorizontalDraggingStrategy.extend({ options: { deltaX: { modifier: 1 } } });\n        DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n        var WestDraggingStrategy = HorizontalDraggingStrategy.extend({ options: { deltaX: { modifier: -1 } } });\n        DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n        var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 0,\n                    modifier: 0\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n        var NorthDraggingStrategy = VerticalDraggingStrategy.extend({ options: { deltaY: { modifier: -1 } } });\n        DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n        var SouthDraggingStrategy = VerticalDraggingStrategy.extend({ options: { deltaY: { modifier: 1 } } });\n        DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n        var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n        var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: 1 },\n                deltaY: { modifier: -1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n        var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: -1 },\n                deltaY: { modifier: -1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n        var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: 1 },\n                deltaY: { modifier: 1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n        var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: -1 },\n                deltaY: { modifier: 1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n        extend(Editor, { TableResizeHandle: TableResizeHandle });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-resizing', [\n        'editor/main',\n        'editor/resizing/table-resize-handle',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var $ = kendo.jQuery;\n        var contains = $.contains;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var browser = kendo.support.browser;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var TableResizeHandle = Editor.TableResizeHandle;\n        var ResizingUtils = Editor.ResizingUtils;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var constrain = ResizingUtils.constrain;\n        var inPercentages = ResizingUtils.inPercentages;\n        var inPixels = ResizingUtils.inPixels;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorTableResizing';\n        var RESIZE_HANDLE_WRAPPER_CLASS = 'k-table-resize-handle-wrapper';\n        var TABLE_CLASS = 'k-table';\n        var TABLE_RESIZING_CLASS = 'k-table-resizing';\n        var DRAG_START = 'dragStart';\n        var DRAG = 'drag';\n        var DRAG_END = 'dragEnd';\n        var KEY_DOWN = 'keydown';\n        var MOUSE_DOWN = 'mousedown';\n        var MOUSE_OVER = 'mouseover';\n        var MOUSE_OUT = 'mouseout';\n        var COLUMN = 'td';\n        var ROW = 'tr';\n        var TBODY = 'tbody';\n        var THEAD = 'thead';\n        var TABLE = 'table';\n        var COMMA = ',';\n        var WIDTH = 'width';\n        var HEIGHT = 'height';\n        var EAST = 'east';\n        var NORTH = 'north';\n        var NORTHEAST = 'northeast';\n        var NORTHWEST = 'northwest';\n        var SOUTH = 'south';\n        var SOUTHEAST = 'southeast';\n        var SOUTHWEST = 'southwest';\n        var WEST = 'west';\n        var DOT = '.';\n        function isUndefined(value) {\n            return typeof value === 'undefined';\n        }\n        var TableResizing = Class.extend({\n            init: function (element, options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.handles = [];\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                }\n            },\n            destroy: function () {\n                var that = this;\n                $(that.element).off(NS);\n                that.element = null;\n                $(that.options.rootElement).off(KEY_DOWN + NS);\n                that._destroyResizeHandles();\n            },\n            options: {\n                appendHandlesTo: null,\n                rtl: false,\n                rootElement: null,\n                minWidth: 10,\n                minHeight: 10,\n                handles: [\n                    { direction: NORTHWEST },\n                    { direction: NORTH },\n                    { direction: NORTHEAST },\n                    { direction: EAST },\n                    { direction: SOUTHEAST },\n                    { direction: SOUTH },\n                    { direction: SOUTHWEST },\n                    { direction: WEST }\n                ]\n            },\n            resize: function (args) {\n                var that = this;\n                var deltas = extend({}, {\n                    deltaX: 0,\n                    deltaY: 0,\n                    initialDeltaX: 0,\n                    initialDeltaY: 0\n                }, args);\n                that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n                that.showResizeHandles();\n            },\n            _resizeWidth: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleWidth = element[0].style[WIDTH];\n                var currentWidth = outerWidth(element);\n                var parentWidth = element.parent().width();\n                var maxWidth = that._getMaxDimensionValue(WIDTH);\n                var newWidth;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedWidth;\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementWidth)) {\n                    that._initialElementWidth = currentWidth;\n                }\n                constrainedWidth = constrain({\n                    value: that._initialElementWidth + initialDelta,\n                    min: that.options.minWidth,\n                    max: maxWidth\n                });\n                if (inPercentages(styleWidth)) {\n                    if (currentWidth + delta > parentWidth) {\n                        ratioValue = max(constrainedWidth, parentWidth);\n                        ratioTotalValue = min(constrainedWidth, parentWidth);\n                    } else {\n                        ratioValue = min(constrainedWidth, parentWidth);\n                        ratioTotalValue = max(constrainedWidth, parentWidth);\n                    }\n                    newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                } else {\n                    newWidth = toPixels(constrainedWidth);\n                }\n                that._setColumnsWidth();\n                element[0].style[WIDTH] = newWidth;\n            },\n            _resizeHeight: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleHeight = element[0].style[HEIGHT];\n                var currentHeight = outerHeight(element);\n                var parent = element.parent();\n                var parentHeight = parent.height();\n                var maxHeight = that._getMaxDimensionValue(HEIGHT);\n                var newHeight;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedHeight;\n                var minHeight = that.options.minHeight;\n                var hasRowsInPixels = that._hasRowsInPixels();\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementHeight)) {\n                    that._initialElementHeight = currentHeight;\n                }\n                constrainedHeight = constrain({\n                    value: that._initialElementHeight + initialDelta,\n                    min: minHeight,\n                    max: maxHeight\n                });\n                if (hasRowsInPixels && delta < 0) {\n                    that._setRowsHeightInPercentages();\n                }\n                if (inPercentages(styleHeight)) {\n                    if (currentHeight + delta > parentHeight) {\n                        ratioValue = max(constrainedHeight, parentHeight);\n                        ratioTotalValue = min(constrainedHeight, parentHeight);\n                    } else {\n                        ratioValue = min(constrainedHeight, parentHeight);\n                        ratioTotalValue = max(constrainedHeight, parentHeight);\n                    }\n                    newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                } else {\n                    newHeight = toPixels(constrainedHeight);\n                }\n                element[0].style[HEIGHT] = newHeight;\n                if (hasRowsInPixels && delta < 0) {\n                    that._setRowsHeightInPixels();\n                }\n            },\n            _getMaxDimensionValue: function (dimension) {\n                var that = this;\n                var element = $(that.element);\n                var dimensionLowercase = dimension.toLowerCase();\n                var rtlModifier = that.options.rtl ? -1 : 1;\n                var parent = $(that.element).parent();\n                var parentElement = parent[0];\n                var parentDimension = parent[dimensionLowercase]();\n                var parentScrollOffset = rtlModifier * (dimension === WIDTH ? kendo.scrollLeft(parent) : parent.scrollTop());\n                if (parentElement === element.closest(COLUMN)[0]) {\n                    if (parentElement.style[dimensionLowercase] === '' && !inPercentages(that.element.style[dimensionLowercase])) {\n                        return Infinity;\n                    } else {\n                        return parentDimension + parentScrollOffset;\n                    }\n                } else {\n                    return parentDimension + parentScrollOffset;\n                }\n            },\n            _setColumnsWidth: function () {\n                var that = this;\n                var element = $(that.element);\n                var parentElement = element.parent()[0];\n                var parentColumn = element.closest(COLUMN);\n                var columns = parentColumn.closest(ROW).children();\n                var columnsLength = columns.length;\n                var i;\n                function isWidthInPercentages(element) {\n                    var styleWidth = element.style.width;\n                    if (styleWidth !== '') {\n                        return inPercentages(styleWidth) ? true : false;\n                    } else {\n                        return $(element).hasClass(TABLE_CLASS) ? true : false;\n                    }\n                }\n                if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === '') {\n                    for (i = 0; i < columnsLength; i++) {\n                        columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                    }\n                }\n            },\n            _hasRowsInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n                for (var i = 0; i < rows.length; i++) {\n                    if (rows[i].style.height === '' || inPixels(rows[i].style.height)) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _setRowsHeightInPercentages: function () {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n                }\n            },\n            _setRowsHeightInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n            showResizeHandles: function () {\n                var that = this;\n                that._initResizeHandles();\n                that._showResizeHandles();\n            },\n            _initResizeHandles: function () {\n                var that = this;\n                var handles = that.handles;\n                var options = that.options;\n                var handleOptions = that.options.handles;\n                var length = handleOptions.length;\n                var i;\n                if (handles && handles.length > 0) {\n                    return;\n                }\n                for (i = 0; i < length; i++) {\n                    that.handles.push(new TableResizeHandle(extend({\n                        appendTo: options.appendHandlesTo,\n                        resizableElement: that.element,\n                        rootElement: options.rootElement,\n                        rtl: options.rtl\n                    }, handleOptions[i])));\n                }\n                that._bindToResizeHandlesEvents();\n            },\n            _destroyResizeHandles: function () {\n                var that = this;\n                var length = that.handles ? that.handles.length : 0;\n                for (var i = 0; i < length; i++) {\n                    that.handles[i].destroy();\n                }\n            },\n            _showResizeHandles: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that.handles[i].show();\n                }\n            },\n            _bindToResizeHandlesEvents: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                var handle;\n                for (i = 0; i < length; i++) {\n                    handle = handles[i];\n                    handle.bind(DRAG_START, proxy(that._onResizeHandleDragStart, that));\n                    handle.bind(DRAG, proxy(that._onResizeHandleDrag, that));\n                    handle.bind(DRAG_END, proxy(that._onResizeHandleDragEnd, that));\n                    handle.bind(MOUSE_OVER, proxy(that._onResizeHandleMouseOver, that));\n                    handle.bind(MOUSE_OUT, proxy(that._onResizeHandleMouseOut, that));\n                }\n            },\n            _onResizeHandleDragStart: function () {\n                var that = this;\n                var element = $(that.element);\n                element.addClass(TABLE_RESIZING_CLASS);\n                that._initialElementHeight = outerHeight(element);\n                that._initialElementWidth = outerWidth(element);\n                that._disableKeyboard();\n            },\n            _onResizeHandleDrag: function (e) {\n                this.resize(e);\n            },\n            _onResizeHandleDragEnd: function () {\n                var that = this;\n                $(that.element).removeClass(TABLE_RESIZING_CLASS);\n                that._enableKeyboard();\n            },\n            _enableKeyboard: function () {\n                $(this.options.rootElement).off(KEY_DOWN + NS);\n            },\n            _disableKeyboard: function () {\n                $(this.options.rootElement).on(KEY_DOWN + NS, function (e) {\n                    e.preventDefault();\n                });\n            }\n        });\n        var TableResizingFactory = Class.extend({\n            create: function (editor) {\n                var factory = this;\n                $(editor.body).on(MOUSE_DOWN + NS, TABLE, function (e) {\n                    var eventTarget = e.target;\n                    var eventCurrentTarget = e.currentTarget;\n                    var tableResizing = editor.tableResizing;\n                    var element = tableResizing ? tableResizing.element : null;\n                    if (tableResizing) {\n                        if (element && eventCurrentTarget !== element) {\n                            if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                return;\n                            } else {\n                                if (element !== eventTarget) {\n                                    editor._destroyTableResizing();\n                                    factory._initResizing(editor, eventCurrentTarget);\n                                }\n                            }\n                        }\n                    } else {\n                        factory._initResizing(editor, eventCurrentTarget);\n                    }\n                    editor._showTableResizeHandles();\n                }).on(MOUSE_DOWN + NS, function (e) {\n                    var tableResizing = editor.tableResizing;\n                    var element = tableResizing ? tableResizing.element : null;\n                    var target = e.target;\n                    var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n                    if (tableResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                        editor._destroyTableResizing();\n                    }\n                });\n            },\n            dispose: function (editor) {\n                $(editor.body).off(NS);\n            },\n            _initResizing: function (editor, table) {\n                if (!browser.msie && !browser.mozilla) {\n                    editor.tableResizing = new TableResizing(table, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                }\n            }\n        });\n        TableResizingFactory.current = new TableResizingFactory();\n        TableResizing.create = function (editor) {\n            TableResizingFactory.current.create(editor);\n        };\n        TableResizing.dispose = function (editor) {\n            TableResizingFactory.current.dispose(editor);\n        };\n        extend(Editor, { TableResizing: TableResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/table-wizard/table-wizard-command', ['editor/plugins/tables'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, Command = Editor.Command;\n        var tableFormatFinder = new Editor.BlockFormatFinder([{ tags: ['table'] }]);\n        var cellsFormatFinder = new Editor.BlockFormatFinder([{\n                tags: [\n                    'td',\n                    'th'\n                ]\n            }]);\n        var reUnit = /([a-z]+|%)$/i;\n        var COL = 'col';\n        var ROW = 'row';\n        var COLGROUP = 'colgroup';\n        var SCOPE = 'scope';\n        var COL_INDEX = 'col-index';\n        var TH = 'th';\n        var TD = 'td';\n        var THEAD = 'thead';\n        var HEADERS = 'headers';\n        var TABLE = 'table';\n        var TableWizardCommand = Command.extend({\n            exec: function () {\n                var cmd = this;\n                var editor = cmd.editor;\n                var range = cmd.range = cmd.lockRange();\n                var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined;\n                var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined;\n                var options = {\n                    visible: false,\n                    messages: editor.options.messages,\n                    closeCallback: $.proxy(cmd.onDialogClose, cmd),\n                    table: cmd.parseTable(selectedTable, selectedCells),\n                    dialogOptions: editor.options.dialogOptions,\n                    isRtl: kendo.support.isRtl(editor.wrapper)\n                };\n                var dialog = new Editor.TableWizardDialog(options);\n                dialog.open();\n            },\n            onDialogClose: function (data) {\n                var cmd = this;\n                cmd.releaseRange(cmd.range);\n                if (data) {\n                    if (cmd.options.insertNewTable) {\n                        cmd.insertTable(cmd.createNewTable(data));\n                    } else {\n                        cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n                    }\n                }\n            },\n            releaseRange: function (range) {\n                var cmd = this;\n                var doc = cmd.editor.document;\n                dom.windowFromDocument(doc).focus();\n                Command.fn.releaseRange.call(cmd, range);\n            },\n            insertTable: function (table) {\n                var range = this.range;\n                range.insertNode(table);\n                range.collapse(true);\n                this.editor.selectRange(range);\n                this._ensureFocusableAfterTable(table);\n            },\n            _ensureFocusableAfterTable: function (table) {\n                var siblingNodes = $(table).parent().contents();\n                var lastSiblingIndex = siblingNodes.length - 1;\n                var lastSibling = siblingNodes.get(lastSiblingIndex);\n                while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === ' ' || lastSibling.nodeValue === '')) {\n                    lastSiblingIndex -= 1;\n                    lastSibling = siblingNodes.get(lastSiblingIndex);\n                }\n                if (lastSibling === table) {\n                    dom.insertAfter(dom.createEmptyNode(this.editor.document, 'p'), table);\n                }\n            },\n            updateTable: function (data, table, selectedCells) {\n                var cmd = this;\n                var tableRows = $(table.rows).toArray();\n                var tableProp = data.tableProperties;\n                var rows = tableProp.rows;\n                var tHead = table.tHead;\n                var last = cmd._lastInCollection;\n                var lastSelectedRow, cellProp;\n                while (selectedCells.length > 1) {\n                    selectedCells.pop();\n                }\n                lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n                cmd._deleteTableRows(tableRows, tableRows.length - rows);\n                if (tableRows.length < rows) {\n                    cmd._addRows(lastSelectedRow, rows, tableRows);\n                }\n                dom.reMapTableColumns(table, COL_INDEX);\n                cmd._updateColumns(tableRows, tableProp.columns, selectedCells, lastSelectedRow);\n                cmd._updateTableProperties(table, tableProp);\n                cellProp = data.cellProperties;\n                if (selectedCells[0]) {\n                    dom.attr(selectedCells[0], { id: cellProp.id || null });\n                }\n                (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function (i, cell) {\n                    cmd._updateCellProperties(cell, cellProp);\n                });\n                cmd._updateCaption(table, tableProp);\n                if (tHead) {\n                    cmd._updateHeadersWithThead(table, data);\n                } else {\n                    cmd._updateHeadersNoThead(table, data);\n                }\n                cmd._updateHeaderAssociates(table, tableProp);\n                dom.clearTableMappings(table, COL_INDEX);\n            },\n            _isHeadingRow: function (row) {\n                return dom.is(row.cells[0], TH) && dom.is(row.parentNode, THEAD);\n            },\n            _isHeadingCell: function (cell) {\n                return dom.is(cell, TH);\n            },\n            cellsWithHeadersAssociated: function (table) {\n                var cells = $(table.rows).children();\n                var headingIds = [];\n                var checkHeader = function (header) {\n                    return headingIds.indexOf(header) > -1;\n                };\n                cells.each(function (c, cell) {\n                    if (cell.id && dom.is(cell, TH)) {\n                        headingIds.push(cell.id);\n                    }\n                });\n                var associatedCells = cells.filter(function (c, cell) {\n                    var headersAttr = cell.getAttribute(HEADERS);\n                    var headersArray;\n                    if (headersAttr && !dom.is(cell, TH)) {\n                        headersArray = headersAttr.split(' ');\n                        if (headersArray && headersArray.length > 0) {\n                            return headersArray.some(checkHeader);\n                        }\n                    }\n                    return false;\n                });\n                return !!associatedCells.length;\n            },\n            _insertCells: function (count, row, index) {\n                index = isNaN(index) ? -1 : index;\n                for (var i = 0, cell; i < count; i++) {\n                    cell = row.insertCell(index);\n                    cell.innerHTML = '&nbsp;';\n                }\n            },\n            _deleteTableRows: function (rows, count) {\n                for (var i = 0, row, rowParent; i < count; i++) {\n                    row = rows.pop();\n                    rowParent = row.parentNode;\n                    rowParent.removeChild(row);\n                    if (!rowParent.rows.length) {\n                        dom.remove(rowParent);\n                    }\n                }\n            },\n            createNewTable: function (data) {\n                var cmd = this;\n                var doc = cmd.editor.document;\n                var tableProp = data.tableProperties;\n                var table = dom.create(doc, TABLE);\n                var rowIndex = 0;\n                var thead;\n                cmd._updateTableProperties(table, tableProp);\n                cmd._updateCaption(table, tableProp);\n                if (tableProp.headerRows && tableProp.headerRows > 0) {\n                    thead = table.createTHead();\n                    cmd._createTableRows(data, thead, rowIndex, true);\n                    rowIndex += tableProp.headerRows;\n                }\n                var tbody = table.createTBody();\n                cmd._createTableRows(data, tbody, rowIndex, false);\n                dom.reMapTableColumns(table, COL_INDEX);\n                if (tableProp.cellsWithHeaders === 'ids') {\n                    dom.associateWithIds(table);\n                } else if (tableProp.cellsWithHeaders === 'scope') {\n                    cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n                }\n                dom.clearTableMappings(table, COL_INDEX);\n                return table;\n            },\n            _createTableRows: function (data, container, initialIndex, headerRows) {\n                var cmd = this;\n                var tableProp = data.tableProperties;\n                var cellProp = data.cellProperties;\n                var columns = tableProp.columns;\n                var rows = headerRows ? tableProp.headerRows : tableProp.rows;\n                var cellPropToAll = cellProp.selectAllCells;\n                var headerColumns = tableProp.headerColumns;\n                for (var r = initialIndex, row; r < rows; r++) {\n                    row = container.insertRow();\n                    for (var c = 0, cell; c < columns; c++) {\n                        if (headerRows || headerColumns > c) {\n                            cell = document.createElement(TH);\n                        } else {\n                            cell = document.createElement(TD);\n                        }\n                        row.appendChild(cell);\n                        cell.innerHTML = '&nbsp;';\n                        if (r === 0 && c === 0 && cellProp.id) {\n                            cell.id = cellProp.id;\n                        }\n                        cmd._updateCellProperties(cell, cellPropToAll || r === 0 && c === 0 ? cellProp : {});\n                    }\n                }\n            },\n            _addRows: function (lastSelectedRow, rows, tableRows) {\n                var cmd = this;\n                var rowIndex = $(lastSelectedRow).index();\n                var cellsLength = lastSelectedRow.cells.length;\n                var newRowsCount = rows - tableRows.length;\n                var parent = lastSelectedRow.parentNode;\n                var row;\n                while (newRowsCount) {\n                    row = parent.insertRow(rowIndex + 1);\n                    cmd._insertCells(cellsLength - row.cells.length, row);\n                    newRowsCount--;\n                }\n            },\n            _updateColumns: function (tableRows, columns, selectedCells, lastSelectedRow) {\n                var cmd = this;\n                var last = cmd._lastInCollection;\n                var firstRowLastCell = last(tableRows[0].cells);\n                var numberOfColumns = Number(firstRowLastCell.getAttribute(COL_INDEX)) + firstRowLastCell.colSpan;\n                if (numberOfColumns > columns) {\n                    $(tableRows).each(function (i, row) {\n                        var lastCurrentCell = last(row.cells);\n                        var rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n                        while (rowColumns > columns) {\n                            if (lastCurrentCell.colSpan && lastCurrentCell.colSpan > 1) {\n                                lastCurrentCell.colSpan -= 1;\n                            } else {\n                                row.deleteCell(-1);\n                            }\n                            lastCurrentCell = last(row.cells);\n                            rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n                        }\n                    });\n                }\n                if (numberOfColumns < columns) {\n                    var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n                    $(tableRows).each(function (i, row) {\n                        var lastCurrentCell = last(row.cells);\n                        cmd._insertCells(columns - Number(lastCurrentCell.getAttribute(COL_INDEX)) - lastCurrentCell.colSpan, row, cellIndex + 1);\n                    });\n                }\n            },\n            _updateTableProperties: function (table, data) {\n                var style = this._getStylesData(data);\n                dom.attr(table, {\n                    cellSpacing: data.cellSpacing || null,\n                    cellPadding: data.cellPadding || null,\n                    className: data.className || null,\n                    id: data.id || null,\n                    summary: data.summary || null,\n                    style: style || null\n                });\n                $(table).addClass('k-table');\n            },\n            _updateCellProperties: function (cell, data) {\n                var style = this._getStylesData(data);\n                style.padding = data.cellPadding || null;\n                style.margin = data.cellMargin || null;\n                dom.attr(cell, {\n                    style: style || null,\n                    className: data.className || null\n                });\n            },\n            _updateCaption: function (table, data) {\n                if (table.caption && !data.captionContent) {\n                    table.deleteCaption();\n                } else if (data.captionContent) {\n                    var caption = table.createCaption();\n                    caption.innerHTML = data.captionContent;\n                    var alignment = this._getAlignmentData(data.captionAlignment);\n                    dom.attr(caption, {\n                        style: {\n                            textAlign: alignment.textAlign,\n                            verticalAlign: alignment.verticalAlign\n                        }\n                    });\n                }\n            },\n            _updateHeadersNoThead: function (table, data) {\n                var cmd = this;\n                var tableProp = data.tableProperties;\n                var rows = table.rows;\n                var row, cells, cell, i, j;\n                for (i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    cells = row.cells;\n                    for (j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        if (!cmd._isHeadingCell(cell) && (i < tableProp.headerRows || tableProp.headerColumns > cell.getAttribute(COL_INDEX))) {\n                            dom.changeTag(cell, TH, false);\n                        } else if (cmd._isHeadingCell(cell) && i >= tableProp.headerRows && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                            dom.changeTag(cell, TD, false);\n                        }\n                    }\n                }\n            },\n            _updateHeadersWithThead: function (table, data) {\n                var cmd = this;\n                var tableProp = data.tableProperties;\n                var thead = table.tHead;\n                var rowIndex = 0;\n                var tbody = table.tBodies[0];\n                var row, cell, i;\n                if (!tbody) {\n                    tbody = table.createTBody();\n                }\n                if (tableProp.headerRows && tableProp.headerRows > 0) {\n                    if (!thead) {\n                        thead = table.createTHead();\n                    }\n                    while (thead.rows.length < tableProp.headerRows) {\n                        thead.appendChild(tbody.rows[0]);\n                    }\n                    while (thead.rows.length > tableProp.headerRows) {\n                        tbody.appendChild(thead.rows[0]);\n                    }\n                    cmd._swapToHeaderCells(thead);\n                } else if (thead) {\n                    while (thead.rows.length > 0) {\n                        tbody.appendChild(thead.rows[thead.rows.length - 1]);\n                    }\n                    table.deleteTHead();\n                }\n                while (tbody.rows.length > rowIndex) {\n                    row = tbody.rows[rowIndex];\n                    for (i = 0; i < row.cells.length; i++) {\n                        cell = row.cells[i];\n                        if (cmd._isHeadingCell(cell) && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                            dom.changeTag(cell, TD, false);\n                        } else if (!cmd._isHeadingCell(cell) && tableProp.headerColumns > cell.getAttribute(COL_INDEX)) {\n                            dom.changeTag(cell, TH, false);\n                        }\n                    }\n                    rowIndex += 1;\n                }\n            },\n            _updateHeaderAssociates: function (table, tableProp) {\n                var cmd = this;\n                if (tableProp.cellsWithHeaders === 'ids') {\n                    if (!cmd.cellsWithHeadersAssociated(table)) {\n                        cmd._removeScopes(table);\n                    }\n                    dom.associateWithIds(table);\n                } else if (tableProp.cellsWithHeaders === 'scope') {\n                    if (cmd.cellsWithHeadersAssociated(table)) {\n                        cmd._removeAssociates(table);\n                    }\n                    cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n                } else {\n                    if (cmd.cellsWithHeadersAssociated(table)) {\n                        cmd._removeAssociates(table);\n                    } else {\n                        cmd._removeScopes(table);\n                    }\n                }\n            },\n            _addScopes: function (table, headerRows, headerCols) {\n                var rows = table.rows;\n                var i, j, row, cell;\n                for (i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    for (j = 0; j < row.cells.length; j++) {\n                        cell = row.cells[j];\n                        if (i < headerRows) {\n                            cell.setAttribute(SCOPE, COL);\n                        } else if (cell.getAttribute(COL_INDEX) < headerCols) {\n                            cell.setAttribute(SCOPE, ROW);\n                        }\n                    }\n                }\n            },\n            _removeScopes: function (table) {\n                $(table).find(TH).removeAttr(SCOPE);\n                $(table).find(COL).remove();\n                $(table).find(COLGROUP).remove();\n            },\n            _removeAssociates: function (table) {\n                $(table).find('th, td').removeAttr('id headers');\n            },\n            _swapToHeaderCells: function (thead) {\n                var tds = $(thead).find('td');\n                var swapCell = function (index, cell) {\n                    dom.changeTag(cell, TH, false);\n                };\n                tds.each(swapCell);\n            },\n            _getStylesData: function (data) {\n                var alignment = this._getAlignmentData(data.alignment);\n                var whiteSpace = 'wrapText' in data ? data.wrapText ? '' : 'nowrap' : null;\n                return {\n                    width: data.width ? data.width + data.widthUnit : null,\n                    height: data.height ? data.height + data.heightUnit : null,\n                    textAlign: alignment.textAlign,\n                    verticalAlign: alignment.verticalAlign,\n                    backgroundColor: data.bgColor || '',\n                    borderWidth: data.borderWidth,\n                    borderStyle: data.borderStyle,\n                    borderColor: data.borderColor || '',\n                    borderCollapse: data.collapseBorders ? 'collapse' : null,\n                    whiteSpace: whiteSpace\n                };\n            },\n            _getAlignmentData: function (alignment) {\n                var textAlign = '';\n                var verticalAlign = textAlign;\n                if (alignment) {\n                    if (alignment.indexOf(' ') != -1) {\n                        var align = alignment.split(' ');\n                        textAlign = align[0];\n                        verticalAlign = align[1];\n                    } else {\n                        textAlign = alignment;\n                    }\n                }\n                return {\n                    textAlign: textAlign,\n                    verticalAlign: verticalAlign\n                };\n            },\n            parseTable: function (table, selectedCells) {\n                if (!table) {\n                    return {\n                        tableProperties: {},\n                        selectedCells: []\n                    };\n                }\n                var cmd = this;\n                var tStyle = table.style;\n                var rows = table.rows;\n                var caption = table.caption;\n                var captionClone = $(caption ? caption.cloneNode(true) : undefined);\n                captionClone.find('.k-marker').remove();\n                var cssClass = table.className;\n                cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, '');\n                cssClass = cssClass.replace(/\\sk-table\\s/, ' ');\n                cssClass = cssClass.replace(/^k-table$/, '');\n                var tableAlignment = cmd._getAlignment(table, true);\n                var captionAlignment = caption ? cmd._getAlignment(caption) : undefined;\n                var numberOfHeaderRows = dom._getNumberOfHeaderRows(table);\n                var cellsWithHeaders;\n                if (cmd.cellsWithHeadersAssociated(table)) {\n                    cellsWithHeaders = 'ids';\n                } else if ($(table).find('th[scope]').length > 0) {\n                    cellsWithHeaders = 'scope';\n                } else {\n                    cellsWithHeaders = 'none';\n                }\n                dom.reMapTableColumns(table, COL_INDEX);\n                var numberOfColumns = dom._getNumberOfColumns(table);\n                var numberOfHeaderColumns = dom._getNumberOfHeaderColumns(table, numberOfHeaderRows);\n                dom.clearTableMappings(table, COL_INDEX);\n                var tableJson = {\n                    tableProperties: {\n                        width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                        height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                        columns: numberOfColumns,\n                        rows: rows.length,\n                        widthUnit: cmd._getUnit(tStyle.width),\n                        heightUnit: cmd._getUnit(tStyle.height),\n                        cellSpacing: table.cellSpacing,\n                        cellPadding: table.cellPadding,\n                        alignment: tableAlignment.textAlign,\n                        bgColor: tStyle.backgroundColor || table.bgColor,\n                        className: cssClass,\n                        id: table.id,\n                        borderWidth: tStyle.borderWidth || table.border,\n                        borderColor: tStyle.borderColor,\n                        borderStyle: tStyle.borderStyle || '',\n                        collapseBorders: !!tStyle.borderCollapse,\n                        summary: table.summary,\n                        captionContent: caption ? captionClone.html() : '',\n                        captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + ' ' + captionAlignment.verticalAlign : '',\n                        headerRows: numberOfHeaderRows,\n                        headerColumns: numberOfHeaderColumns,\n                        cellsWithHeaders: cellsWithHeaders\n                    },\n                    selectedCells: []\n                };\n                tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n                return tableJson;\n            },\n            parseTableRows: function (rows, selectedCells, tableJson) {\n                var cmd = this;\n                var data = [], row, rowData, cells, cell, cellData;\n                for (var i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    rowData = { cells: [] };\n                    cells = row.cells;\n                    data.push(rowData);\n                    for (var j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        cellData = cmd.parseCell(cell);\n                        if ($.inArray(cell, selectedCells) != -1) {\n                            tableJson.selectedCells.push(cellData);\n                        }\n                        rowData.cells.push(cellData);\n                    }\n                }\n                return data;\n            },\n            parseCell: function (cell) {\n                var cmd = this;\n                var cStyle = cell.style;\n                var alignment = cmd._getAlignment(cell);\n                alignment = alignment.textAlign ? alignment.textAlign + ' ' + alignment.verticalAlign : '';\n                var data = {\n                    width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n                    height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n                    widthUnit: cmd._getUnit(cStyle.width),\n                    heightUnit: cmd._getUnit(cStyle.height),\n                    cellMargin: cStyle.margin,\n                    cellPadding: cStyle.padding,\n                    alignment: alignment,\n                    bgColor: cStyle.backgroundColor || cell.bgColor,\n                    className: cell.className,\n                    id: cell.id,\n                    borderWidth: cStyle.borderWidth || cell.border,\n                    borderColor: cStyle.borderColor,\n                    borderStyle: cStyle.borderStyle,\n                    wrapText: cStyle.whiteSpace != 'nowrap'\n                };\n                return data;\n            },\n            _getAlignment: function (element, horizontalOnly) {\n                var style = element.style;\n                var hAlign = style.textAlign || element.align || '';\n                if (horizontalOnly) {\n                    return { textAlign: hAlign };\n                }\n                var vAlign = style.verticalAlign || element.vAlign || '';\n                if (hAlign && vAlign) {\n                    return {\n                        textAlign: hAlign,\n                        verticalAlign: vAlign\n                    };\n                }\n                if (!hAlign && vAlign) {\n                    return {\n                        textAlign: 'left',\n                        verticalAlign: vAlign\n                    };\n                }\n                if (hAlign && !vAlign) {\n                    return {\n                        textAlign: hAlign,\n                        verticalAlign: 'top'\n                    };\n                }\n                return {\n                    textAlign: '',\n                    verticalAlign: ''\n                };\n            },\n            _getUnit: function (value) {\n                var unit = (value || '').match(reUnit);\n                return unit ? unit[0] : 'px';\n            },\n            _selectedTable: function (range) {\n                var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                return tableFormatFinder.findSuitable(nodes)[0];\n            },\n            _selectedCells: function (range) {\n                var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                return cellsFormatFinder.findSuitable(nodes);\n            },\n            _lastInCollection: function (collection) {\n                return collection[collection.length - 1];\n            }\n        });\n        var TableWizardTool = Editor.Tool.extend({\n            command: function (options) {\n                options.insertNewTable = this.options.insertNewTable;\n                return new TableWizardCommand(options);\n            }\n        });\n        var TableWizardEditTool = TableWizardTool.extend({\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                if (isFormatted === true) {\n                    ui.parent().addClass('k-hidden k-state-disabled');\n                    ui.attr('disabled', 'disabled');\n                    ui.addClass('k-state-disabled');\n                } else {\n                    ui.parent().removeClass('k-hidden k-state-disabled');\n                    ui.removeAttr('disabled');\n                    ui.removeClass('k-state-disabled');\n                }\n            }\n        });\n        kendo.ui.editor.TableWizardTool = TableWizardTool;\n        kendo.ui.editor.TableWizardCommand = TableWizardCommand;\n        registerTool('tableWizard', new TableWizardEditTool({\n            command: TableWizardCommand,\n            insertNewTable: false,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Table Wizard'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/table-wizard/table-wizard-dialog', [\n        'editor/table-wizard/table-wizard-command',\n        'kendo.tabstrip'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, numericTextBoxSettings = {\n                format: '0',\n                min: 0\n            }, units = [\n                'px',\n                'em'\n            ], borderStyles = [\n                'solid',\n                'dotted',\n                'dashed',\n                'double',\n                'groove',\n                'ridge',\n                'inset',\n                'outset',\n                'initial',\n                'inherit',\n                'none',\n                'hidden'\n            ];\n        var DEFAULT_NUMBER_OF_COLS_AND_ROWS = 4;\n        var tableAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-middle-left',\n                    value: 'left'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-center',\n                    value: 'center'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-right',\n                    value: 'right'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var cellAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-top-left',\n                    value: 'left top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-center',\n                    value: 'center top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-right',\n                    value: 'right top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-left',\n                    value: 'left middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-center',\n                    value: 'center middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-right',\n                    value: 'right middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-left',\n                    value: 'left bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-center',\n                    value: 'center bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-right',\n                    value: 'right bottom'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var accessibilityAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-top-left',\n                    value: 'left top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-center',\n                    value: 'center top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-right',\n                    value: 'right top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-left',\n                    value: 'left bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-center',\n                    value: 'center bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-right',\n                    value: 'right bottom'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var dialogTemplate = '<div class=\"k-editor-dialog k-editor-table-wizard-dialog k-action-window k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' + '<ul>' + '<li class=\"k-state-active\">#= messages.tableTab #</li>' + '<li>#= messages.cellTab #</li>' + '<li>#= messages.accessibilityTab #</li>' + '</ul>' + '<div id=\"k-table-properties\">' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-width\">#= messages.width #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-width\" />' + '<input id=\"k-editor-table-width-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-height\">#= messages.height #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-height\" />' + '<input id=\"k-editor-table-height-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-columns\">#= messages.columns #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-columns\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-rows\">#= messages.rows #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-rows\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-spacing\">#= messages.cellSpacing #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-spacing\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-padding\">#= messages.cellPadding #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-padding\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-bg\">#= messages.background #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-bg\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-css-class\">#= messages.cssClass #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-css-class\" class=\"k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-id\">#= messages.id #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-id\" class=\"k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-border-width\">#= messages.border #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-border-width\" />' + '<input id=\"k-editor-border-color\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-border-style\">#= messages.borderStyle #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-border-style\" />' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-collapse-borders\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-collapse-borders\" class=\"k-checkbox-label\">#= messages.collapseBorders #</label>' + '</div>' + '</div>' + '<div id=\"k-cell-properties\">' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-selectAllCells\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-selectAllCells\" class=\"k-checkbox-label\">#= messages.selectAllCells #</label>' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-width\">#= messages.width #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-width\" />' + '<input id=\"k-editor-cell-width-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-height\">#= messages.height #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-height\" />' + '<input id=\"k-editor-cell-height-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-margin\">#= messages.cellMargin #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-margin\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cells-padding\">#= messages.cellPadding #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cells-padding\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-bg\">#= messages.background #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-bg\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-css-class\">#= messages.cssClass #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-css-class\" class=\"k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-id\">#= messages.id #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-id\" class=\"k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-border-width\">#= messages.border #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-border-width\" />' + '<input id=\"k-editor-cell-border-color\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-border-style\">#= messages.borderStyle #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-border-style\" />' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-wrap-text\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-wrap-text\" class=\"k-checkbox-label\">#= messages.wrapText #</label>' + '</div>' + '</div>' + '<div id=\"k-accessibility-properties\">' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-header-rows\">#= messages.headerRows #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-header-rows\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-header-columns\">#= messages.headerColumns #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-header-columns\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-caption\">#= messages.caption #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-caption\" class=\"k-textbox\" type=\"text\"/>' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-accessibility-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-accessibility-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-accessibility-summary\">#= messages.summary #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<textarea id=\"k-editor-accessibility-summary\" rows=\"5\" class=\"k-textbox k-editor-accessibility-summary\" placeholder=\"#= messages.tableSummaryPlaceholder #\"></textarea>' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cells-headers\">#= messages.associateCellsWithHeaders #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<select id=\"k-editor-cells-headers\">' + '<option value=\"none\">#= messages.associateNone #</option>' + '<option value=\"scope\">#= messages.associateScope #</option>' + '<option value=\"ids\">#= messages.associateIds #</option>' + '</select>' + '</div>' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-button k-primary k-dialog-ok\">#= messages.dialogOk #</button>' + '<button class=\"k-button k-dialog-close\">#= messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>';\n        var TableWizardDialog = kendo.Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            open: function () {\n                var that = this, options = that.options, dialogOptions = options.dialogOptions, tableData = options.table, dialog, messages = options.messages, isIE = kendo.support.browser.msie;\n                function close(e) {\n                    e.preventDefault();\n                    that.destroy();\n                    dialog.destroy();\n                }\n                function okHandler(e) {\n                    that.collectDialogValues(tableData);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    options.closeCallback(tableData);\n                }\n                function closeHandler(e) {\n                    close(e);\n                    options.closeCallback();\n                }\n                dialogOptions.close = closeHandler;\n                dialogOptions.title = messages.tableWizard;\n                dialogOptions.visible = options.visible;\n                dialog = $(that._dialogTemplate(messages)).appendTo(document.body).kendoWindow(dialogOptions).closest('.k-window').toggleClass('k-rtl', options.isRtl).end().find('.k-dialog-ok').click(okHandler).end().find('.k-dialog-close').click(closeHandler).end().data('kendoWindow');\n                var element = dialog.element;\n                that._initTabStripComponent(element);\n                that._initTableViewComponents(element, tableData);\n                that._initCellViewComponents(element, tableData);\n                that._initAccessibilityViewComponents(element, tableData);\n                dialog.center();\n                dialog.open();\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n            },\n            _initTabStripComponent: function (element) {\n                var components = this.components = {};\n                components.tabStrip = element.find('#k-table-wizard-tabs').kendoTabStrip({ animation: false }).data('kendoTabStrip');\n            },\n            collectDialogValues: function () {\n                var that = this;\n                var data = that.options.table;\n                that._collectTableViewValues(data);\n                that._collectCellViewValues(data);\n                that._collectAccessibilityViewValues(data);\n            },\n            _collectTableViewValues: function (tableData) {\n                var tableView = this.components.tableView;\n                var tableProperties = tableData.tableProperties;\n                tableProperties.width = tableView.width.value();\n                tableProperties.widthUnit = tableView.widthUnit.value();\n                tableProperties.height = tableView.height.value();\n                tableProperties.columns = tableView.columns.value();\n                tableProperties.rows = tableView.rows.value();\n                tableProperties.heightUnit = tableView.heightUnit.value();\n                tableProperties.cellSpacing = tableView.cellSpacing.value();\n                tableProperties.cellPadding = tableView.cellPadding.value();\n                tableProperties.alignment = tableView.alignment.value();\n                tableProperties.bgColor = tableView.bgColor.value();\n                tableProperties.className = tableView.className.value;\n                tableProperties.id = tableView.id.value;\n                tableProperties.borderWidth = tableView.borderWidth.value();\n                tableProperties.borderColor = tableView.borderColor.value();\n                tableProperties.borderStyle = tableView.borderStyle.value();\n                tableProperties.collapseBorders = tableView.collapseBorders.checked;\n            },\n            _collectCellViewValues: function (table) {\n                var cellData = table.cellProperties = {};\n                var cellView = this.components.cellView;\n                cellData.selectAllCells = cellView.selectAllCells.checked;\n                cellData.width = cellView.width.value();\n                cellData.widthUnit = cellView.widthUnit.value();\n                cellData.height = cellView.height.value();\n                cellData.heightUnit = cellView.heightUnit.value();\n                cellData.cellMargin = cellView.cellMargin.value();\n                cellData.cellPadding = cellView.cellPadding.value();\n                cellData.alignment = cellView.alignment.value();\n                cellData.bgColor = cellView.bgColor.value();\n                cellData.className = cellView.className.value;\n                cellData.id = cellView.id.value;\n                cellData.borderWidth = cellView.borderWidth.value();\n                cellData.borderColor = cellView.borderColor.value();\n                cellData.borderStyle = cellView.borderStyle.value();\n                cellData.wrapText = cellView.wrapText.checked;\n                if (!cellData.width) {\n                    cellData.selectAllCells = true;\n                    cellData.width = 100 / table.tableProperties.columns;\n                    cellData.widthUnit = '%';\n                }\n            },\n            _collectAccessibilityViewValues: function (table) {\n                var tableProperties = table.tableProperties;\n                var accessibilityView = this.components.accessibilityView;\n                tableProperties.captionContent = accessibilityView.captionContent.value;\n                tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n                tableProperties.summary = accessibilityView.summary.value;\n                tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.value();\n                tableProperties.headerRows = accessibilityView.headerRows.value();\n                tableProperties.headerColumns = accessibilityView.headerColumns.value();\n            },\n            _addUnit: function (units, value) {\n                if (value && $.inArray(value, units) == -1) {\n                    units.push(value);\n                }\n            },\n            _initTableViewComponents: function (element, table) {\n                var that = this;\n                var components = that.components;\n                var tableView = components.tableView = {};\n                var tableProperties = table.tableProperties = table.tableProperties || {};\n                tableProperties.borderStyle = tableProperties.borderStyle || '';\n                var onColumnsNumberChange = function (args) {\n                    var accessibilityView = that.components.accessibilityView;\n                    var headerColumnsNumeric = accessibilityView.headerColumns;\n                    var currentNumberOfColumnsHeaders = headerColumnsNumeric.value();\n                    var numberOfColumns = args.sender.value();\n                    if (numberOfColumns < currentNumberOfColumnsHeaders) {\n                        headerColumnsNumeric.value(numberOfColumns);\n                    }\n                    headerColumnsNumeric.max(numberOfColumns);\n                };\n                var onRowsNumberChange = function (args) {\n                    var accessibilityView = that.components.accessibilityView;\n                    var headerRowsNumeric = accessibilityView.headerRows;\n                    var currentNumberOfRowHeaders = headerRowsNumeric.value();\n                    var numberOfRows = args.sender.value();\n                    if (numberOfRows < currentNumberOfRowHeaders) {\n                        headerRowsNumeric.value(numberOfRows);\n                    }\n                    headerRowsNumeric.max(numberOfRows);\n                };\n                that._addUnit(units, tableProperties.widthUnit);\n                that._addUnit(units, tableProperties.heightUnit);\n                that._initNumericTextbox(element.find('#k-editor-table-width'), 'width', tableProperties, tableView);\n                that._initNumericTextbox(element.find('#k-editor-table-height'), 'height', tableProperties, tableView);\n                that._initNumericTextbox(element.find('#k-editor-table-columns'), 'columns', tableProperties, tableView, {\n                    min: 1,\n                    value: DEFAULT_NUMBER_OF_COLS_AND_ROWS,\n                    change: onColumnsNumberChange\n                });\n                that._initNumericTextbox(element.find('#k-editor-table-rows'), 'rows', tableProperties, tableView, {\n                    min: 1,\n                    value: DEFAULT_NUMBER_OF_COLS_AND_ROWS,\n                    change: onRowsNumberChange\n                });\n                that._initDropDownList(element.find('#k-editor-table-width-type'), 'widthUnit', tableProperties, tableView, units);\n                that._initDropDownList(element.find('#k-editor-table-height-type'), 'heightUnit', tableProperties, tableView, units);\n                that._initNumericTextbox(element.find('#k-editor-table-cell-spacing'), 'cellSpacing', tableProperties, tableView);\n                that._initNumericTextbox(element.find('#k-editor-table-cell-padding'), 'cellPadding', tableProperties, tableView);\n                that._initTableAlignmentDropDown(element.find('#k-editor-table-alignment'), tableProperties);\n                that._initColorPicker(element.find('#k-editor-table-bg'), 'bgColor', tableProperties, tableView);\n                that._initInput(element.find('#k-editor-css-class'), 'className', tableProperties, tableView);\n                that._initInput(element.find('#k-editor-id'), 'id', tableProperties, tableView);\n                that._initNumericTextbox(element.find('#k-editor-border-width'), 'borderWidth', tableProperties, tableView);\n                that._initColorPicker(element.find('#k-editor-border-color'), 'borderColor', tableProperties, tableView);\n                that._initDropDownList(element.find('#k-editor-border-style'), 'borderStyle', tableProperties, tableView, borderStyles);\n                that._initCheckbox(element.find('#k-editor-collapse-borders'), 'collapseBorders', tableProperties, tableView);\n            },\n            _initCellViewComponents: function (element, table) {\n                var components = this.components;\n                var cellView = components.cellView = {};\n                table.selectedCells = table.selectedCells = table.selectedCells || [];\n                var cellProperties = table.selectedCells[0] || {\n                    borderStyle: '',\n                    wrapText: true\n                };\n                this._addUnit(units, cellProperties.widthUnit);\n                this._addUnit(units, cellProperties.heightUnit);\n                this._initCheckbox(element.find('#k-editor-selectAllCells'), 'selectAllCells', table.tableProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-width'), 'width', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-height'), 'height', cellProperties, cellView);\n                this._initDropDownList(element.find('#k-editor-cell-width-type'), 'widthUnit', cellProperties, cellView, units);\n                this._initDropDownList(element.find('#k-editor-cell-height-type'), 'heightUnit', cellProperties, cellView, units);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-margin'), 'cellMargin', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-table-cells-padding'), 'cellPadding', cellProperties, cellView);\n                this._initCellAlignmentDropDown(element.find('#k-editor-cell-alignment'), cellProperties);\n                this._initColorPicker(element.find('#k-editor-cell-bg'), 'bgColor', cellProperties, cellView);\n                this._initInput(element.find('#k-editor-cell-css-class'), 'className', cellProperties, cellView);\n                this._initInput(element.find('#k-editor-cell-id'), 'id', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-border-width'), 'borderWidth', cellProperties, cellView);\n                this._initColorPicker(element.find('#k-editor-cell-border-color'), 'borderColor', cellProperties, cellView);\n                this._initDropDownList(element.find('#k-editor-cell-border-style'), 'borderStyle', cellProperties, cellView, borderStyles);\n                this._initCheckbox(element.find('#k-editor-wrap-text'), 'wrapText', cellProperties, cellView);\n            },\n            _initAccessibilityViewComponents: function (element, table) {\n                var components = this.components;\n                var accessibilityView = components.accessibilityView = {};\n                var tableProperties = table.tableProperties;\n                this._initInput(element.find('#k-editor-table-caption'), 'captionContent', tableProperties, accessibilityView);\n                this._initAccessibilityAlignmentDropDown(element.find('#k-editor-accessibility-alignment'), tableProperties);\n                this._initInput(element.find('#k-editor-accessibility-summary'), 'summary', tableProperties, accessibilityView);\n                this._initAssociationDropDown(element.find('#k-editor-cells-headers'), 'cellsWithHeaders', { valuePrimitive: true }, tableProperties, accessibilityView);\n                this._initNumericTextbox(element.find('#k-editor-table-header-rows'), 'headerRows', tableProperties, accessibilityView, { max: tableProperties.rows || DEFAULT_NUMBER_OF_COLS_AND_ROWS });\n                this._initNumericTextbox(element.find('#k-editor-table-header-columns'), 'headerColumns', tableProperties, accessibilityView, { max: tableProperties.columns || DEFAULT_NUMBER_OF_COLS_AND_ROWS });\n            },\n            _initNumericTextbox: function (element, property, data, storage, settings) {\n                var component = storage[property] = element.kendoNumericTextBox(settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings).data('kendoNumericTextBox');\n                if (property in data) {\n                    component.value(parseInt(data[property], 10));\n                }\n            },\n            _initDropDownList: function (element, property, data, storage, dataSource) {\n                var component = storage[property] = element.kendoDropDownList({ dataSource: dataSource }).data('kendoDropDownList');\n                this._setComponentValue(component, data, property);\n            },\n            _initTableAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var tableView = this.components.tableView;\n                var dataSource = tableAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeft;\n                dataSource[1].tooltip = messages.alignCenter;\n                dataSource[2].tooltip = messages.alignRight;\n                dataSource[3].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, 'alignment', data, tableView);\n            },\n            _initCellAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var cellView = this.components.cellView;\n                var dataSource = cellAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeftTop;\n                dataSource[1].tooltip = messages.alignCenterTop;\n                dataSource[2].tooltip = messages.alignRightTop;\n                dataSource[3].tooltip = messages.alignLeftMiddle;\n                dataSource[4].tooltip = messages.alignCenterMiddle;\n                dataSource[5].tooltip = messages.alignRightMiddle;\n                dataSource[6].tooltip = messages.alignLeftBottom;\n                dataSource[7].tooltip = messages.alignCenterBottom;\n                dataSource[8].tooltip = messages.alignRightBottom;\n                dataSource[9].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, 'alignment', data, cellView);\n            },\n            _initAccessibilityAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var accessibilityView = this.components.accessibilityView;\n                var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeftTop;\n                dataSource[1].tooltip = messages.alignCenterTop;\n                dataSource[2].tooltip = messages.alignRightTop;\n                dataSource[3].tooltip = messages.alignLeftBottom;\n                dataSource[4].tooltip = messages.alignCenterBottom;\n                dataSource[5].tooltip = messages.alignRightBottom;\n                dataSource[6].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, 'captionAlignment', data, accessibilityView);\n            },\n            _initAlignmentDropDown: function (element, settings, name, data, storage) {\n                var component = storage[name] = element.kendoDropDownList(settings).data('kendoDropDownList');\n                component.list.addClass('k-align').css('width', '110px');\n                this._setComponentValue(component, data, name);\n            },\n            _initAssociationDropDown: function (element, name, settings, data, storage) {\n                var component = storage[name] = element.kendoDropDownList(settings).data('kendoDropDownList');\n                this._setComponentValue(component, data, name);\n            },\n            _setComponentValue: function (component, data, property) {\n                if (property in data) {\n                    component.value(data[property]);\n                }\n            },\n            _initColorPicker: function (element, property, data, storage) {\n                var component = storage[property] = element.kendoColorPicker({\n                    buttons: false,\n                    clearButton: true\n                }).data('kendoColorPicker');\n                if (data[property]) {\n                    component.value(data[property]);\n                }\n            },\n            _initInput: function (element, property, data, storage) {\n                var component = storage[property] = element.get(0);\n                if (property in data) {\n                    component.value = data[property];\n                }\n            },\n            _initCheckbox: function (element, property, data, storage) {\n                var component = storage[property] = element.get(0);\n                if (property in data) {\n                    component.checked = data[property];\n                }\n            },\n            destroy: function () {\n                this._destroyComponents(this.components.tableView);\n                this._destroyComponents(this.components.cellView);\n                this._destroyComponents(this.components.accessibilityView);\n                this._destroyComponents(this.components);\n                delete this.components;\n            },\n            _destroyComponents: function (components) {\n                for (var widget in components) {\n                    if (components[widget].destroy) {\n                        components[widget].destroy();\n                    }\n                    delete components[widget];\n                }\n            },\n            _dialogTemplate: function (messages) {\n                return kendo.template(dialogTemplate)({ messages: messages });\n            }\n        });\n        kendo.ui.editor.TableWizardDialog = TableWizardDialog;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.editor', [\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.resizable',\n        'kendo.window',\n        'kendo.colorpicker',\n        'kendo.imagebrowser',\n        'kendo.numerictextbox',\n        'util/undoredostack',\n        'editor/main',\n        'editor/dom',\n        'editor/serializer',\n        'editor/range',\n        'editor/command',\n        'editor/components',\n        'editor/toolbar',\n        'editor/immutables',\n        'editor/plugins/viewhtml',\n        'editor/plugins/link',\n        'editor/plugins/lists',\n        'editor/plugins/formatting',\n        'editor/plugins/image',\n        'editor/plugins/import',\n        'editor/plugins/insert',\n        'editor/plugins/export',\n        'editor/plugins/indent',\n        'editor/plugins/linebreak',\n        'editor/plugins/format',\n        'editor/plugins/inlineformat',\n        'editor/plugins/formatblock',\n        'editor/plugins/file',\n        'editor/plugins/tables',\n        'editor/plugins/clipboard',\n        'editor/plugins/keyboard',\n        'editor/plugins/exportpdf',\n        'editor/plugins/print',\n        'editor/plugins/formatpainter',\n        'editor/resizing/column-resizing',\n        'editor/resizing/row-resizing',\n        'editor/resizing/table-resizing',\n        'editor/resizing/table-resize-handle',\n        'editor/table-wizard/table-wizard-command',\n        'editor/table-wizard/table-wizard-dialog'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'editor',\n        name: 'Editor',\n        category: 'web',\n        description: 'Rich text editor component',\n        depends: [\n            'combobox',\n            'dropdownlist',\n            'window',\n            'colorpicker'\n        ],\n        features: [\n            {\n                id: 'editor-imagebrowser',\n                name: 'Image Browser',\n                description: 'Support for uploading and inserting images',\n                depends: ['imagebrowser']\n            },\n            {\n                id: 'editor-resizable',\n                name: 'Resize handle',\n                description: 'Support for resizing the content area via a resize handle',\n                depends: ['resizable']\n            },\n            {\n                id: 'editor-tablewizard',\n                name: 'Table wizard dialog',\n                description: 'Support for table properties configuration',\n                depends: [\n                    'tabstrip',\n                    'button',\n                    'numerictextbox'\n                ]\n            },\n            {\n                id: 'editor-pdf-export',\n                name: 'PDF export',\n                description: 'Export Editor content as PDF',\n                depends: [\n                    'pdf',\n                    'drawing'\n                ]\n            }\n        ]\n    };\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}